(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1211:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopedLocalStorage=void 0;t.ScopedLocalStorage=class{constructor(e){this.scope=e}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),t=[];for(let i=0;i<localStorage.length;i++){const r=localStorage.key(i);"string"==typeof r&&r.startsWith(e)&&t.push(r)}t.forEach(e=>localStorage.removeItem(e))}scopedKey(e){return`${this.scope}:${e}`}}},1224:function(e,t,r){(function(t){const n=r(593),o=r(1238),h={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},d={encodeData(e,data,r,h=!0){const d=["bytes32"],c=[this.hashType(e,r)];if(h){const l=(e,d,c)=>{if(void 0!==r[d])return["bytes32",null==c?"0x0000000000000000000000000000000000000000000000000000000000000000":n.keccak(this.encodeData(d,c,r,h))];if(void 0===c)throw new Error(`missing value for field ${e} of type ${d}`);if("bytes"===d)return["bytes32",n.keccak(c)];if("string"===d)return"string"==typeof c&&(c=t.from(c,"utf8")),["bytes32",n.keccak(c)];if(d.lastIndexOf("]")===d.length-1){const t=d.slice(0,d.lastIndexOf("[")),r=c.map(r=>l(e,t,r));return["bytes32",n.keccak(o.rawEncode(r.map(([e])=>e),r.map(([,e])=>e)))]}return[d,c]};for(const t of r[e]){const[e,r]=l(t.name,t.type,data[t.name]);d.push(e),c.push(r)}}else for(const o of r[e]){let e=data[o.name];if(void 0!==e)if("bytes"===o.type)d.push("bytes32"),e=n.keccak(e),c.push(e);else if("string"===o.type)d.push("bytes32"),"string"==typeof e&&(e=t.from(e,"utf8")),e=n.keccak(e),c.push(e);else if(void 0!==r[o.type])d.push("bytes32"),e=n.keccak(this.encodeData(o.type,e,r,h)),c.push(e);else{if(o.type.lastIndexOf("]")===o.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");d.push(o.type),c.push(e)}}return o.rawEncode(d,c)},encodeType(e,t){let r="",n=this.findTypeDependencies(e,t).filter(t=>t!==e);n=[e].concat(n.sort());for(const e of n){if(!t[e])throw new Error("No type definition specified: "+e);r+=e+"("+t[e].map(({name:e,type:t})=>t+" "+e).join(",")+")"}return r},findTypeDependencies(e,t,r=[]){if(e=e.match(/^\w*/)[0],r.includes(e)||void 0===t[e])return r;r.push(e);for(const n of t[e])for(const e of this.findTypeDependencies(n.type,t,r))!r.includes(e)&&r.push(e);return r},hashStruct(e,data,t,r=!0){return n.keccak(this.encodeData(e,data,t,r))},hashType(e,t){return n.keccak(this.encodeType(e,t))},sanitizeData(data){const e={};for(const t in h.properties)data[t]&&(e[t]=data[t]);return e.types&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e},hash(e,r=!0){const o=this.sanitizeData(e),h=[t.from("1901","hex")];return h.push(this.hashStruct("EIP712Domain",o.domain,o.types,r)),"EIP712Domain"!==o.primaryType&&h.push(this.hashStruct(o.primaryType,o.message,o.types,r)),n.keccak(t.concat(h))}};e.exports={TYPED_MESSAGE_SCHEMA:h,TypedDataUtils:d,hashForSignTypedDataLegacy:function(e){return function(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;const data=e.map((function(e){return"bytes"===e.type?n.toBuffer(e.value):e.value})),r=e.map((function(e){return e.type})),h=e.map((function(e){if(!e.name)throw t;return e.type+" "+e.name}));return o.soliditySHA3(["bytes32","bytes32"],[o.soliditySHA3(new Array(e.length).fill("string"),h),o.soliditySHA3(r,data)])}(e.data)},hashForSignTypedData_v3:function(e){return d.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return d.hash(e.data)}}}).call(this,r(11).Buffer)},1238:function(e,t,r){(function(t){const n=r(593),o=r(286);function h(e){return e.startsWith("int[")?"int256"+e.slice(3):"int"===e?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):"uint"===e?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):"ufixed"===e?"ufixed128x128":e}function d(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function c(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function l(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":parseInt(t[2],10):null}function m(e){var t=typeof e;if("string"===t)return n.isHexString(e)?new o(n.stripHexPrefix(e),16):new o(e,10);if("number"===t)return new o(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function f(e,r){var h,y,E,i;if("address"===e)return f("uint160",m(r));if("bool"===e)return f("uint8",r?1:0);if("string"===e)return f("bytes",new t(r,"utf8"));if(function(e){return e.lastIndexOf("]")===e.length-1}(e)){if(void 0===r.length)throw new Error("Not an array?");if("dynamic"!==(h=l(e))&&0!==h&&r.length>h)throw new Error("Elements exceed array size: "+h);for(i in E=[],e=e.slice(0,e.lastIndexOf("[")),"string"==typeof r&&(r=JSON.parse(r)),r)E.push(f(e,r[i]));if("dynamic"===h){var _=f("uint256",r.length);E.unshift(_)}return t.concat(E)}if("bytes"===e)return r=new t(r),E=t.concat([f("uint256",r.length),r]),r.length%32!=0&&(E=t.concat([E,n.zeros(32-r.length%32)])),E;if(e.startsWith("bytes")){if((h=d(e))<1||h>32)throw new Error("Invalid bytes<N> width: "+h);return n.setLengthRight(r,32)}if(e.startsWith("uint")){if((h=d(e))%8||h<8||h>256)throw new Error("Invalid uint<N> width: "+h);if((y=m(r)).bitLength()>h)throw new Error("Supplied uint exceeds width: "+h+" vs "+y.bitLength());if(y<0)throw new Error("Supplied uint is negative");return y.toArrayLike(t,"be",32)}if(e.startsWith("int")){if((h=d(e))%8||h<8||h>256)throw new Error("Invalid int<N> width: "+h);if((y=m(r)).bitLength()>h)throw new Error("Supplied int exceeds width: "+h+" vs "+y.bitLength());return y.toTwos(256).toArrayLike(t,"be",32)}if(e.startsWith("ufixed")){if(h=c(e),(y=m(r))<0)throw new Error("Supplied ufixed is negative");return f("uint256",y.mul(new o(2).pow(new o(h[1]))))}if(e.startsWith("fixed"))return h=c(e),f("int256",m(r).mul(new o(2).pow(new o(h[1]))));throw new Error("Unsupported or invalid type: "+e)}function y(e){return"string"===e||"bytes"===e||"dynamic"===l(e)}function E(e,r){if(e.length!==r.length)throw new Error("Number of types are not matching the values");for(var o,c,l=[],i=0;i<e.length;i++){var f=h(e[i]),y=r[i];if("bytes"===f)l.push(y);else if("string"===f)l.push(new t(y,"utf8"));else if("bool"===f)l.push(new t(y?"01":"00","hex"));else if("address"===f)l.push(n.setLength(y,20));else if(f.startsWith("bytes")){if((o=d(f))<1||o>32)throw new Error("Invalid bytes<N> width: "+o);l.push(n.setLengthRight(y,o))}else if(f.startsWith("uint")){if((o=d(f))%8||o<8||o>256)throw new Error("Invalid uint<N> width: "+o);if((c=m(y)).bitLength()>o)throw new Error("Supplied uint exceeds width: "+o+" vs "+c.bitLength());l.push(c.toArrayLike(t,"be",o/8))}else{if(!f.startsWith("int"))throw new Error("Unsupported or invalid type: "+f);if((o=d(f))%8||o<8||o>256)throw new Error("Invalid int<N> width: "+o);if((c=m(y)).bitLength()>o)throw new Error("Supplied int exceeds width: "+o+" vs "+c.bitLength());l.push(c.toTwos(o).toArrayLike(t,"be",o/8))}}return t.concat(l)}e.exports={rawEncode:function(e,r){var output=[],data=[],n=32*e.length;for(var i in e){var o=h(e[i]),d=f(o,r[i]);y(o)?(output.push(f("uint256",n)),data.push(d),n+=d.length):output.push(d)}return t.concat(output.concat(data))},solidityPack:E,soliditySHA3:function(e,t){return n.keccak(E(e,t))}}}).call(this,r(11).Buffer)},1239:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterFromParam=t.FilterPolyfill=void 0;const n=r(287),o=r(138),h={jsonrpc:"2.0",id:0};function d(param){return{fromBlock:l(param.fromBlock),toBlock:l(param.toBlock),addresses:void 0===param.address?null:Array.isArray(param.address)?param.address:[param.address],topics:param.topics||[]}}function c(filter){const param={fromBlock:m(filter.fromBlock),toBlock:m(filter.toBlock),topics:filter.topics};return null!==filter.addresses&&(param.address=filter.addresses),param}function l(e){if(void 0===e||"latest"===e||"pending"===e)return"latest";if("earliest"===e)return(0,n.IntNumber)(0);if((0,o.isHexString)(e))return(0,o.intNumberFromHexString)(e);throw new Error(`Invalid block option: ${String(e)}`)}function m(e){return"latest"===e?e:(0,o.hexStringFromIntNumber)(e)}function f(){return Object.assign(Object.assign({},h),{error:{code:-32e3,message:"filter not found"}})}function y(){return Object.assign(Object.assign({},h),{result:[]})}t.FilterPolyfill=class{constructor(e){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,n.IntNumber)(1),this.provider=e}async newFilter(param){const filter=d(param),e=this.makeFilterId(),cursor=await this.setInitialCursorPosition(e,filter.fromBlock);return console.log(`Installing new log filter(${e}):`,filter,"initial cursor position:",cursor),this.logFilters.set(e,filter),this.setFilterTimeout(e),(0,o.hexStringFromIntNumber)(e)}async newBlockFilter(){const e=this.makeFilterId(),cursor=await this.setInitialCursorPosition(e,"latest");return console.log(`Installing new block filter (${e}) with initial cursor position:`,cursor),this.blockFilters.add(e),this.setFilterTimeout(e),(0,o.hexStringFromIntNumber)(e)}async newPendingTransactionFilter(){const e=this.makeFilterId(),cursor=await this.setInitialCursorPosition(e,"latest");return console.log(`Installing new block filter (${e}) with initial cursor position:`,cursor),this.pendingTransactionFilters.add(e),this.setFilterTimeout(e),(0,o.hexStringFromIntNumber)(e)}uninstallFilter(e){const t=(0,o.intNumberFromHexString)(e);return console.log(`Uninstalling filter (${t})`),this.deleteFilter(t),!0}getFilterChanges(e){const t=(0,o.intNumberFromHexString)(e);return this.timeouts.has(t)&&this.setFilterTimeout(t),this.logFilters.has(t)?this.getLogFilterChanges(t):this.blockFilters.has(t)?this.getBlockFilterChanges(t):this.pendingTransactionFilters.has(t)?this.getPendingTransactionFilterChanges(t):Promise.resolve(f())}async getFilterLogs(e){const t=(0,o.intNumberFromHexString)(e),filter=this.logFilters.get(t);return filter?this.sendAsyncPromise(Object.assign(Object.assign({},h),{method:"eth_getLogs",params:[c(filter)]})):f()}makeFilterId(){return(0,n.IntNumber)(++this.nextFilterId)}sendAsyncPromise(e){return new Promise((t,r)=>{this.provider.sendAsync(e,(e,n)=>e?r(e):Array.isArray(n)||null==n?r(new Error(`unexpected response received: ${JSON.stringify(n)}`)):void t(n))})}deleteFilter(e){console.log(`Deleting filter (${e})`),this.logFilters.delete(e),this.blockFilters.delete(e),this.pendingTransactionFilters.delete(e),this.cursors.delete(e),this.timeouts.delete(e)}async getLogFilterChanges(e){const filter=this.logFilters.get(e),t=this.cursors.get(e);if(!t||!filter)return f();const r=await this.getCurrentBlockHeight(),d="latest"===filter.toBlock?r:filter.toBlock;if(t>r)return y();if(t>filter.toBlock)return y();console.log(`Fetching logs from ${t} to ${d} for filter ${e}`);const l=await this.sendAsyncPromise(Object.assign(Object.assign({},h),{method:"eth_getLogs",params:[c(Object.assign(Object.assign({},filter),{fromBlock:t,toBlock:d}))]}));if(Array.isArray(l.result)){const r=l.result.map(e=>(0,o.intNumberFromHexString)(e.blockNumber||"0x0")),h=Math.max(...r);if(h&&h>t){const r=(0,n.IntNumber)(h+1);console.log(`Moving cursor position for filter (${e}) from ${t} to ${r}`),this.cursors.set(e,r)}}return l}async getBlockFilterChanges(e){const t=this.cursors.get(e);if(!t)return f();const r=await this.getCurrentBlockHeight();if(t>r)return y();console.log(`Fetching blocks from ${t} to ${r} for filter (${e})`);const d=(await Promise.all((0,o.range)(t,r+1).map(i=>this.getBlockHashByNumber((0,n.IntNumber)(i))))).filter(e=>!!e),c=(0,n.IntNumber)(t+d.length);return console.log(`Moving cursor position for filter (${e}) from ${t} to ${c}`),this.cursors.set(e,c),Object.assign(Object.assign({},h),{result:d})}async getPendingTransactionFilterChanges(e){return Promise.resolve(y())}async setInitialCursorPosition(e,t){const r=await this.getCurrentBlockHeight(),n="number"==typeof t&&t>r?t:r;return this.cursors.set(e,n),n}setFilterTimeout(e){const t=this.timeouts.get(e);t&&window.clearTimeout(t);const r=window.setTimeout(()=>{console.log(`Filter (${e}) timed out`),this.deleteFilter(e)},3e5);this.timeouts.set(e,r)}async getCurrentBlockHeight(){const{result:e}=await this.sendAsyncPromise(Object.assign(Object.assign({},h),{method:"eth_blockNumber",params:[]}));return(0,o.intNumberFromHexString)((0,o.ensureHexString)(e))}async getBlockHashByNumber(e){const t=await this.sendAsyncPromise(Object.assign(Object.assign({},h),{method:"eth_getBlockByNumber",params:[(0,o.hexStringFromIntNumber)(e),!1]}));return t.result&&"string"==typeof t.result.hash?(0,o.ensureHexString)(t.result.hash):null}},t.filterFromParam=d},1240:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONRPCMethod=void 0,function(e){e.eth_accounts="eth_accounts",e.eth_coinbase="eth_coinbase",e.net_version="net_version",e.eth_chainId="eth_chainId",e.eth_uninstallFilter="eth_uninstallFilter",e.eth_requestAccounts="eth_requestAccounts",e.eth_sign="eth_sign",e.eth_ecRecover="eth_ecRecover",e.personal_sign="personal_sign",e.personal_ecRecover="personal_ecRecover",e.eth_signTransaction="eth_signTransaction",e.eth_sendRawTransaction="eth_sendRawTransaction",e.eth_sendTransaction="eth_sendTransaction",e.eth_signTypedData_v1="eth_signTypedData_v1",e.eth_signTypedData_v2="eth_signTypedData_v2",e.eth_signTypedData_v3="eth_signTypedData_v3",e.eth_signTypedData_v4="eth_signTypedData_v4",e.eth_signTypedData="eth_signTypedData",e.cbWallet_arbitrary="walletlink_arbitrary",e.wallet_addEthereumChain="wallet_addEthereumChain",e.wallet_switchEthereumChain="wallet_switchEthereumChain",e.wallet_watchAsset="wallet_watchAsset",e.eth_subscribe="eth_subscribe",e.eth_unsubscribe="eth_unsubscribe",e.eth_newFilter="eth_newFilter",e.eth_newBlockFilter="eth_newBlockFilter",e.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",e.eth_getFilterChanges="eth_getFilterChanges",e.eth_getFilterLogs="eth_getFilterLogs"}(t.JSONRPCMethod||(t.JSONRPCMethod={}))},1241:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionManager=void 0;const n=r(574),o=r(1242),h=()=>{};t.SubscriptionManager=class{constructor(e){const t=new n({provider:e,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:r,middleware:h}=o({blockTracker:t,provider:e});this.events=r,this.subscriptionMiddleware=h}async handleRequest(e){const t={};return await this.subscriptionMiddleware(e,t,h,h),t}destroy(){this.subscriptionMiddleware.destroy()}}},1249:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletSDKUI=void 0;const n=r(1250),o=r(1272),h=r(1274);t.WalletSDKUI=class{constructor(e){this.standalone=null,this.attached=!1,this.appSrc=null,this.snackbar=new o.Snackbar({darkMode:e.darkMode}),this.linkFlow=new n.LinkFlow({darkMode:e.darkMode,version:e.version,sessionId:e.session.id,sessionSecret:e.session.secret,linkAPIUrl:e.linkAPIUrl,connected$:e.connected$,chainId$:e.chainId$,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.linkFlow.attach(t),this.snackbar.attach(t),this.attached=!0,(0,h.injectCssReset)()}setConnectDisabled(e){this.linkFlow.setConnectDisabled(e)}addEthereumChain(e){}watchAsset(e){}switchEthereumChain(e){}requestEthereumAccounts(e){this.linkFlow.open({onCancel:e.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(e){}signEthereumTransaction(e){}submitEthereumTransaction(e){}ethereumAddressFromSignedMessage(e){}showConnecting(e){let t;return t=e.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",appSrc:this.appSrc,menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:{message:"Confirm on phone",appSrc:this.appSrc,menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}setAppSrc(e){this.appSrc=e}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(e){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(e){this.standalone=e}isStandalone(){var e;return null!==(e=this.standalone)&&void 0!==e&&e}}},1253:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIB_VERSION=void 0,t.LIB_VERSION="3.6.5"},1262:function(e,t){function r(data){this.mode=o.MODE_8BIT_BYTE,this.data=data,this.parsedData=[];for(var i=0,e=this.data.length;i<e;i++){var t=[],code=this.data.charCodeAt(i);code>65536?(t[0]=240|(1835008&code)>>>18,t[1]=128|(258048&code)>>>12,t[2]=128|(4032&code)>>>6,t[3]=128|63&code):code>2048?(t[0]=224|(61440&code)>>>12,t[1]=128|(4032&code)>>>6,t[2]=128|63&code):code>128?(t[0]=192|(1984&code)>>>6,t[1]=128|63&code):t[0]=code,this.parsedData.push(t)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function n(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}r.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var i=0,t=this.parsedData.length;i<t;i++)e.put(this.parsedData[i],8)}},n.prototype={addData:function(data){var e=new r(data);this.dataList.push(e),this.dataCache=null},isDark:function(e,col){if(e<0||this.moduleCount<=e||col<0||this.moduleCount<=col)throw new Error(e+","+col);return this.modules[e][col]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++)this.modules[r][col]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,col){for(var t=-1;t<=7;t++)if(!(e+t<=-1||this.moduleCount<=e+t))for(var r=-1;r<=7;r++)col+r<=-1||this.moduleCount<=col+r||(this.modules[e+t][col+r]=0<=t&&t<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==t||6==t)||2<=t&&t<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var e=0,pattern=0,i=0;i<8;i++){this.makeImpl(!0,i);var t=R.getLostPoint(this);(0==i||e>t)&&(e=t,pattern=i)}return pattern},createMovieClip:function(e,t,r){var n=e.createEmptyMovieClip(t,r);this.make();for(var o=0;o<this.modules.length;o++)for(var h=1*o,col=0;col<this.modules[o].length;col++){var d=1*col;this.modules[o][col]&&(n.beginFill(0,100),n.moveTo(d,h),n.lineTo(d+1,h),n.lineTo(d+1,h+1),n.lineTo(d,h+1),n.endFill())}return n},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=R.getPatternPosition(this.typeNumber),i=0;i<e.length;i++)for(var t=0;t<e.length;t++){var r=e[i],col=e[t];if(null==this.modules[r][col])for(var n=-2;n<=2;n++)for(var o=-2;o<=2;o++)this.modules[r+n][col+o]=-2==n||2==n||-2==o||2==o||0==n&&0==o}},setupTypeNumber:function(e){for(var t=R.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var r=!e&&1==(t>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=r}for(i=0;i<18;i++){r=!e&&1==(t>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=r}},setupTypeInfo:function(e,t){for(var data=this.errorCorrectLevel<<3|t,r=R.getBCHTypeInfo(data),i=0;i<15;i++){var n=!e&&1==(r>>i&1);i<6?this.modules[i][8]=n:i<8?this.modules[i+1][8]=n:this.modules[this.moduleCount-15+i][8]=n}for(i=0;i<15;i++){n=!e&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=n:i<9?this.modules[8][15-i-1+1]=n:this.modules[8][15-i-1]=n}this.modules[this.moduleCount-8][8]=!e},mapData:function(data,e){for(var t=-1,r=this.moduleCount-1,n=7,o=0,col=this.moduleCount-1;col>0;col-=2)for(6==col&&col--;;){for(var h=0;h<2;h++)if(null==this.modules[r][col-h]){var d=!1;o<data.length&&(d=1==(data[o]>>>n&1)),R.getMask(e,r,col-h)&&(d=!d),this.modules[r][col-h]=d,-1==--n&&(o++,n=7)}if((r+=t)<0||this.moduleCount<=r){r-=t,t=-t;break}}}},n.PAD0=236,n.PAD1=17,n.createData=function(e,t,r){for(var o=I.getRSBlocks(e,t),h=new M,i=0;i<r.length;i++){var data=r[i];h.put(data.mode,4),h.put(data.getLength(),R.getLengthInBits(data.mode,e)),data.write(h)}var d=0;for(i=0;i<o.length;i++)d+=o[i].dataCount;if(h.getLengthInBits()>8*d)throw new Error("code length overflow. ("+h.getLengthInBits()+">"+8*d+")");for(h.getLengthInBits()+4<=8*d&&h.put(0,4);h.getLengthInBits()%8!=0;)h.putBit(!1);for(;!(h.getLengthInBits()>=8*d||(h.put(n.PAD0,8),h.getLengthInBits()>=8*d));)h.put(n.PAD1,8);return n.createBytes(h,o)},n.createBytes=function(e,t){for(var r=0,n=0,o=0,h=new Array(t.length),d=new Array(t.length),c=0;c<t.length;c++){var l=t[c].dataCount,m=t[c].totalCount-l;n=Math.max(n,l),o=Math.max(o,m),h[c]=new Array(l);for(var i=0;i<h[c].length;i++)h[c][i]=255&e.buffer[i+r];r+=l;var f=R.getErrorCorrectPolynomial(m),y=new A(h[c],f.getLength()-1).mod(f);d[c]=new Array(f.getLength()-1);for(i=0;i<d[c].length;i++){var E=i+y.getLength()-d[c].length;d[c][i]=E>=0?y.get(E):0}}var _=0;for(i=0;i<t.length;i++)_+=t[i].totalCount;var data=new Array(_),w=0;for(i=0;i<n;i++)for(c=0;c<t.length;c++)i<h[c].length&&(data[w++]=h[c][i]);for(i=0;i<o;i++)for(c=0;c<t.length;c++)i<d[c].length&&(data[w++]=d[c][i]);return data};for(var o={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},h=1,d=0,c=3,l=2,m=0,f=1,y=2,E=3,_=4,w=5,v=6,S=7,R={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(data){for(var e=data<<10;R.getBCHDigit(e)-R.getBCHDigit(R.G15)>=0;)e^=R.G15<<R.getBCHDigit(e)-R.getBCHDigit(R.G15);return(data<<10|e)^R.G15_MASK},getBCHTypeNumber:function(data){for(var e=data<<12;R.getBCHDigit(e)-R.getBCHDigit(R.G18)>=0;)e^=R.G18<<R.getBCHDigit(e)-R.getBCHDigit(R.G18);return data<<12|e},getBCHDigit:function(data){for(var e=0;0!=data;)e++,data>>>=1;return e},getPatternPosition:function(e){return R.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,i,t){switch(e){case m:return(i+t)%2==0;case f:return i%2==0;case y:return t%3==0;case E:return(i+t)%3==0;case _:return(Math.floor(i/2)+Math.floor(t/3))%2==0;case w:return i*t%2+i*t%3==0;case v:return(i*t%2+i*t%3)%2==0;case S:return(i*t%3+(i+t)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var a=new A([1],0),i=0;i<e;i++)a=a.multiply(new A([1,C.gexp(i)],0));return a},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:case o.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var col=0;col<t;col++){for(var o=0,h=e.isDark(n,col),d=-1;d<=1;d++)if(!(n+d<0||t<=n+d))for(var c=-1;c<=1;c++)col+c<0||t<=col+c||0==d&&0==c||h==e.isDark(n+d,col+c)&&o++;o>5&&(r+=3+o-5)}for(n=0;n<t-1;n++)for(col=0;col<t-1;col++){var l=0;e.isDark(n,col)&&l++,e.isDark(n+1,col)&&l++,e.isDark(n,col+1)&&l++,e.isDark(n+1,col+1)&&l++,0!=l&&4!=l||(r+=3)}for(n=0;n<t;n++)for(col=0;col<t-6;col++)e.isDark(n,col)&&!e.isDark(n,col+1)&&e.isDark(n,col+2)&&e.isDark(n,col+3)&&e.isDark(n,col+4)&&!e.isDark(n,col+5)&&e.isDark(n,col+6)&&(r+=40);for(col=0;col<t;col++)for(n=0;n<t-6;n++)e.isDark(n,col)&&!e.isDark(n+1,col)&&e.isDark(n+2,col)&&e.isDark(n+3,col)&&e.isDark(n+4,col)&&!e.isDark(n+5,col)&&e.isDark(n+6,col)&&(r+=40);var m=0;for(col=0;col<t;col++)for(n=0;n<t;n++)e.isDark(n,col)&&m++;return r+=10*(Math.abs(100*m/t/t-50)/5)}},C={glog:function(e){if(e<1)throw new Error("glog("+e+")");return C.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return C.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;i<8;i++)C.EXP_TABLE[i]=1<<i;for(i=8;i<256;i++)C.EXP_TABLE[i]=C.EXP_TABLE[i-4]^C.EXP_TABLE[i-5]^C.EXP_TABLE[i-6]^C.EXP_TABLE[i-8];for(i=0;i<255;i++)C.LOG_TABLE[C.EXP_TABLE[i]]=i;function A(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=new Array(e.length-r+t);for(var i=0;i<e.length-r;i++)this.num[i]=e[i+r]}function I(e,t){this.totalCount=e,this.dataCount=t}function M(){this.buffer=[],this.length=0}A.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var r=0;r<e.getLength();r++)t[i+r]^=C.gexp(C.glog(this.get(i))+C.glog(e.get(r)));return new A(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=C.glog(this.get(0))-C.glog(e.get(0)),r=new Array(this.getLength()),i=0;i<this.getLength();i++)r[i]=this.get(i);for(i=0;i<e.getLength();i++)r[i]^=C.gexp(C.glog(e.get(i))+t);return new A(r,0).mod(e)}},I.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],I.getRSBlocks=function(e,t){var r=I.getRsBlockTable(e,t);if(null==r)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,o=[],i=0;i<n;i++)for(var h=r[3*i+0],d=r[3*i+1],c=r[3*i+2],l=0;l<h;l++)o.push(new I(d,c));return o},I.getRsBlockTable=function(e,t){switch(t){case h:return I.RS_BLOCK_TABLE[4*(e-1)+0];case d:return I.RS_BLOCK_TABLE[4*(e-1)+1];case c:return I.RS_BLOCK_TABLE[4*(e-1)+2];case l:return I.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},M.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var k=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function P(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},"string"==typeof e&&(e={content:e}),e)for(var i in e)this.options[i]=e[i];if("string"!=typeof this.options.content)throw new Error("Expected 'content' as string!");if(0===this.options.content.length)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0&&this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");var content=this.options.content,t=function(content,e){for(var t=function(content){var e=encodeURI(content).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=content?3:0)}(content),r=1,n=0,i=0,o=k.length;i<=o;i++){var table=k[i];if(!table)throw new Error("Content too long: expected "+n+" but got "+t);switch(e){case"L":n=table[0];break;case"M":n=table[1];break;case"Q":n=table[2];break;case"H":n=table[3];break;default:throw new Error("Unknwon error correction level: "+e)}if(t<=n)break;r++}if(r>k.length)throw new Error("Content too long");return r}(content,this.options.ecl),r=function(e){switch(e){case"L":return h;case"M":return d;case"Q":return c;case"H":return l;default:throw new Error("Unknwon error correction level: "+e)}}(this.options.ecl);this.qrcode=new n(t,r),this.qrcode.addData(content),this.qrcode.make()}P.prototype.svg=function(e){var t=this.options||{},r=this.qrcode.modules;void 0===e&&(e={container:t.container||"svg"});for(var n=void 0===t.pretty||!!t.pretty,o=n?"  ":"",h=n?"\r\n":"",d=t.width,c=t.height,l=r.length,m=d/(l+2*t.padding),f=c/(l+2*t.padding),y=void 0!==t.join&&!!t.join,E=void 0!==t.swap&&!!t.swap,_=void 0===t.xmlDeclaration||!!t.xmlDeclaration,w=void 0!==t.predefined&&!!t.predefined,defs=w?o+'<defs><path id="qrmodule" d="M0 0 h'+f+" v"+m+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+h:"",v=o+'<rect x="0" y="0" width="'+d+'" height="'+c+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+h,S="",R="",C=0;C<l;C++)for(var A=0;A<l;A++){if(r[A][C]){var I=A*m+t.padding*m,M=C*f+t.padding*f;if(E){var k=I;I=M,M=k}if(y){var P=m+I,N=f+M;I=Number.isInteger(I)?Number(I):I.toFixed(2),M=Number.isInteger(M)?Number(M):M.toFixed(2),P=Number.isInteger(P)?Number(P):P.toFixed(2),R+="M"+I+","+M+" V"+(N=Number.isInteger(N)?Number(N):N.toFixed(2))+" H"+P+" V"+M+" H"+I+" Z "}else S+=w?o+'<use x="'+I.toString()+'" y="'+M.toString()+'" href="#qrmodule" />'+h:o+'<rect x="'+I.toString()+'" y="'+M.toString()+'" width="'+m+'" height="'+f+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+h}}y&&(S=o+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+R+'" />');let x="";if(void 0!==this.options.image&&this.options.image.svg){const e=d*this.options.image.width/100,t=c*this.options.image.height/100;x+=`<svg x="${d/2-e/2}" y="${c/2-t/2}" width="${e}" height="${t}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,x+=this.options.image.svg+h,x+="</svg>"}var svg="";switch(e.container){case"svg":_&&(svg+='<?xml version="1.0" standalone="yes"?>'+h),svg+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+d+'" height="'+c+'">'+h,svg+=defs+v+S,svg+=x,svg+="</svg>";break;case"svg-viewbox":_&&(svg+='<?xml version="1.0" standalone="yes"?>'+h),svg+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+d+" "+c+'">'+h,svg+=defs+v+S,svg+=x,svg+="</svg>";break;case"g":svg+='<g width="'+d+'" height="'+c+'">'+h,svg+=defs+v+S,svg+=x,svg+="</g>";break;default:svg+=(defs+v+S+x).replace(/^\s+/,"")}return svg},e.exports=P},1274:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.injectCssReset=void 0;const o=n(r(1275));t.injectCssReset=function(){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(o.default)),document.documentElement.appendChild(e)}},1275:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}'},1276:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),h=this&&this.__decorate||function(e,t,r,desc){var n,o=arguments.length,h=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(h=(o<3?n(h):o>3?n(t,r,h):n(t,r))||h);return o>3&&h&&Object.defineProperty(t,r,h),h},d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletSDKRelay=void 0;const l=c(r(1277)),m=r(415),f=r(288),y=r(426),E=r(418),_=r(1278),w=r(1282),v=r(287),S=r(138),R=d(r(1283)),C=r(419),A=r(592),I=r(696),M=r(1284),k=r(1285),P=r(1286),N=r(1287);class x extends A.WalletSDKRelayAbstract{constructor(e){var t;super(),this.accountsCallback=null,this.chainCallback=null,this.dappDefaultChainSubject=new f.BehaviorSubject(1),this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.subscriptions=new f.Subscription,this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.options=e;const{session:r,ui:n,connection:o}=this.subscribe();if(this._session=r,this.connection=o,this.relayEventManager=e.relayEventManager,e.diagnosticLogger&&e.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");e.eventListener?this.diagnostic={log:e.eventListener.onEvent}:this.diagnostic=e.diagnosticLogger,this._reloadOnDisconnect=null===(t=e.reloadOnDisconnect)||void 0===t||t,this.ui=n}subscribe(){this.subscriptions.add(this.dappDefaultChainSubject.subscribe(e=>{this.dappDefaultChain!==e&&(this.dappDefaultChain=e)}));const e=C.Session.load(this.storage)||new C.Session(this.storage).save(),t=new _.WalletSDKConnection(e.id,e.key,this.linkAPIUrl,this.diagnostic);this.subscriptions.add(t.sessionConfig$.subscribe({next:e=>{this.onSessionConfigChanged(e)},error:()=>{var e;null===(e=this.diagnostic)||void 0===e||e.log(E.EVENTS.GENERAL_ERROR,{message:"error while invoking session config callback"})}})),this.subscriptions.add(t.incomingEvent$.pipe((0,y.filter)(e=>"Web3Response"===e.event)).subscribe({next:this.handleIncomingEvent})),this.subscriptions.add(t.linked$.pipe((0,y.skip)(1),(0,y.tap)(e=>{var t;this.isLinked=e;const r=this.storage.getItem(A.LOCAL_STORAGE_ADDRESSES_KEY);if(e&&(this.session.linked=e),this.isUnlinkedErrorState=!1,r){const n=r.split(" "),o="true"===this.storage.getItem("IsStandaloneSigning");if(""!==n[0]&&!e&&this.session.linked&&!o){this.isUnlinkedErrorState=!0;const e=this.getSessionIdHash();null===(t=this.diagnostic)||void 0===t||t.log(E.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:e})}}})).subscribe()),this.subscriptions.add(t.sessionConfig$.pipe((0,y.filter)(e=>!!e.metadata&&"1"===e.metadata.__destroyed)).subscribe(()=>{var e;const r=t.isDestroyed;return null===(e=this.diagnostic)||void 0===e||e.log(E.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:r,sessionIdHash:this.getSessionIdHash()}),this.resetAndReload()})),this.subscriptions.add(t.sessionConfig$.pipe((0,y.filter)(e=>e.metadata&&void 0!==e.metadata.WalletUsername)).pipe((0,y.mergeMap)(t=>R.decrypt(t.metadata.WalletUsername,e.secret))).subscribe({next:e=>{this.storage.setItem(A.WALLET_USER_NAME_KEY,e)},error:()=>{var e;null===(e=this.diagnostic)||void 0===e||e.log(E.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"username"})}})),this.subscriptions.add(t.sessionConfig$.pipe((0,y.filter)(e=>e.metadata&&void 0!==e.metadata.AppVersion)).pipe((0,y.mergeMap)(t=>R.decrypt(t.metadata.AppVersion,e.secret))).subscribe({next:e=>{this.storage.setItem(A.APP_VERSION_KEY,e)},error:()=>{var e;null===(e=this.diagnostic)||void 0===e||e.log(E.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appversion"})}})),this.subscriptions.add(t.sessionConfig$.pipe((0,y.filter)(e=>e.metadata&&void 0!==e.metadata.ChainId&&void 0!==e.metadata.JsonRpcUrl)).pipe((0,y.mergeMap)(t=>(0,f.zip)(R.decrypt(t.metadata.ChainId,e.secret),R.decrypt(t.metadata.JsonRpcUrl,e.secret)))).pipe((0,y.distinctUntilChanged)()).subscribe({next:([e,t])=>{this.chainCallback&&this.chainCallback(e,t)},error:()=>{var e;null===(e=this.diagnostic)||void 0===e||e.log(E.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}})),this.subscriptions.add(t.sessionConfig$.pipe((0,y.filter)(e=>e.metadata&&void 0!==e.metadata.EthereumAddress)).pipe((0,y.mergeMap)(t=>R.decrypt(t.metadata.EthereumAddress,e.secret))).subscribe({next:e=>{this.accountsCallback&&this.accountsCallback([e]),x.accountRequestCallbackIds.size>0&&(Array.from(x.accountRequestCallbackIds.values()).forEach(t=>{const r=(0,N.Web3ResponseMessage)({id:t,response:(0,P.RequestEthereumAccountsResponse)([e])});this.invokeCallback(Object.assign(Object.assign({},r),{id:t}))}),x.accountRequestCallbackIds.clear())},error:()=>{var e;null===(e=this.diagnostic)||void 0===e||e.log(E.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}})),this.subscriptions.add(t.sessionConfig$.pipe((0,y.filter)(e=>e.metadata&&void 0!==e.metadata.AppSrc)).pipe((0,y.mergeMap)(t=>R.decrypt(t.metadata.AppSrc,e.secret))).subscribe({next:e=>{this.ui.setAppSrc(e)},error:()=>{var e;null===(e=this.diagnostic)||void 0===e||e.log(E.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appSrc"})}}));const r=this.options.uiConstructor({linkAPIUrl:this.options.linkAPIUrl,version:this.options.version,darkMode:this.options.darkMode,session:e,connected$:t.connected$,chainId$:this.dappDefaultChainSubject});return t.connect(),{session:e,ui:r,connection:t}}attachUI(){this.ui.attach()}resetAndReload(){this.connection.setSessionMetadata("__destroyed","1").pipe((0,y.timeout)(1e3),(0,y.catchError)(e=>(0,f.of)(null))).subscribe(e=>{var t,r,n;const o=this.ui.isStandalone();try{this.subscriptions.unsubscribe()}catch(e){null===(t=this.diagnostic)||void 0===t||t.log(E.EVENTS.GENERAL_ERROR,{message:"Had error unsubscribing"})}null===(r=this.diagnostic)||void 0===r||r.log(E.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const h=C.Session.load(this.storage);if((null==h?void 0:h.id)===this._session.id?this.storage.clear():h&&(null===(n=this.diagnostic)||void 0===n||n.log(E.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:C.Session.hash(h.id)})),this._reloadOnDisconnect)return void this.ui.reloadUI();this.accountsCallback&&this.accountsCallback([],!0),this.subscriptions=new f.Subscription;const{session:d,ui:c,connection:l}=this.subscribe();this._session=d,this.connection=l,this.ui=c,o&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.attachUI()},e=>{var t;null===(t=this.diagnostic)||void 0===t||t.log(E.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${e}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(e,t){this.appName=e,this.appLogoUrl=t}getStorageItem(e){return this.storage.getItem(e)}get session(){return this._session}setStorageItem(e,t){this.storage.setItem(e,t)}signEthereumMessage(e,address,t,r){return this.sendRequest({method:I.Web3Method.signEthereumMessage,params:{message:(0,S.hexStringFromBuffer)(e,!0),address:address,addPrefix:t,typedDataJson:r||null}})}ethereumAddressFromSignedMessage(e,t,r){return this.sendRequest({method:I.Web3Method.ethereumAddressFromSignedMessage,params:{message:(0,S.hexStringFromBuffer)(e,!0),signature:(0,S.hexStringFromBuffer)(t,!0),addPrefix:r}})}signEthereumTransaction(e){return this.sendRequest({method:I.Web3Method.signEthereumTransaction,params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,S.bigIntStringFromBN)(e.weiValue),data:(0,S.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,S.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,S.bigIntStringFromBN)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,S.bigIntStringFromBN)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,S.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:I.Web3Method.signEthereumTransaction,params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,S.bigIntStringFromBN)(e.weiValue),data:(0,S.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,S.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,S.bigIntStringFromBN)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,S.bigIntStringFromBN)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,S.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,t){return this.sendRequest({method:I.Web3Method.submitEthereumTransaction,params:{signedTransaction:(0,S.hexStringFromBuffer)(e,!0),chainId:t}})}scanQRCode(e){return this.sendRequest({method:I.Web3Method.scanQRCode,params:{regExp:e}})}getQRCodeUrl(){return(0,S.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(data,e){return this.sendRequest({method:I.Web3Method.generic,params:{action:e,data:data}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let t=null;const r=(0,S.randomBytesHex)(8),n=n=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,n),null==t||t()};return{promise:new Promise((o,h)=>{this.ui.isStandalone()||(t=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:n,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(r,e=>{if(null==t||t(),e.errorMessage)return h(new Error(e.errorMessage));o(e)}),this.ui.isStandalone()?this.sendRequestStandalone(r,e):this.publishWeb3RequestEvent(r,e)}),cancel:n}}setConnectDisabled(e){this.ui.setConnectDisabled(e)}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChainSubject.next(e)}publishWeb3RequestEvent(e,t){var r;const n=(0,k.Web3RequestMessage)({id:e,request:t}),o=C.Session.load(this.storage);null===(r=this.diagnostic)||void 0===r||r.log(E.EVENTS.WEB3_REQUEST,{eventId:n.id,method:`relay::${n.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:o?C.Session.hash(o.id):"",isSessionMismatched:((null==o?void 0:o.id)!==this._session.id).toString()}),this.subscriptions.add(this.publishEvent("Web3Request",n,!0).subscribe({next:e=>{var t;null===(t=this.diagnostic)||void 0===t||t.log(E.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:n.id,method:`relay::${n.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:o?C.Session.hash(o.id):"",isSessionMismatched:((null==o?void 0:o.id)!==this._session.id).toString()})},error:e=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:n.id,response:{method:n.request.method,errorMessage:e.message}}))}}))}publishWeb3RequestCanceledEvent(e){const t=(0,M.Web3RequestCanceledMessage)(e);this.subscriptions.add(this.publishEvent("Web3RequestCanceled",t,!1).subscribe())}publishEvent(e,t,r){const n=this.session.secret;return new f.Observable(e=>{R.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{origin:location.origin})),n).then(t=>{e.next(t),e.complete()})}).pipe((0,y.mergeMap)(t=>this.connection.publishEvent(e,t,r)))}handleIncomingEvent(e){try{this.subscriptions.add((0,f.from)(R.decrypt(e.data,this.session.secret)).pipe((0,y.map)(e=>JSON.parse(e))).subscribe({next:e=>{const t=(0,N.isWeb3ResponseMessage)(e)?e:null;t&&this.handleWeb3ResponseMessage(t)},error:()=>{var e;null===(e=this.diagnostic)||void 0===e||e.log(E.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}))}catch(e){return}}handleWeb3ResponseMessage(e){var t;const{response:r}=e;if(null===(t=this.diagnostic)||void 0===t||t.log(E.EVENTS.WEB3_RESPONSE,{eventId:e.id,method:`relay::${r.method}`,sessionIdHash:this.getSessionIdHash()}),(0,P.isRequestEthereumAccountsResponse)(r))return x.accountRequestCallbackIds.forEach(t=>this.invokeCallback(Object.assign(Object.assign({},e),{id:t}))),void x.accountRequestCallbackIds.clear();this.invokeCallback(e)}handleErrorResponse(e,t,r,n){this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:e,response:(0,P.ErrorResponse)(t,(null!=r?r:w.WalletUIError.UserRejectedRequest).message,n)}))}invokeCallback(e){const t=this.relayEventManager.callbacks.get(e.id);t&&(t(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){const e={method:I.Web3Method.requestEthereumAccounts,params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},t=(0,S.randomBytesHex)(8),r=r=>{this.publishWeb3RequestCanceledEvent(t),this.handleErrorResponse(t,e.method,r)};return{promise:new Promise((n,o)=>{var h;this.relayEventManager.callbacks.set(t,e=>{if(this.ui.hideRequestEthereumAccounts(),e.errorMessage)return o(new Error(e.errorMessage));n(e)});const d=(null===(h=null===window||void 0===window?void 0:window.navigator)||void 0===h?void 0:h.userAgent)||null;if(d&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(d)){let e;try{e=(0,S.isInIFrame)()&&window.top?window.top.location:window.location}catch(t){e=window.location}e.href=`https://www.coinbase.com/connect-dapp?uri=${encodeURIComponent(e.href)}`}else{if(this.ui.inlineAccountsResponse()){const e=e=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:t,response:(0,P.RequestEthereumAccountsResponse)(e)}))};this.ui.requestEthereumAccounts({onCancel:r,onAccounts:e})}else{const e=m.ethErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>r(e)})}x.accountRequestCallbackIds.add(t),this.ui.inlineAccountsResponse()||this.ui.isStandalone()||this.publishWeb3RequestEvent(t,e)}}),cancel:r}}selectProvider(e){const t={method:I.Web3Method.selectProvider,params:{providerOptions:e}},r=(0,S.randomBytesHex)(8);return{cancel:e=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,t.method,e)},promise:new Promise((t,n)=>{this.relayEventManager.callbacks.set(r,e=>{if(e.errorMessage)return n(new Error(e.errorMessage));t(e)});this.ui.selectProvider&&this.ui.selectProvider({onApprove:e=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:r,response:(0,P.SelectProviderResponse)(e)}))},onCancel:e=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:r,response:(0,P.SelectProviderResponse)(v.ProviderType.Unselected)}))},providerOptions:e})})}}watchAsset(e,address,symbol,t,image,r){const n={method:I.Web3Method.watchAsset,params:{type:e,options:{address:address,symbol:symbol,decimals:t,image:image},chainId:r}};let o=null;const h=(0,S.randomBytesHex)(8),d=e=>{this.publishWeb3RequestCanceledEvent(h),this.handleErrorResponse(h,n.method,e),null==o||o()};return this.ui.inlineWatchAsset()||(o=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload})),{cancel:d,promise:new Promise((d,c)=>{this.relayEventManager.callbacks.set(h,e=>{if(null==o||o(),e.errorMessage)return c(new Error(e.errorMessage));d(e)});const l=e=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:h,response:(0,P.WatchAssetReponse)(!1)}))},m=()=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:h,response:(0,P.WatchAssetReponse)(!0)}))};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:m,onCancel:l,type:e,address:address,symbol:symbol,decimals:t,image:image,chainId:r}),this.ui.inlineWatchAsset()||this.ui.isStandalone()||this.publishWeb3RequestEvent(h,n)})}}addEthereumChain(e,t,r,n,o,h){const d={method:I.Web3Method.addEthereumChain,params:{chainId:e,rpcUrls:t,blockExplorerUrls:n,chainName:o,iconUrls:r,nativeCurrency:h}};let c=null;const l=(0,S.randomBytesHex)(8),m=e=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,d.method,e),null==c||c()};return this.ui.inlineAddEthereumChain(e)||(c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:m,onResetConnection:this.resetAndReload})),{promise:new Promise((t,r)=>{this.relayEventManager.callbacks.set(l,e=>{if(null==c||c(),e.errorMessage)return r(new Error(e.errorMessage));t(e)});const n=e=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:l,response:(0,P.AddEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},o=e=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:l,response:(0,P.AddEthereumChainResponse)({isApproved:!0,rpcUrl:e})}))};this.ui.inlineAddEthereumChain(e)&&this.ui.addEthereumChain({onCancel:n,onApprove:o,chainId:d.params.chainId,rpcUrls:d.params.rpcUrls,blockExplorerUrls:d.params.blockExplorerUrls,chainName:d.params.chainName,iconUrls:d.params.iconUrls,nativeCurrency:d.params.nativeCurrency}),this.ui.inlineAddEthereumChain(e)||this.ui.isStandalone()||this.publishWeb3RequestEvent(l,d)}),cancel:m}}switchEthereumChain(e,address){const t={method:I.Web3Method.switchEthereumChain,params:Object.assign({chainId:e},{address:address})},r=(0,S.randomBytesHex)(8);return{promise:new Promise((e,n)=>{this.relayEventManager.callbacks.set(r,t=>t.errorMessage&&t.errorCode?n(m.ethErrors.provider.custom({code:t.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):t.errorMessage?n(new Error(t.errorMessage)):void e(t));this.ui.switchEthereumChain({onCancel:e=>{if("number"==typeof e){const t=e;this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:r,response:(0,P.ErrorResponse)(I.Web3Method.switchEthereumChain,w.WalletUIError.SwitchEthereumChainUnsupportedChainId.message,t)}))}else e instanceof w.WalletUIError?this.handleErrorResponse(r,I.Web3Method.switchEthereumChain,e,e.errorCode):this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:r,response:(0,P.SwitchEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},onApprove:e=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:r,response:(0,P.SwitchEthereumChainResponse)({isApproved:!0,rpcUrl:e})}))},chainId:t.params.chainId,address:t.params.address}),this.ui.inlineSwitchEthereumChain()||this.ui.isStandalone()||this.publishWeb3RequestEvent(r,t)}),cancel:e=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,t.method,e)}}}inlineAddEthereumChain(e){return this.ui.inlineAddEthereumChain(e)}getSessionIdHash(){return C.Session.hash(this._session.id)}sendRequestStandalone(e,t){const r=r=>{this.handleErrorResponse(e,t.method,r)},n=t=>{this.handleWeb3ResponseMessage((0,N.Web3ResponseMessage)({id:e,response:t}))};switch(t.method){case I.Web3Method.signEthereumMessage:this.ui.signEthereumMessage({request:t,onSuccess:n,onCancel:r});break;case I.Web3Method.signEthereumTransaction:this.ui.signEthereumTransaction({request:t,onSuccess:n,onCancel:r});break;case I.Web3Method.submitEthereumTransaction:this.ui.submitEthereumTransaction({request:t,onSuccess:n,onCancel:r});break;case I.Web3Method.ethereumAddressFromSignedMessage:this.ui.ethereumAddressFromSignedMessage({request:t,onSuccess:n});break;default:r()}}onSessionConfigChanged(e){}}x.accountRequestCallbackIds=new Set,h([l.default],x.prototype,"resetAndReload",null),h([l.default],x.prototype,"handleIncomingEvent",null),t.WalletSDKRelay=x},1282:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletUIError=void 0;class n extends Error{constructor(e,t){super(e),this.message=e,this.errorCode=t}}t.WalletUIError=n,n.UserRejectedRequest=new n("User rejected request"),n.SwitchEthereumChainUnsupportedChainId=new n("Unsupported chainId",4902)},1283:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;const n=r(138);t.encrypt=async function(e,t){if(64!==t.length)throw Error("secret must be 256 bits");const r=crypto.getRandomValues(new Uint8Array(12)),o=await crypto.subtle.importKey("raw",(0,n.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),h=new TextEncoder,d=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},o,h.encode(e)),c=d.slice(d.byteLength-16),l=d.slice(0,d.byteLength-16),m=new Uint8Array(c),f=new Uint8Array(l),y=new Uint8Array([...r,...m,...f]);return(0,n.uint8ArrayToHex)(y)},t.decrypt=function(e,t){if(64!==t.length)throw Error("secret must be 256 bits");return new Promise((r,o)=>{!async function(){const h=await crypto.subtle.importKey("raw",(0,n.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),d=(0,n.hexStringToUint8Array)(e),c=d.slice(0,12),l=d.slice(12,28),m=d.slice(28),f=new Uint8Array([...m,...l]),y={name:"AES-GCM",iv:new Uint8Array(c)};try{const e=await window.crypto.subtle.decrypt(y,h,f),t=new TextDecoder;r(t.decode(e))}catch(e){o(e)}}()})}},1284:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3RequestCanceledMessage=void 0;const n=r(427);t.Web3RequestCanceledMessage=function(e){return{type:n.RelayMessageType.WEB3_REQUEST_CANCELED,id:e}}},1285:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3RequestMessage=void 0;const n=r(427);t.Web3RequestMessage=function(e){return Object.assign({type:n.RelayMessageType.WEB3_REQUEST},e)}},1286:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumAddressFromSignedMessageResponse=t.SubmitEthereumTransactionResponse=t.SignEthereumTransactionResponse=t.SignEthereumMessageResponse=t.isRequestEthereumAccountsResponse=t.SelectProviderResponse=t.WatchAssetReponse=t.RequestEthereumAccountsResponse=t.SwitchEthereumChainResponse=t.AddEthereumChainResponse=t.ErrorResponse=void 0;const n=r(696);t.ErrorResponse=function(e,t,r){return{method:e,errorMessage:t,errorCode:r}},t.AddEthereumChainResponse=function(e){return{method:n.Web3Method.addEthereumChain,result:e}},t.SwitchEthereumChainResponse=function(e){return{method:n.Web3Method.switchEthereumChain,result:e}},t.RequestEthereumAccountsResponse=function(e){return{method:n.Web3Method.requestEthereumAccounts,result:e}},t.WatchAssetReponse=function(e){return{method:n.Web3Method.watchAsset,result:e}},t.SelectProviderResponse=function(e){return{method:n.Web3Method.selectProvider,result:e}},t.isRequestEthereumAccountsResponse=function(e){return e&&e.method===n.Web3Method.requestEthereumAccounts},t.SignEthereumMessageResponse=function(e){return{method:n.Web3Method.signEthereumMessage,result:e}},t.SignEthereumTransactionResponse=function(e){return{method:n.Web3Method.signEthereumTransaction,result:e}},t.SubmitEthereumTransactionResponse=function(e){return{method:n.Web3Method.submitEthereumTransaction,result:e}},t.EthereumAddressFromSignedMessageResponse=function(address){return{method:n.Web3Method.ethereumAddressFromSignedMessage,result:address}}},1287:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWeb3ResponseMessage=t.Web3ResponseMessage=void 0;const n=r(427);t.Web3ResponseMessage=function(e){return Object.assign({type:n.RelayMessageType.WEB3_RESPONSE},e)},t.isWeb3ResponseMessage=function(e){return e&&e.type===n.RelayMessageType.WEB3_RESPONSE}},1288:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletSDKRelayEventManager=void 0;const n=r(138);t.WalletSDKRelayEventManager=class{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,t=(0,n.prepend0x)(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}},138:function(e,t,r){"use strict";(function(e){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isInIFrame=t.createQrUrl=t.getFavicon=t.range=t.isBigNumber=t.ensureParsedJSONObject=t.ensureBN=t.ensureRegExpString=t.ensureIntNumber=t.ensureBuffer=t.ensureAddressString=t.ensureEvenLengthHexString=t.ensureHexString=t.isHexString=t.prepend0x=t.strip0x=t.has0xPrefix=t.hexStringFromIntNumber=t.intNumberFromHexString=t.bigIntStringFromBN=t.hexStringFromBuffer=t.hexStringToUint8Array=t.uint8ArrayToHex=t.randomBytesHex=void 0;const o=n(r(286)),h=r(1214),d=r(287),c=/^[0-9]*$/,l=/^[a-f0-9]*$/;function m(e){return[...e].map(b=>b.toString(16).padStart(2,"0")).join("")}function f(e){return e.startsWith("0x")||e.startsWith("0X")}function y(e){return f(e)?e.slice(2):e}function E(e){return f(e)?"0x"+e.slice(2):"0x"+e}function _(e){if("string"!=typeof e)return!1;const s=y(e).toLowerCase();return l.test(s)}function w(e,t=!1){if("string"==typeof e){const s=y(e).toLowerCase();if(l.test(s))return(0,d.HexString)(t?"0x"+s:s)}throw new Error(`"${String(e)}" is not a hexadecimal string`)}function v(e,t=!1){let r=w(e,!1);return r.length%2==1&&(r=(0,d.HexString)("0"+r)),t?(0,d.HexString)("0x"+r):r}function S(e){if("number"==typeof e&&Number.isInteger(e))return(0,d.IntNumber)(e);if("string"==typeof e){if(c.test(e))return(0,d.IntNumber)(Number(e));if(_(e))return(0,d.IntNumber)(new o.default(v(e,!1),16).toNumber())}throw new Error(`Not an integer: ${String(e)}`)}function R(e){if(null==e||"function"!=typeof e.constructor)return!1;const{constructor:t}=e;return"function"==typeof t.config&&"number"==typeof t.EUCLID}t.randomBytesHex=function(e){return m(crypto.getRandomValues(new Uint8Array(e)))},t.uint8ArrayToHex=m,t.hexStringToUint8Array=function(e){return new Uint8Array(e.match(/.{1,2}/g).map(e=>parseInt(e,16)))},t.hexStringFromBuffer=function(e,t=!1){const r=e.toString("hex");return(0,d.HexString)(t?"0x"+r:r)},t.bigIntStringFromBN=function(e){return(0,d.BigIntString)(e.toString(10))},t.intNumberFromHexString=function(e){return(0,d.IntNumber)(new o.default(v(e,!1),16).toNumber())},t.hexStringFromIntNumber=function(e){return(0,d.HexString)("0x"+new o.default(e).toString(16))},t.has0xPrefix=f,t.strip0x=y,t.prepend0x=E,t.isHexString=_,t.ensureHexString=w,t.ensureEvenLengthHexString=v,t.ensureAddressString=function(e){if("string"==typeof e){const s=y(e).toLowerCase();if(_(s)&&40===s.length)return(0,d.AddressString)(E(s))}throw new Error(`Invalid Ethereum address: ${String(e)}`)},t.ensureBuffer=function(t){if(e.isBuffer(t))return t;if("string"==typeof t){if(_(t)){const s=v(t,!1);return e.from(s,"hex")}return e.from(t,"utf8")}throw new Error(`Not binary data: ${String(t)}`)},t.ensureIntNumber=S,t.ensureRegExpString=function(e){if(e instanceof RegExp)return(0,d.RegExpString)(e.toString());throw new Error(`Not a RegExp: ${String(e)}`)},t.ensureBN=function(e){if(null!==e&&(o.default.isBN(e)||R(e)))return new o.default(e.toString(10),10);if("number"==typeof e)return new o.default(S(e));if("string"==typeof e){if(c.test(e))return new o.default(e,10);if(_(e))return new o.default(v(e,!1),16)}throw new Error(`Not an integer: ${String(e)}`)},t.ensureParsedJSONObject=function(e){if("string"==typeof e)return JSON.parse(e);if("object"==typeof e)return e;throw new Error(`Not a JSON string or an object: ${String(e)}`)},t.isBigNumber=R,t.range=function(e,t){return Array.from({length:t-e},(t,i)=>e+i)},t.getFavicon=function(){const e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:r}=document.location,n=e?e.getAttribute("href"):null;return!n||n.startsWith("javascript:")?null:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("data:")?n:n.startsWith("//")?t+n:`${t}//${r}${n}`},t.createQrUrl=function(e,t,r,n,o,d){const c=n?"parent-id":"id";return`${r}/#/link?${(0,h.stringify)({[c]:e,secret:t,server:r,v:o,chainId:d})}`},t.isInIFrame=function(){try{return null!==window.frameElement}catch(e){return!1}}}).call(this,r(11).Buffer)},287:function(e,t,r){"use strict";function n(){return e=>e}Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderType=t.RegExpString=t.IntNumber=t.BigIntString=t.AddressString=t.HexString=t.OpaqueType=void 0,t.OpaqueType=n,t.HexString=e=>e,t.AddressString=e=>e,t.BigIntString=e=>e,t.IntNumber=function(e){return Math.floor(e)},t.RegExpString=e=>e,function(e){e.CoinbaseWallet="CoinbaseWallet",e.MetaMask="MetaMask",e.Unselected=""}(t.ProviderType||(t.ProviderType={}))},414:function(e,t,r){"use strict";(function(e){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletProvider=void 0;const o=n(r(191)),h=n(r(286)),d=r(415),c=r(418),l=r(419),m=r(592),f=r(138),y=n(r(1224)),E=r(1239),_=r(1240),w=r(1241);class v extends o.default{constructor(e){var t,r;super(),this._filterPolyfill=new E.FilterPolyfill(this),this._subscriptionManager=new w.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this._send=this.send.bind(this),this._sendAsync=this.sendAsync.bind(this),this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=e.chainId,this._jsonRpcUrlFromOpts=e.jsonRpcUrl,this._overrideIsMetaMask=e.overrideIsMetaMask,this._relayProvider=e.relayProvider,this._storage=e.storage,this._relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=null===(t=e.overrideIsCoinbaseWallet)||void 0===t||t,this.isCoinbaseBrowser=null!==(r=e.overrideIsCoinbaseBrowser)&&void 0!==r&&r,this.qrUrl=e.qrUrl,this.supportsAddressSwitching=e.supportsAddressSwitching,this.isLedger=e.isLedger;const n=this.getChainId(),o=(0,f.prepend0x)(n.toString(16));this.emit("connect",{chainIdStr:o});const h=this._storage.getItem(m.LOCAL_STORAGE_ADDRESSES_KEY);if(h){const e=h.split(" ");""!==e[0]&&(this._addresses=e.map(address=>(0,f.ensureAddressString)(address)),this.emit("accountsChanged",e))}this._subscriptionManager.events.on("notification",e=>{this.emit("message",{type:e.method,data:e.params})}),this._addresses.length>0&&this.initializeRelay(),window.addEventListener("message",e=>{var t;if(e.origin===location.origin&&e.source===window&&"walletLinkMessage"===e.data.type){if("defaultChainChanged"===e.data.data.action||"dappChainSwitched"===e.data.data.action){const r=e.data.data.chainId,n=null!==(t=e.data.data.jsonRpcUrl)&&void 0!==t?t:this.jsonRpcUrl;this.updateProviderInfo(n,Number(r))}"addressChanged"===e.data.data.action&&this._setAddresses([e.data.data.address])}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,f.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var e;return null!==(e=this._storage.getItem("DefaultJsonRpcUrl"))&&void 0!==e?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem("DefaultJsonRpcUrl",e)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(e,t){this.isLedger||this.isCoinbaseBrowser||(this._chainIdFromOpts=t,this._jsonRpcUrlFromOpts=e),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(e,t){this.jsonRpcUrl=e;const r=this.getChainId();this._storage.setItem("DefaultChainId",t.toString(10)),!((0,f.ensureIntNumber)(t)!==r)&&this.hasMadeFirstChainChangedEmission||(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(e,address,symbol,t,image,r){const n=await this.initializeRelay();return!!(await n.watchAsset(e,address,symbol,t,image,null==r?void 0:r.toString()).promise).result}async addEthereumChain(e,t,r,n,o,h){var d,c;if((0,f.ensureIntNumber)(e)===this.getChainId())return!1;const l=await this.initializeRelay(),m=l.inlineAddEthereumChain(e.toString());this._isAuthorized()||m||await l.requestEthereumAccounts().promise;const y=await l.addEthereumChain(e.toString(),t,o,r,n,h).promise;return!0===(null===(d=y.result)||void 0===d?void 0:d.isApproved)&&this.updateProviderInfo(t[0],e),!0===(null===(c=y.result)||void 0===c?void 0:c.isApproved)}async switchEthereumChain(e){const t=await this.initializeRelay(),r=await t.switchEthereumChain(e.toString(10),this.selectedAddress||void 0).promise;if(r.errorCode)throw d.ethErrors.provider.custom({code:r.errorCode});const n=r.result;n.isApproved&&n.rpcUrl.length>0&&this.updateProviderInfo(n.rpcUrl,e)}setAppInfo(e,t){this.initializeRelay().then(r=>r.setAppInfo(e,t))}async enable(){var e;return null===(e=this.diagnostic)||void 0===e||e.log(c.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?l.Session.hash(this._relay.session.id):void 0}),this._addresses.length>0?[...this._addresses]:await this._send(_.JSONRPCMethod.eth_requestAccounts)}async close(){(await this.initializeRelay()).resetAndReload()}send(e,t){if("string"==typeof e){const r={jsonrpc:"2.0",id:0,method:e,params:Array.isArray(t)?t:void 0!==t?[t]:[]};return this._sendRequestAsync(r).then(e=>e.result)}if("function"==typeof t){const r=e,n=t;return this._sendAsync(r,n)}if(Array.isArray(e)){return e.map(e=>this._sendRequest(e))}const r=e;return this._sendRequest(r)}async sendAsync(e,t){if("function"!=typeof t)throw new Error("callback is required");if(Array.isArray(e)){const r=t;return void this._sendMultipleRequestsAsync(e).then(e=>r(null,e)).catch(e=>r(e,null))}const r=t;return this._sendRequestAsync(e).then(e=>r(null,e)).catch(e=>r(e,null))}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw d.ethErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});const{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw d.ethErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw d.ethErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});const n=void 0===r?[]:r,o=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:t,params:n,jsonrpc:"2.0",id:o})).result}async scanQRCode(e){const t=await this.initializeRelay(),r=await t.scanQRCode((0,f.ensureRegExpString)(e)).promise;if("string"!=typeof r.result)throw new Error("result was not a string");return r.result}async genericRequest(data,e){const t=await this.initializeRelay(),r=await t.genericRequest(data,e).promise;if("string"!=typeof r.result)throw new Error("result was not a string");return r.result}async selectProvider(e){const t=await this.initializeRelay(),r=await t.selectProvider(e).promise;if("string"!=typeof r.result)throw new Error("result was not a string");return r.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(e){const t={jsonrpc:"2.0",id:e.id},{method:r}=e;if(t.result=this._handleSynchronousMethods(e),void 0===t.result)throw new Error(`Coinbase Wallet does not support calling ${r} synchronously without `+`a callback. Please provide a callback parameter to call ${r} `+"asynchronously.");return t}_setAddresses(e,t){if(!Array.isArray(e))throw new Error("addresses is not an array");const r=e.map(address=>(0,f.ensureAddressString)(address));JSON.stringify(r)!==JSON.stringify(this._addresses)&&(this._addresses.length>0&&!1===this.supportsAddressSwitching&&!t||(this._addresses=r,this.emit("accountsChanged",this._addresses),this._storage.setItem(m.LOCAL_STORAGE_ADDRESSES_KEY,r.join(" "))))}_sendRequestAsync(e){return new Promise((t,r)=>{try{const n=this._handleSynchronousMethods(e);if(void 0!==n)return t({jsonrpc:"2.0",id:e.id,result:n});const o=this._handleAsynchronousFilterMethods(e);if(void 0!==o)return void o.then(r=>t(Object.assign(Object.assign({},r),{id:e.id}))).catch(e=>r(e));const h=this._handleSubscriptionMethods(e);if(void 0!==h)return void h.then(r=>t({jsonrpc:"2.0",id:e.id,result:r.result})).catch(e=>r(e))}catch(e){return r(e)}this._handleAsynchronousMethods(e).then(r=>r&&t(Object.assign(Object.assign({},r),{id:e.id}))).catch(e=>r(e))})}_sendMultipleRequestsAsync(e){return Promise.all(e.map(e=>this._sendRequestAsync(e)))}_handleSynchronousMethods(e){const{method:t}=e,r=e.params||[];switch(t){case _.JSONRPCMethod.eth_accounts:return this._eth_accounts();case _.JSONRPCMethod.eth_coinbase:return this._eth_coinbase();case _.JSONRPCMethod.eth_uninstallFilter:return this._eth_uninstallFilter(r);case _.JSONRPCMethod.net_version:return this._net_version();case _.JSONRPCMethod.eth_chainId:return this._eth_chainId();default:return}}async _handleAsynchronousMethods(e){const{method:t}=e,r=e.params||[];switch(t){case _.JSONRPCMethod.eth_requestAccounts:return this._eth_requestAccounts();case _.JSONRPCMethod.eth_sign:return this._eth_sign(r);case _.JSONRPCMethod.eth_ecRecover:return this._eth_ecRecover(r);case _.JSONRPCMethod.personal_sign:return this._personal_sign(r);case _.JSONRPCMethod.personal_ecRecover:return this._personal_ecRecover(r);case _.JSONRPCMethod.eth_signTransaction:return this._eth_signTransaction(r);case _.JSONRPCMethod.eth_sendRawTransaction:return this._eth_sendRawTransaction(r);case _.JSONRPCMethod.eth_sendTransaction:return this._eth_sendTransaction(r);case _.JSONRPCMethod.eth_signTypedData_v1:return this._eth_signTypedData_v1(r);case _.JSONRPCMethod.eth_signTypedData_v2:return this._throwUnsupportedMethodError();case _.JSONRPCMethod.eth_signTypedData_v3:return this._eth_signTypedData_v3(r);case _.JSONRPCMethod.eth_signTypedData_v4:case _.JSONRPCMethod.eth_signTypedData:return this._eth_signTypedData_v4(r);case _.JSONRPCMethod.cbWallet_arbitrary:return this._cbwallet_arbitrary(r);case _.JSONRPCMethod.wallet_addEthereumChain:return this._wallet_addEthereumChain(r);case _.JSONRPCMethod.wallet_switchEthereumChain:return this._wallet_switchEthereumChain(r);case _.JSONRPCMethod.wallet_watchAsset:return this._wallet_watchAsset(r)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(e,this.jsonRpcUrl)}_handleAsynchronousFilterMethods(e){const{method:t}=e,r=e.params||[];switch(t){case _.JSONRPCMethod.eth_newFilter:return this._eth_newFilter(r);case _.JSONRPCMethod.eth_newBlockFilter:return this._eth_newBlockFilter();case _.JSONRPCMethod.eth_newPendingTransactionFilter:return this._eth_newPendingTransactionFilter();case _.JSONRPCMethod.eth_getFilterChanges:return this._eth_getFilterChanges(r);case _.JSONRPCMethod.eth_getFilterLogs:return this._eth_getFilterLogs(r)}}_handleSubscriptionMethods(e){switch(e.method){case _.JSONRPCMethod.eth_subscribe:case _.JSONRPCMethod.eth_unsubscribe:return this._subscriptionManager.handleRequest(e)}}_isKnownAddress(e){try{const t=(0,f.ensureAddressString)(e);return this._addresses.map(address=>(0,f.ensureAddressString)(address)).includes(t)}catch(e){}return!1}_ensureKnownAddress(e){var t;if(!this._isKnownAddress(e))throw null===(t=this.diagnostic)||void 0===t||t.log(c.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(t){const r=t.from?(0,f.ensureAddressString)(t.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");return this._ensureKnownAddress(r),{fromAddress:r,toAddress:t.to?(0,f.ensureAddressString)(t.to):null,weiValue:null!=t.value?(0,f.ensureBN)(t.value):new h.default(0),data:t.data?(0,f.ensureBuffer)(t.data):e.alloc(0),nonce:null!=t.nonce?(0,f.ensureIntNumber)(t.nonce):null,gasPriceInWei:null!=t.gasPrice?(0,f.ensureBN)(t.gasPrice):null,maxFeePerGas:null!=t.maxFeePerGas?(0,f.ensureBN)(t.maxFeePerGas):null,maxPriorityFeePerGas:null!=t.maxPriorityFeePerGas?(0,f.ensureBN)(t.maxPriorityFeePerGas):null,gasLimit:null!=t.gas?(0,f.ensureBN)(t.gas):null,chainId:this.getChainId()}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw d.ethErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw d.ethErrors.provider.unsupportedMethod({})}async _signEthereumMessage(e,address,t,r){this._ensureKnownAddress(address);try{const n=await this.initializeRelay();return{jsonrpc:"2.0",id:0,result:(await n.signEthereumMessage(e,address,t,r).promise).result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw d.ethErrors.provider.userRejectedRequest("User denied message signature");throw e}}async _ethereumAddressFromSignedMessage(e,t,r){const n=await this.initializeRelay();return{jsonrpc:"2.0",id:0,result:(await n.ethereumAddressFromSignedMessage(e,t,r).promise).result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,f.hexStringFromIntNumber)(this.getChainId())}getChainId(){const e=this._storage.getItem("DefaultChainId");if(!e)return(0,f.ensureIntNumber)(this._chainIdFromOpts);const t=parseInt(e,10);return(0,f.ensureIntNumber)(t)}async _eth_requestAccounts(){var e;if(null===(e=this.diagnostic)||void 0===e||e.log(c.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?l.Session.hash(this._relay.session.id):void 0}),this._addresses.length>0)return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let t;try{const e=await this.initializeRelay();t=await e.requestEthereumAccounts().promise}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw d.ethErrors.provider.userRejectedRequest("User denied account authorization");throw e}if(!t.result)throw new Error("accounts received is empty");return this._setAddresses(t.result),this.isLedger||this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(e){this._requireAuthorization();const address=(0,f.ensureAddressString)(e[0]),t=(0,f.ensureBuffer)(e[1]);return this._signEthereumMessage(t,address,!1)}_eth_ecRecover(e){const t=(0,f.ensureBuffer)(e[0]),r=(0,f.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,r,!1)}_personal_sign(e){this._requireAuthorization();const t=(0,f.ensureBuffer)(e[0]),address=(0,f.ensureAddressString)(e[1]);return this._signEthereumMessage(t,address,!0)}_personal_ecRecover(e){const t=(0,f.ensureBuffer)(e[0]),r=(0,f.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,r,!0)}async _eth_signTransaction(e){this._requireAuthorization();const t=this._prepareTransactionParams(e[0]||{});try{const e=await this.initializeRelay();return{jsonrpc:"2.0",id:0,result:(await e.signEthereumTransaction(t).promise).result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw d.ethErrors.provider.userRejectedRequest("User denied transaction signature");throw e}}async _eth_sendRawTransaction(e){const t=(0,f.ensureBuffer)(e[0]),r=await this.initializeRelay();return{jsonrpc:"2.0",id:0,result:(await r.submitEthereumTransaction(t,this.getChainId()).promise).result}}async _eth_sendTransaction(e){this._requireAuthorization();const t=this._prepareTransactionParams(e[0]||{});try{const e=await this.initializeRelay();return{jsonrpc:"2.0",id:0,result:(await e.signAndSubmitEthereumTransaction(t).promise).result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw d.ethErrors.provider.userRejectedRequest("User denied transaction signature");throw e}}async _eth_signTypedData_v1(e){this._requireAuthorization();const t=(0,f.ensureParsedJSONObject)(e[0]),address=(0,f.ensureAddressString)(e[1]);this._ensureKnownAddress(address);const r=y.default.hashForSignTypedDataLegacy({data:t}),n=JSON.stringify(t,null,2);return this._signEthereumMessage(r,address,!1,n)}async _eth_signTypedData_v3(e){this._requireAuthorization();const address=(0,f.ensureAddressString)(e[0]),t=(0,f.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(address);const r=y.default.hashForSignTypedData_v3({data:t}),n=JSON.stringify(t,null,2);return this._signEthereumMessage(r,address,!1,n)}async _eth_signTypedData_v4(e){this._requireAuthorization();const address=(0,f.ensureAddressString)(e[0]),t=(0,f.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(address);const r=y.default.hashForSignTypedData_v4({data:t}),n=JSON.stringify(t,null,2);return this._signEthereumMessage(r,address,!1,n)}async _cbwallet_arbitrary(e){const t=e[0],data=e[1];if("string"!=typeof data)throw new Error("parameter must be a string");if("object"!=typeof t||null===t)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(t,data)}}async _wallet_addEthereumChain(e){var t,r,n,o;const h=e[0];if(0===(null===(t=h.rpcUrls)||void 0===t?void 0:t.length))return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!h.chainName||""===h.chainName.trim())throw d.ethErrors.provider.custom({code:0,message:"chainName is a required field"});if(!h.nativeCurrency)throw d.ethErrors.provider.custom({code:0,message:"nativeCurrency is a required field"});const c=parseInt(h.chainId,16);return await this.addEthereumChain(c,null!==(r=h.rpcUrls)&&void 0!==r?r:[],null!==(n=h.blockExplorerUrls)&&void 0!==n?n:[],h.chainName,null!==(o=h.iconUrls)&&void 0!==o?o:[],h.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(e){const t=e[0];return await this.switchEthereumChain(parseInt(t.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(e){const t=Array.isArray(e)?e[0]:e;if(!t.type)throw d.ethErrors.rpc.invalidParams({message:"Type is required"});if("ERC20"!==(null==t?void 0:t.type))throw d.ethErrors.rpc.invalidParams({message:`Asset of type '${t.type}' is not supported`});if(!(null==t?void 0:t.options))throw d.ethErrors.rpc.invalidParams({message:"Options are required"});if(!(null==t?void 0:t.options.address))throw d.ethErrors.rpc.invalidParams({message:"Address is required"});const r=this.getChainId(),{address:address,symbol:symbol,image:image,decimals:n}=t.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(t.type,address,symbol,n,image,r)}}_eth_uninstallFilter(e){const t=(0,f.ensureHexString)(e[0]);return this._filterPolyfill.uninstallFilter(t)}async _eth_newFilter(e){const param=e[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(param)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(e){const t=(0,f.ensureHexString)(e[0]);return this._filterPolyfill.getFilterChanges(t)}_eth_getFilterLogs(e){const t=(0,f.ensureHexString)(e[0]);return this._filterPolyfill.getFilterLogs(t)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(e=>(e.setAccountsCallback((e,t)=>this._setAddresses(e,t)),e.setChainCallback((e,t)=>{this.updateProviderInfo(t,parseInt(e,10))}),e.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=e,e))}}t.CoinbaseWalletProvider=v}).call(this,r(11).Buffer)},419:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;const n=r(270),o=r(138);class h{constructor(e,t,r,h){this._storage=e,this._id=t||(0,o.randomBytesHex)(16),this._secret=r||(0,o.randomBytesHex)(32),this._key=(new n.sha256).update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!h}static load(e){const t=e.getItem("session:id"),r=e.getItem("session:linked"),n=e.getItem("session:secret");return t&&n?new h(e,t,n,"1"===r):null}static hash(e){return(new n.sha256).update(e).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem("session:id",this._id),this._storage.setItem("session:secret",this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem("session:linked",this._linked?"1":"0")}}t.Session=h},427:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayMessageType=void 0,function(e){e.SESSION_ID_REQUEST="SESSION_ID_REQUEST",e.SESSION_ID_RESPONSE="SESSION_ID_RESPONSE",e.LINKED="LINKED",e.UNLINKED="UNLINKED",e.WEB3_REQUEST="WEB3_REQUEST",e.WEB3_REQUEST_CANCELED="WEB3_REQUEST_CANCELED",e.WEB3_RESPONSE="WEB3_RESPONSE"}(t.RelayMessageType||(t.RelayMessageType={}))},592:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletSDKRelayAbstract=t.APP_VERSION_KEY=t.LOCAL_STORAGE_ADDRESSES_KEY=t.WALLET_USER_NAME_KEY=void 0;const n=r(415);t.WALLET_USER_NAME_KEY="walletUsername",t.LOCAL_STORAGE_ADDRESSES_KEY="Addresses",t.APP_VERSION_KEY="AppVersion";t.WalletSDKRelayAbstract=class{async makeEthereumJSONRPCRequest(e,t){if(!t)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(t,{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{if(!e)throw n.ethErrors.rpc.parse({});const t=e,{error:r}=t;if(r)throw(0,n.serializeError)(r);return t})}}},593:function(e,t,r){(function(t){const n=r(1225),o=r(286);function h(e){return t.allocUnsafe(e).fill(0)}function d(e,t,r){const n=h(t);return e=c(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)}function c(e){if(!t.isBuffer(e))if(Array.isArray(e))e=t.from(e);else if("string"==typeof e)e=l(e)?t.from((r=m(e)).length%2?"0"+r:r,"hex"):t.from(e);else if("number"==typeof e)e=intToBuffer(e);else if(null==e)e=t.allocUnsafe(0);else if(o.isBN(e))e=e.toArrayLike(t);else{if(!e.toArray)throw new Error("invalid type");e=t.from(e.toArray())}var r;return e}function l(e){return"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/)}function m(e){return"string"==typeof e&&e.startsWith("0x")?e.slice(2):e}e.exports={zeros:h,setLength:d,setLengthRight:function(e,t){return d(e,t,!0)},isHexString:l,stripHexPrefix:m,toBuffer:c,bufferToHex:function(e){return"0x"+(e=c(e)).toString("hex")},keccak:function(a,e){return a=c(a),e||(e=256),n("keccak"+e).update(a).digest()}}}).call(this,r(11).Buffer)},696:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3Method=void 0,function(e){e.requestEthereumAccounts="requestEthereumAccounts",e.signEthereumMessage="signEthereumMessage",e.signEthereumTransaction="signEthereumTransaction",e.submitEthereumTransaction="submitEthereumTransaction",e.ethereumAddressFromSignedMessage="ethereumAddressFromSignedMessage",e.scanQRCode="scanQRCode",e.generic="generic",e.childRequestEthereumAccounts="childRequestEthereumAccounts",e.addEthereumChain="addEthereumChain",e.switchEthereumChain="switchEthereumChain",e.makeEthereumJSONRPCRequest="makeEthereumJSONRPCRequest",e.watchAsset="watchAsset",e.selectProvider="selectProvider"}(t.Web3Method||(t.Web3Method={}))},720:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletProvider=t.CoinbaseWalletSDK=void 0;const n=r(589),o=r(414);var h=r(589);Object.defineProperty(t,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return h.CoinbaseWalletSDK}});var d=r(414);Object.defineProperty(t,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return d.CoinbaseWalletProvider}}),t.default=n.CoinbaseWalletSDK,"undefined"!=typeof window&&(window.CoinbaseWalletSDK=n.CoinbaseWalletSDK,window.CoinbaseWalletProvider=o.CoinbaseWalletProvider,window.WalletLink=n.CoinbaseWalletSDK,window.WalletLinkProvider=o.CoinbaseWalletProvider)}}]);