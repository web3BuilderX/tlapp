(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{1092:function(n,t,r){"use strict";var e=r(60),o=r(1093),c=function n(t){this.givenProvider=n.givenProvider,t&&t._requestManager&&(t=t.currentProvider),"undefined"!=typeof document&&(this.pick=o.pick),this.setProvider(t)};c.givenProvider=null,"undefined"!=typeof ethereum&&ethereum.bzz&&(c.givenProvider=ethereum.bzz),c.prototype.setProvider=function(n){if(e.isObject(n)&&e.isString(n.bzz)&&(n=n.bzz),!e.isString(n)){this.currentProvider=null;var t=new Error("No provider set, please set one using bzz.setProvider().");return this.download=this.upload=this.isAvailable=function(){throw t},!1}return this.currentProvider=n,this.download=o.at(n).download,this.upload=o.at(n).upload,this.isAvailable=o.at(n).isAvailable,!0},n.exports=c},1093:function(n,t,r){var e=function(){throw"This swarm.js function isn't available on the browser."},o={readFile:e},c={download:e,safeDownloadArchived:e,directoryTree:e},f={platform:e,arch:e},path={join:e,slice:e},d={spawn:e},l={lookup:e},h=r(1094),v=r(551),m=r(1122),y=r(1124),w=r(1125);n.exports=w({fs:o,files:c,os:f,path:path,child_process:d,defaultArchives:{},mimetype:l,request:h,downloadUrl:null,bytes:v,hash:m,pick:y})},1122:function(n,t,r){var e=r(1123).keccak256,o=r(551),c=function(n,data){var t=o.reverse(o.pad(6,o.fromNumber(n))),r=o.flatten([t,"0x0000",data]);return e(r).slice(2)};n.exports=function n(data){"string"==typeof data&&"0x"!==data.slice(0,2)?data=o.fromString(data):"string"!=typeof data&&void 0!==data.length&&(data=o.fromUint8Array(data));var t=o.length(data);if(t<=4096)return c(t,data);for(var r=4096;128*r<t;)r*=128;for(var e=[],i=0;i<t;i+=r){var f=r<t-i?r:t-i;e.push(n(o.slice(data,i,i+f)))}return c(t,o.flatten(e))}},1124:function(n,t){var r=function(n){return function(){return new Promise((function(t,r){var e,o=function(r){var e={},o=r.target.files.length,c=0;[].map.call(r.target.files,(function(r){var f=new FileReader;f.onload=function(f){var data=new Uint8Array(f.target.result);if("directory"===n){var path=r.webkitRelativePath;e[path.slice(path.indexOf("/")+1)]={type:"text/plain",data:data},++c===o&&t(e)}else if("file"===n){var d=r.webkitRelativePath;t({type:mimetype.lookup(d),data:data})}else t(data)},f.readAsArrayBuffer(r)}))};"directory"===n?((e=document.createElement("input")).addEventListener("change",o),e.type="file",e.webkitdirectory=!0,e.mozdirectory=!0,e.msdirectory=!0,e.odirectory=!0,e.directory=!0):((e=document.createElement("input")).addEventListener("change",o),e.type="file");var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!1),e.dispatchEvent(c)}))}};n.exports={data:r("data"),file:r("file"),directory:r("directory")}},1125:function(n,t){n.exports=function(n){var t=n.fs,r=n.files,e=n.os,path=n.path,o=n.child_process,c=n.mimetype,f=n.defaultArchives,d=n.request,l=n.downloadUrl,h=n.bytes,v=n.hash,m=n.pick,y=function(n){return function(t){for(var map={},i=0,r=n.length;i<r;++i)map[n[i]]=t[i];return map}},w=function(n){return function(t){return"".concat(n,"/bzz-raw:/").concat(t)}},k=function(n){return function(t){return new Promise((function(r,e){d(w(n)(t),{responseType:"arraybuffer"},(function(n,t,o){return n?e(n):o.statusCode>=400?e(new Error("Error ".concat(o.statusCode,"."))):r(new Uint8Array(t))}))}))}},P=function(n){return function(t){return function t(r){return function(path){return function(e){var o=function(n){return void 0===n.path?Promise.resolve():"application/bzz-manifest+json"===n.contentType?t(n.hash)(path+n.path)(e):Promise.resolve((r=path+n.path,function(n){return function(map){return map[r]=n,map}})(function(n){return{type:n.contentType,hash:n.hash}}(n))(e));var r};return k(n)(r).then((function(text){return JSON.parse(_(text)).entries})).then((function(n){return Promise.all(n.map(o))})).then((function(){return e}))}}}(t)("")({})}},D=function(n){return function(t){return P(n)(t).then((function(n){return y(Object.keys(n))(Object.keys(n).map((function(t){return n[t].hash})))}))}},z=function(n){return function(t){return P(n)(t).then((function(t){var r=Object.keys(t),e=r.map((function(path){return t[path].hash})),o=r.map((function(path){return t[path].type})),c=e.map(k(n));return Promise.all(c).then((function(n){return y(r)(function(n){return n.map((function(data,i){return{type:o[i],data:data}}))}(n))}))}))}},A=function(n){return function(t){return function(e){return r.download(w(n)(t))(e)}}},T=function(n){return function(t){return function(r){return D(n)(t).then((function(t){var e=[];for(var o in t)if(o.length>0){var c=path.join(r,o);e.push(A(n)(t[o])(c))}return Promise.all(e).then((function(){return r}))}))}}},F=function(n){return function(data){return new Promise((function(t,r){var e={body:"string"==typeof data?G(data):data,method:"POST"};d("".concat(n,"/bzz-raw:/"),e,(function(n,data){return n?r(n):t(data)}))}))}},x=function(n){return function(t){return function(r){return function(e){return function o(c){var f="/"===r[0]?r:"/"+r,l="".concat(n,"/bzz:/").concat(t).concat(f),h={method:"PUT",headers:{"Content-Type":e.type},body:e.data};return new Promise((function(n,t){d(l,h,(function(r,data){return r?t(r):-1!==data.indexOf("error")?t(data):n(data)}))})).catch((function(n){return c>0&&o(c-1)}))}(3)}}}},E=function(n){return function(t){return O(n)({"":t})}},S=function(n){return function(r){return t.readFile(r).then((function(data){return E(n)({type:c.lookup(r),data:data})}))}},O=function(n){return function(t){return F(n)("{}").then((function(r){return Object.keys(t).reduce((function(r,e){return r.then(function(r){return function(e){return x(n)(e)(r)(t[r])}}(e))}),Promise.resolve(r))}))}},j=function(n){return function(r){return t.readFile(r).then(F(n))}},L=function(n){return function(e){return function(o){return r.directoryTree(o).then((function(n){return Promise.all(n.map((function(path){return t.readFile(path)}))).then((function(t){var r=n.map((function(path){return path.slice(o.length)})),e=n.map((function(path){return c.lookup(path)||"text/plain"}));return y(r)(t.map((function(data,i){return{type:e[i],data:data}})))}))})).then((function(n){return(a=e?{"":n[e]}:{},function(b){var map={};for(var n in a)map[n]=a[n];for(var t in b)map[t]=b[t];return map})(n);var a})).then(O(n))}}},U=function(n){return function(t){if("data"===t.pick)return m.data().then(F(n));if("file"===t.pick)return m.file().then(E(n));if("directory"===t.pick)return m.directory().then(O(n));if(t.path)switch(t.kind){case"data":return j(n)(t.path);case"file":return S(n)(t.path);case"directory":return L(n)(t.defaultFile)(t.path)}else{if(t.length||"string"==typeof t)return F(n)(t);if(t instanceof Object)return O(n)(t)}return Promise.reject(new Error("Bad arguments"))}},M=function(n){return function(t){return function(path){return J(n)(t).then((function(r){return r?path?T(n)(t)(path):z(n)(t):path?A(n)(t)(path):k(n)(t)}))}}},N=function(path,n){var t=e.platform().replace("win32","windows")+"-"+("x64"===e.arch()?"amd64":"386"),o=(n||f)[t],c=l+o.archive+".tar.gz",d=o.archiveMD5,h=o.binaryMD5;return r.safeDownloadArchived(c)(d)(h)(path)},R=function(n){return new Promise((function(t,r){var e=o.spawn,c=function(n){return function(t){return-1!==(""+t).indexOf(n)}},f=n.account,d=n.password,l=n.dataDir,h=n.ensApi,v=n.privateKey,m=0,y=e(n.binPath,["--bzzaccount",f||v,"--datadir",l,"--ens-api",h]),w=function(data){0===m&&c("Passphrase")(data)?setTimeout((function(){m=1,y.stdin.write(d+"\n")}),500):c("Swarm http proxy started")(data)&&(m=2,clearTimeout(k),t(y))};y.stdout.on("data",w),y.stderr.on("data",w);var k=setTimeout((function(){return r(new Error("Couldn't start swarm process."))}),2e4)}))},C=function(n){return new Promise((function(t,r){n.stderr.removeAllListeners("data"),n.stdout.removeAllListeners("data"),n.stdin.removeAllListeners("error"),n.removeAllListeners("error"),n.removeAllListeners("exit"),n.kill("SIGINT");var e=setTimeout((function(){return n.kill("SIGKILL")}),8e3);n.once("close",(function(){clearTimeout(e),t()}))}))},I=function(n){return F(n)("test").then((function(n){return"c9a99c7d326dcc6316f32fe2625b311f6dc49a175e6877681ded93137d3569e7"===n})).catch((function(){return!1}))},J=function(n){return function(t){return k(n)(t).then((function(data){try{return!!JSON.parse(_(data)).entries}catch(n){return!1}}))}},B=function(n){return function(a,b,t,r,e){var p;return void 0!==a&&(p=n(a)),void 0!==b&&(p=n(b)),void 0!==t&&(p=n(t)),void 0!==r&&(p=n(r)),void 0!==e&&(p=n(e)),p}},_=function(n){return h.toString(h.fromUint8Array(n))},G=function(n){return h.toUint8Array(h.fromString(n))},K=function(n){return{download:function(t,path){return M(n)(t)(path)},downloadData:B(k(n)),downloadDataToDisk:B(A(n)),downloadDirectory:B(z(n)),downloadDirectoryToDisk:B(T(n)),downloadEntries:B(P(n)),downloadRoutes:B(D(n)),isAvailable:function(){return I(n)},upload:function(t){return U(n)(t)},uploadData:B(F(n)),uploadFile:B(E(n)),uploadFileFromDisk:B(E(n)),uploadDataFromDisk:B(j(n)),uploadDirectory:B(O(n)),uploadDirectoryFromDisk:B(L(n)),uploadToManifest:B(x(n)),pick:m,hash:v,fromString:G,toString:_}};return{at:K,local:function(n){return function(t){return I("http://localhost:8500").then((function(r){return r?t(K("http://localhost:8500")).then((function(){})):N(n.binPath,n.archives).onData((function(data){return(n.onProgress||function(){})(data.length)})).then((function(){return R(n)})).then((function(n){return t(K("http://localhost:8500")).then((function(){return n}))})).then(C)}))}},download:M,downloadBinary:N,downloadData:k,downloadDataToDisk:A,downloadDirectory:z,downloadDirectoryToDisk:T,downloadEntries:P,downloadRoutes:D,isAvailable:I,startProcess:R,stopProcess:C,upload:U,uploadData:F,uploadDataFromDisk:j,uploadFile:E,uploadFileFromDisk:S,uploadDirectory:O,uploadDirectoryFromDisk:L,uploadToManifest:x,pick:m,hash:v,fromString:G,toString:_}}}}]);