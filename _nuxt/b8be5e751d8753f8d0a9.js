(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1250:function(e,t,r){"use strict";r.r(t);r(119),r(146),r(171),r(37),r(47),r(204),r(96),r(41);var n,o,c,m,d,l,k,f,T,h,E,A,_,v,S,x,O,y,w,R,C,N,P,I,j,G,L,K,D,B,F,H,Q,V,U,X,W=r(1),Y=(r(120),r(121),r(35),r(2)),M=r(683),Z=r(684),J=r(0),z=(r(139),r(45)),$=(r(341),r(152)),ee={allowanceNumber:function(e){var t=0;try{t=Object(J.a)(e.allowance).gte(Object(J.a)(Math.pow(10,36)))?-1:Object(J.a)(e.allowance).div(Object(J.a)(10).pow(e.tokenSelected.decimals)).toString(10)}catch(e){console.info(e)}return t},balanceNumber:function(e){var t=0;try{t=Object(J.a)(e.balance).div(Object(J.a)(10).pow(e.tokenSelected.decimals)).toString(10)}catch(e){}return t},isNFTToken:function(e,t){return t.isERC721||t.isERC1155},isOpenseaIssue:function(e,t,r,n){var o=r.metamask.netId,c=137==o&&e.address&&"0x2953399124f0cbb46d2cbacd8a89cf0599974963"==e.address.toLowerCase(),m=1==o&&e.address&&"0x495f947276749ce646f68ac8c248420045cb7b5e"==e.address.toLowerCase();return c||m},isERC721:function(e){return 1==e.tokenType},isERC1155:function(e){return 2==e.tokenType},tokenInstance:function(e,t,r,n){return Object(W.a)(regeneratorRuntime.mark((function t(){var o,c,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.metamask,c=o.ethAccount,o.netId,t.next=3,n["metamask/web3"]();case 3:return m=t.sent,t.abrupt("return",new m.eth.Contract(M,e.address,{from:c}));case 5:case"end":return t.stop()}}),t)})))},tokenQueryInstance:function(e,t,r,n){return Object(W.a)(regeneratorRuntime.mark((function e(){var t,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.metamask,o=t.ethAccount,t.netId,e.next=3,n["metamask/web3"]();case 3:return c=e.sent,m=n["metamask/networkConfig"].tokenQueryContract,e.abrupt("return",new c.eth.Contract(Z,m,{from:o}));case 6:case"end":return e.stop()}}),e)})))}},te={setTokenAddress:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_ADDRESS",t.address)},setAproveTx:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_APPROVE_TX",t.txHash)},setAproveAmount:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_APPROVE_AMOUNT",t.amount)},setAproveTxStatus:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_APPROVE_TX_STATUS",t.status)},setTokenSelectedDisplayInfo:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_SELECTED_DISPLAY_INFO",t.tokenSelectedDisplayInfo)},setTokenSelected:(X=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dispatch,o=t.commit,c=t.state,m=t.rootState,d=r.selected){e.next=4;break}return e.abrupt("return");case 4:if(o("SET_TOKEN_SELECTED",d),o("SET_TOKEN_INFO_LOADED",!0),l=m.metamask.initialized,c.tokenSelected.isETH){e.next=23;break}if(e.prev=8,3!=c.tokenType||!l){e.next=14;break}return e.next=12,n("getTokenDecimals");case 12:k=e.sent,o("SET_TOKEN_DECIMALS",k);case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(8);case 18:n("getTokenAllowce",{}),n("getTokenBalance",{}),n("checkTokenGasProcessing"),e.next=26;break;case 23:o("SET_GAS_PROCESSING",-1),o("SET_TOKEN_TYPE",0),o("SET_TOKEN_DECIMALS",18);case 26:return e.prev=26,e.next=29,n("common/getNetIdStorage",{},{root:!0});case 29:(f=e.sent).lastTokenUsed=c.tokenSelected,n("common/updateNetIdStorage",{netStorage:f},{root:!0}),e.next=36;break;case 34:e.prev=34,e.t1=e.catch(26);case 36:case"end":return e.stop()}}),e,null,[[8,16],[26,34]])}))),function(e,t){return X.apply(this,arguments)}),checkLastTokenSelected:(U=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.commit,t.state,o=null,e.prev=2,e.next=5,r("common/getNetIdStorage",{},{root:!0});case 5:c=e.sent,o=c.lastTokenUsed,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:return n("SET_TOKEN_SELECTED",o),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e){return U.apply(this,arguments)}),setTokenBalance:function(e,t){e.dispatch;var r=e.commit,n=(e.state,t.balance);r("SET_TOKEN_BALANCE",n),r("SET_TOKEN_BALANCE_LOADED",!0),console.info("Token Balance",n)},setTokenAllowance:function(e,t){e.dispatch;var r=e.commit,n=(e.state,t.allowance);-1!=n&&(r("SET_TOKEN_ALLOWANCE",n),r("SET_TOKEN_ALLOWANCE_LOADED",!0),console.info("Token Allowance",n))},clearUsedParams:(V=Object(W.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.dispatch,r=t.commit,t.rootState,r("CLEAR");case 2:case"end":return e.stop()}}),e)}))),function(e){return V.apply(this,arguments)}),initBaseParams:(Q=Object(W.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.rootState,t.rootGetters,r=t.dispatch,t.commit,t.state,r("checkLastTokenSelected");case 2:case"end":return e.stop()}}),e)}))),function(e){return Q.apply(this,arguments)}),checkAllowceEnough:(H=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.commit,m=t.rootState,d=r.finalAmount,l=null!=n.tokenSelected&&n.tokenSelected.isETH||null!=n.tokenSelected&&null!=n.tokenSelected.decimals&&n.allowance>0&&Object(J.a)(n.allowance).div(Object(J.a)(10).pow(n.tokenSelected.decimals)).gte(Object(J.a)(d)),o.isERC721&&(k=m.common.addressInfo,null!=n.tokenSelected.decimals&&(l=n.allowance>0&&Object(J.a)(n.allowance).div(Object(J.a)(10).pow(n.tokenSelected.decimals)).gte(Object(J.a)(k.finalData.length)))),c("SET_TOKEN_ALLOWANCE_ENOUGH",l),e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return H.apply(this,arguments)}),checkBalanceEnough:(F=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.commit,m=t.rootState,d=r.finalAmount,l=m.metamask.balance,k=n.tokenSelected,f=!1,null!=k&&(k.isETH?f=Object(J.a)(l).gte(Object(J.a)(d)):(o.isERC721&&(T=m.common.addressInfo,f=Object(J.a)(n.balance).div(Object(J.a)(10).pow(n.tokenSelected.decimals)).gte(Object(J.a)(T.finalData.length))),o.isERC1155?f=!0:null!=k.decimals&&(f=Object(J.a)(n.balance).div(Object(J.a)(10).pow(n.tokenSelected.decimals)).gte(Object(J.a)(d))))),c("SET_TOKEN_BALANCE_ENOUGH",f),e.abrupt("return",f);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return F.apply(this,arguments)}),getTokenAddress:(B=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,r=t.getters,n=t.commit,e.next=3,r.tokenInstance();case 3:o=e.sent,n("SET_TOKEN_ADDRESS",o._address);case 5:case"end":return e.stop()}}),e)}))),function(e){return B.apply(this,arguments)}),getTokenBalance:(D=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.state,n=t.getters,o=t.rootGetters,c=t.rootState,(0,t.commit)("SET_TOKEN_BALANCE_LOADED",!1),m=o["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var o=function(){var d=Object(W.a)(regeneratorRuntime.mark((function d(l){var k,f,T,h,E,data,A;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(k=l.retryAttempt,f=void 0===k?1:k,f++,d.prev=2,T=0,n.isERC1155){d.next=16;break}return h=c.metamask.ethAccount,d.next=8,n.tokenInstance();case 8:return E=d.sent,data=E.methods.balanceOf(h).encodeABI(),A={method:"eth_call",params:[{from:h,to:E._address,data:data},"latest"],from:h},d.next=13,r("metamask/sendAsync",A,{root:!0});case 13:T=d.sent,T=Object(Y.hexToNumberString)(T),r("setTokenBalance",{balance:T});case 16:e(T),d.next=22;break;case 19:d.prev=19,d.t0=d.catch(2),f>=m||"execution reverted"==d.t0.message?t(d.t0):o({retryAttempt:f});case 22:case"end":return d.stop()}}),d,null,[[2,19]])})));return function(e){return d.apply(this,arguments)}}();o({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)}),getTokenDecimals:(K=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.state,n=t.getters,o=t.rootGetters,c=t.rootState,t.commit,m=o["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var o=function(){var d=Object(W.a)(regeneratorRuntime.mark((function d(l){var k,f,T,h,data,E,A;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return k=l.retryAttempt,f=void 0===k?1:k,f++,d.prev=2,T=c.metamask.ethAccount,d.next=6,n.tokenInstance();case 6:return h=d.sent,data=h.methods.decimals().encodeABI(),E={method:"eth_call",params:[{from:T,to:h._address,data:data},"latest"],from:T},d.next=11,r("metamask/sendAsync",E,{root:!0});case 11:A=d.sent,A=Object(Y.hexToNumber)(A),console.info("Token Decimals",A),e(A),d.next=20;break;case 17:d.prev=17,d.t0=d.catch(2),f>=m||"execution reverted"==d.t0.message?t(d.t0):o({retryAttempt:f});case 20:case"end":return d.stop()}}),d,null,[[2,17]])})));return function(e){return d.apply(this,arguments)}}();o({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return K.apply(this,arguments)}),parseInsertTokenAddress:(L=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.dispatch,t.state,t.getters,t.rootGetters,t.rootState,o=t.commit,c=(c=r.tokenAddress).replace(/^\s+|\s+$/gm,"");try{c.startsWith("xdc")&&(c=c.replace("xdc","0x"))}catch(e){}if(!Object(z.a)(c)){e.next=27;break}try{Object(Y.checkAddressChecksum)(c)||(c=c.toLowerCase())}catch(e){}return o("SET_TOKEN_ADDRESS",c),e.next=9,n("getTokenInfo");case 9:if(m=e.sent,0!=Object.keys(m).length){e.next=26;break}return e.next=13,n("checkTokenType");case 13:d=e.sent,console.info("TokenType2",d),e.t0=d,e.next=1===e.t0?18:2===e.t0?22:26;break;case 18:return e.next=20,n("getERC721TokenInfo");case 20:return m=e.sent,e.abrupt("break",26);case 22:return e.next=24,n("getERC1155TokenInfo");case 24:return m=e.sent,e.abrupt("break",26);case 26:return e.abrupt("return",m);case 27:case"end":return e.stop()}}),e)}))),function(e,t){return L.apply(this,arguments)}),fetchTokenPrice:(G=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,k,f,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,o=t.dispatch,c=t.rootGetters,m=t.state,n("SET_PRICE_LOADED",!1),(d=c["metamask/networkConfig"]).smartContractPollTime,d.extraFeeOracle,l=d.supportExtraFee,r.metamask.netId,l){e.next=7;break}return n("SET_PRICE_LOADED",!0),e.abrupt("return");case 7:return e.next=9,o("bulksender/setExtraFee",{extraFee:0},{root:!0});case 9:if(n("SET_TOKEN_PRICE",0),"0x0000000000000000000000000000000000000000"!=(k=m.address)){e.next=14;break}return n("SET_PRICE_LOADED",!0),e.abrupt("return");case 14:if(""!=k.trim()){e.next=16;break}return e.abrupt("return");case 16:if(f=Object(Y.toChecksumAddress)(k),!((T=c["metamask/networkConfig"].specialTokenList).includes(k)||T.includes(k.toLowerCase())||T.includes(f))){e.next=23;break}return n("SET_TOKEN_PRICE",1),n("SET_PRICE_LOADED",!0),e.abrupt("return");case 23:return e.abrupt("return");case 26:case"end":return e.stop()}}),e)}))),function(e){return G.apply(this,arguments)}),getTokenInfo:(j=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,l=c["metamask/networkConfig"],k=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(l){var f,T,h,E,A,data,_,v,S,x,symbol,O,y,w,R;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=l.retryAttempt,T=void 0===f?1:f,T++,t.prev=2,h=m.metamask.ethAccount,E=m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return A=t.sent,data=A.methods.queryTokenInfo(n.address,2,h,E).encodeABI(),_={method:"eth_call",params:[{from:h,to:A._address,data:data},"latest"],from:h},t.next=12,r("metamask/sendAsync",_,{root:!0});case 12:v=t.sent,S=$.decodeParameters([{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"decimals",type:"uint256"},{name:"totalSupply",type:"uint256"},{name:"balance",type:"uint256"},{name:"allowance",type:"uint256"}],v),x=S.name,symbol=S.symbol,O=S.decimals,S.totalSupply,y=S.balance,w=S.allowance,R={contractAddress:n.address,balance:y,name:x,symbol:symbol,decimals:O},r("setTokenSelected",{selected:R}),r("setTokenBalance",{balance:y}),r("setTokenAllowance",{allowance:w}),d("SET_TOKEN_TYPE",3),e(R),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(2),console.info("get Token Info exception",t.t0),T>=k||"execution reverted"==t.t0.message?e({}):c({retryAttempt:T});case 26:case"end":return t.stop()}}),t,null,[[2,22]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)}),getERC721TokenInfo:(I=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=c["metamask/networkConfig"],l=d.rpcCallRetryAttempt,d.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(d){var k,f,T,h,data,E,A,_,v,symbol,S,x,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k=d.retryAttempt,f=void 0===k?1:k,f++,t.prev=2,T=m.metamask.ethAccount,m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return h=t.sent,data=h.methods.queryERC721TokenInfo(n.address,T).encodeABI(),E={method:"eth_call",params:[{from:T,to:h._address,data:data},"latest"],from:T},t.next=12,r("metamask/sendAsync",E,{root:!0});case 12:if(null==(A=t.sent)){t.next=21;break}_=$.decodeParameters([{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"decimals",type:"uint256"},{name:"totalSupply",type:"uint256"},{name:"balance",type:"uint256"},{name:"allowance",type:"uint256"}],A),v=_.name,symbol=_.symbol,S=_.decimals,_.totalSupply,x=_.balance,_.allowance,O={contractAddress:n.address,balance:x,name:v,symbol:symbol,decimals:S},r("setTokenSelected",{selected:O}),r("setTokenBalance",{balance:x}),e(O),t.next=22;break;case 21:throw Error("Fetch token info failed");case 22:t.next=34;break;case 24:if(t.prev=24,t.t0=t.catch(2),!(f>=l)){t.next=33;break}return t.next=29,r("setERC721DefaultToken");case 29:O=t.sent,e(O),t.next=34;break;case 33:c({retryAttempt:f});case 34:case"end":return t.stop()}}),t,null,[[2,24]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return I.apply(this,arguments)}),setERC721DefaultToken:(P=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,t.getters,t.rootGetters,t.rootState,o=t.commit,c={contractAddress:n.address,balance:0,name:"ERC721",symbol:"ERC721",decimals:0},r("setTokenSelected",{selected:c}),o("SET_TOKEN_BALANCE_LOADED",!1),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)}))),function(e){return P.apply(this,arguments)}),getERC1155TokenInfo:(N=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=c["metamask/networkConfig"],l=d.rpcCallRetryAttempt,d.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(d){var k,f,T,h,symbol,E;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k=d.retryAttempt,f=void 0===k?1:k,f++,t.prev=2,m.metamask.ethAccount,m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return t.sent,t.next=10,r("getBaseNFTTokenInfo");case 10:T=t.sent,h=T.name,symbol=T.symbol,console.info(h),E={contractAddress:n.address,balance:0,name:h,symbol:symbol,decimals:0},r("setTokenSelected",{selected:E}),r("setTokenBalance",{balance:0}),e(E),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),f>=l?e({}):c({retryAttempt:f});case 24:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return N.apply(this,arguments)}),getBaseNFTTokenInfo:(C=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=c["metamask/networkConfig"],l=d.rpcCallRetryAttempt,d.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(d){var k,f,T,h,data,E,A,_,v,symbol;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k=d.retryAttempt,f=void 0===k?1:k,f++,t.prev=2,T=m.metamask.ethAccount,m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return h=t.sent,data=h.methods.queryERC721TokenBaseInfo(n.address).encodeABI(),E={method:"eth_call",params:[{from:T,to:h._address,data:data},"latest"],from:T},t.next=12,r("metamask/sendAsync",E,{root:!0});case 12:if(null==(A=t.sent)){t.next=18;break}_=$.decodeParameters([{name:"name",type:"string"},{name:"symbol",type:"string"}],A),v=_.name,symbol=_.symbol,e({name:v,symbol:symbol}),t.next=19;break;case 18:throw Error("Fetch token info failed");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),f>=l||"execution reverted"==t.t0.message?e({name:"NFT-ERC1155",symbol:"ERC1155"}):c({retryAttempt:f});case 24:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)}),checkTokenType:(R=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,k,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,l=c["metamask/networkConfig"],k=l.rpcCallRetryAttempt,l.tokenQueryContract,f=l.supportsNFT,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(l){var T,h,E,A,_,data,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(T=l.retryAttempt,h=void 0===T?1:T,h++,t.prev=2,E=3,!f){t.next=15;break}return A=m.metamask.ethAccount,t.next=8,o.tokenQueryInstance();case 8:return _=t.sent,data=_.methods.tokenType(n.address).encodeABI(),v={method:"eth_call",params:[{from:A,to:_._address,data:data},"latest"],from:A},t.next=13,r("metamask/sendAsync",v,{root:!0});case 13:E=t.sent,E=Object(Y.hexToNumber)(E);case 15:d("SET_TOKEN_TYPE",E),e(E),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),console.info("Check token type e",t.t0),h>=k||"execution reverted"==t.t0.message?(d("SET_TOKEN_TYPE",3),e(3)):c({retryAttempt:h});case 23:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return R.apply(this,arguments)}),checkTokenGasProcessingV1:(w=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,!n.gasForProcessingChecking){e.next=3;break}return e.abrupt("return");case 3:return d("SET_GAS_PROCESSING_CHECKING",!0),d("SET_GAS_PROCESSING",-1),c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){!function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(n){var c,l,data,k,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.retryAttempt,t.prev=2,c=m.metamask.ethAccount,t.next=6,o.tokenInstance();case 6:return l=t.sent,data=l.methods.gasForProcessing().encodeABI(),k={method:"eth_call",params:[{from:c,to:l._address,data:data},"latest"],from:c},t.next=11,r("metamask/sendAsync",k,{root:!0});case 11:f=t.sent,f=Object(Y.hexToNumber)(f),d("SET_GAS_PROCESSING",f),d("SET_GAS_PROCESSING_CHECKING",!1),e(f),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(2),d("SET_GAS_PROCESSING",-1),d("SET_GAS_PROCESSING_CHECKING",!1),e(-1);case 23:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(e){return t.apply(this,arguments)}}()({})})));case 7:case"end":return e.stop()}}),e)}))),function(e){return w.apply(this,arguments)}),checkTokenGasProcessing:(y=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,!n.gasForProcessingChecking){e.next=3;break}return e.abrupt("return");case 3:return d("SET_GAS_PROCESSING_CHECKING",!0),d("SET_GAS_PROCESSING",-1),c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){!function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(c){var l,k,data,f,T,h,E,A,_,v,i,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.retryAttempt,t.prev=2,l=m.metamask.ethAccount,t.next=6,o.tokenInstance();case 6:return k=t.sent,data=k.methods.gasForProcessing().encodeABI(),f={method:"eth_call",params:[{from:l,to:k._address,data:data},"latest"],from:l},T=-1,t.prev=10,t.next=13,r("metamask/sendAsync",f,{root:!0});case 13:T=t.sent,T=Object(Y.hexToNumber)(T),d("SET_GAS_PROCESSING",T),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(10),d("SET_GAS_PROCESSING",-1);case 21:if(!(T>0)){t.next=25;break}d("SET_GAS_PROCESSING_CHECKING",!1),t.next=53;break;case 25:return h={method:"eth_getCode",params:[k._address,"latest"],from:l},t.next=28,r("metamask/sendAsync",h,{root:!0});case 28:E=t.sent,A=n.gasProcessingSureFunctions,_=n.gasProcessingPossibleFunctions,v=!1,i=0;case 33:if(!(i<A.length)){t.next=40;break}if(!E.includes(A[i])){t.next=37;break}return v=!0,t.abrupt("break",40);case 37:i++,t.next=33;break;case 40:S=!1,i=0;case 42:if(!(i<_.length)){t.next=49;break}if(!E.includes(_[i])){t.next=46;break}return S=!0,t.abrupt("break",49);case 46:i++,t.next=42;break;case 49:v&&S&&(T=1e3),d("SET_GAS_PROCESSING",T),d("SET_GAS_PROCESSING_CHECKING",!1);case 53:e(T),t.next=61;break;case 56:t.prev=56,t.t1=t.catch(2),d("SET_GAS_PROCESSING",-1),d("SET_GAS_PROCESSING_CHECKING",!1),e(-1);case 61:case"end":return t.stop()}}),t,null,[[2,56],[10,18]])})));return function(e){return t.apply(this,arguments)}}()({})})));case 7:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)}),checkTokenSpecialTypes:(O=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,!n.specialTypesChecking){e.next=3;break}return e.abrupt("return");case 3:return d("SET_SPECIAL_TYPES_CHECKING",!0),d("SET_GAS_PROCESSING",-1),c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){!function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(c){var l,k,f,T,h,E,A,i,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.retryAttempt,t.prev=2,l=m.metamask.ethAccount,t.next=6,o.tokenInstance();case 6:return k=t.sent,f={method:"eth_getCode",params:[k._address,"latest"],from:l},t.next=10,r("metamask/sendAsync",f,{root:!0});case 10:T=t.sent,h=n.gasProcessingSureFunctions,E=n.gasProcessingPossibleFunctions,A=!1,i=0;case 15:if(!(i<h.length)){t.next=22;break}if(!T.includes(h[i])){t.next=19;break}return A=!0,t.abrupt("break",22);case 19:i++,t.next=15;break;case 22:_=!1,i=0;case 24:if(!(i<E.length)){t.next=31;break}if(!T.includes(E[i])){t.next=28;break}return _=!0,t.abrupt("break",31);case 28:i++,t.next=24;break;case 31:d("SET_GAS_PROCESSING",A&&_?1e3:-1),d("SET_SPECIAL_TYPES_CHECKING",!1),e(1e3),t.next=42;break;case 37:t.prev=37,t.t0=t.catch(2),d("SET_GAS_PROCESSING",-1),d("SET_SPECIAL_TYPES_CHECKING",!1),e(-1);case 42:case"end":return t.stop()}}),t,null,[[2,37]])})));return function(e){return t.apply(this,arguments)}}()({})})));case 7:case"end":return e.stop()}}),e)}))),function(e){return O.apply(this,arguments)}),checkNFTType:(x=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=r.isERC721,l=c["metamask/networkConfig"],k=l.rpcCallRetryAttempt,l.tokenQueryContract,l.supportsNFT,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(c){var l,f,T,h,E,A,data,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=c.retryAttempt,f=void 0===l?1:l,f++,t.prev=2,T=!1,h=m.metamask.ethAccount,t.next=7,o.tokenInstance();case 7:return E=t.sent,A="0xd9b67a26",d&&(A="0x80ac58cd"),data=E.methods.supportsInterface(A).encodeABI(),_={method:"eth_call",params:[{from:h,to:E._address,data:data},"latest"],from:h},t.next=14,n("metamask/sendAsync",_,{root:!0});case 14:T=t.sent,T=Object(Y.hexToNumberString)(T),e(T="1"==T||1==T),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(2),console.info("Check token type again:",t.t0),f>=k||"execution reverted"==t.t0.message?e(!1):r({retryAttempt:f});case 24:case"end":return t.stop()}}),t,null,[[2,20]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return x.apply(this,arguments)}),bulkQueryBalances:(S=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=r.tokenAddress,l=r.addresses,k=r.tokenIds,f=c["metamask/networkConfig"],T=f.rpcCallRetryAttempt,f.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(W.a)(regeneratorRuntime.mark((function c(f){var h,E,A,_,data,v,S,x,O,y;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return h=f.retryAttempt,E=void 0===h?1:h,E++,c.prev=2,A=m.metamask.ethAccount,c.next=6,o.tokenQueryInstance();case 6:return _=c.sent,o.isERC1155?(v=[],k.forEach((function(e,i){try{v.push(e.toString())}catch(t){v.push(e)}})),data=_.methods.bulkQueryERC1155Balances(d,l,v).encodeABI()):data=_.methods.bulkQueryBalances(d,l).encodeABI(),S={method:"eth_call",params:[{from:A,to:_._address,data:data},"latest"],from:A},c.next=11,n("metamask/sendAsync",S,{root:!0});case 11:if(null==(x=c.sent)){c.next=17;break}O=$.decodeParameters([{name:"balances",type:"uint256[]"}],x),y=O.balances,e(y),c.next=18;break;case 17:throw Error("BulkQueryBalances failed");case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(2),E>=T?t(c.t0):r({retryAttempt:E});case 23:case"end":return c.stop()}}),c,null,[[2,20]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return S.apply(this,arguments)}),bulkQueryETHBalances:(v=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f,T,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=r.tokenAddress,l=r.addresses,r.tokenIds,k=r.netId,f=void 0===k?1:k,T=c["metamask/networkConfig"],h=T.rpcCallRetryAttempt,T.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(W.a)(regeneratorRuntime.mark((function c(k){var T,E,A,_,data,v,S,x,O;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return T=k.retryAttempt,E=void 0===T?1:T,E++,c.prev=2,A=m.metamask.ethAccount,c.next=6,o.tokenQueryInstance();case 6:return _=c.sent,data=_.methods.bulkQueryBalances(d,l).encodeABI(),v={method:"eth_call",params:[{from:A,to:_._address,data:data},"latest"],from:A},c.next=11,n("metamask/sendAsync",v,{root:!0});case 11:if(null==(S=c.sent)){c.next=17;break}x=$.decodeParameters([{name:"balances",type:"uint256[]"}],S),O=x.balances,e({balances:O,netId:f}),c.next=18;break;case 17:throw Error("BulkQueryBalances failed");case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(2),E>=h?t(c.t0):r({retryAttempt:E});case 23:case"end":return c.stop()}}),c,null,[[2,20]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)}),checkApproveTransactionStatus:(_=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,k,f,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.approveTx,d=r.approveAmount,l=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=4,e.next=7,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 7:if(null==(k=e.sent)){e.next=23;break}if("0x1"!=(f=k.status)&&1!=f){e.next=18;break}return f=1,e.next=14,o("refreshTokenAllowce");case 14:T=e.sent,Object(J.a)(T).gte(Object(J.a)(d))?(c("SET_TOKEN_APPROVE_TX_STATUS",f),c("SET_TOKEN_ALLOWANCE",d)):setTimeout((function(){o("checkApproveTransactionStatus")}),1e3*l),e.next=21;break;case 18:c("SET_TOKEN_APPROVE_TX_STATUS",f=-2),c("SET_TOKEN_ALLOWANCE",d);case 21:e.next=24;break;case 23:setTimeout((function(){o("checkApproveTransactionStatus")}),1e3*l);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(4),setTimeout((function(){o("checkApproveTransactionStatus")}),1e3*l);case 29:case"end":return e.stop()}}),e,null,[[4,26]])}))),function(e){return _.apply(this,arguments)}),getTokenAllowce:(A=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.getters,o=t.commit,c=t.dispatch,m=t.rootGetters,d=t.state,o("SET_TOKEN_ALLOWANCE_LOADED",!1),l=m["metamask/networkConfig"],k=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var o=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(m){var l,f,T,h,E,data,A,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=m.retryAttempt,f=void 0===l?1:l,f++,t.prev=2,T=r.metamask.ethAccount,h=r.bulksender.bulksenderAddress,null!=T&&null!=h&&""!=h){t.next=8;break}return e(-1),t.abrupt("return");case 8:return t.next=10,c("checkTokenType");case 10:return t.next=12,n.tokenInstance();case 12:return E=t.sent,data=n.isNFTToken?E.methods.isApprovedForAll(T,h).encodeABI():E.methods.allowance(T,h).encodeABI(),A={method:"eth_call",params:[{from:T,to:E._address,data:data},"latest"],from:T},t.next=17,c("metamask/sendAsync",A,{root:!0});case 17:_=t.sent,_=Object(Y.hexToNumberString)(_),!n.isNFTToken||"1"!=_&&1!=_||(_=d.unlimitedApproveAmount),c("setTokenAllowance",{allowance:_}),e(_),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(2),f>=k||"execution reverted"==t.t0.message?e(0):o({retryAttempt:f});case 27:case"end":return t.stop()}}),t,null,[[2,24]])})));return function(e){return t.apply(this,arguments)}}();o({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return A.apply(this,arguments)}),refreshTokenAllowce:(E=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.getters,o=t.commit,c=t.dispatch,m=t.rootGetters,d=t.state,o("SET_TOKEN_ALLOWANCE_LOADED",!1),l=m["metamask/networkConfig"],k=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var o=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(m){var l,f,T,h,E,data,A,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=m.retryAttempt,f=void 0===l?1:l,f++,t.prev=2,T=r.metamask.ethAccount,h=r.bulksender.bulksenderAddress,t.next=7,n.tokenInstance();case 7:return E=t.sent,data=n.isNFTToken?E.methods.isApprovedForAll(T,h).encodeABI():E.methods.allowance(T,h).encodeABI(),A={method:"eth_call",params:[{from:T,to:E._address,data:data},"latest"],from:T},t.next=12,c("metamask/sendAsync",A,{root:!0});case 12:_=t.sent,_=Object(Y.hexToNumberString)(_),!n.isNFTToken||"1"!=_&&1!=_||(_=d.unlimitedApproveAmount),c("setTokenAllowance",{allowance:_}),e(_),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),f>=k||"execution reverted"==t.t0.message?e(0):o({retryAttempt:f});case 22:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e){return t.apply(this,arguments)}}();o({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return E.apply(this,arguments)}),approveForBulksender:(h=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,(m=r.amount)!=n.unlimitedApproveAmount&&(m=Object(J.a)(m).times(Object(J.a)(10).pow(parseInt(n.tokenSelected.decimals))).toString(10)),d=o.bulksender.bulksenderAddress,e.next=6,c("approve",{bulksenderAddress:d,amount:m});case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return h.apply(this,arguments)}),approveForBulksenderForNFTToken:(T=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,r.amount,d=o.bulksender.bulksenderAddress,m=n.unlimitedApproveAmount,e.next=7,c("_approveForNFTToken",{bulksenderAddress:d,setApproveAll:!0,amount:m});case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)}))),function(e,t){return T.apply(this,arguments)}),revokeApproveOfBulksenderForNFTToken:(f=Object(W.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,r=t.rootState,t.rootGetters,n=t.dispatch,t.commit,o=r.bulksender.bulksenderAddress,e.next=6,n("_approveForNFTToken",{bulksenderAddress:o,setApproveAll:!1,amount:0});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)}),checkAddressIsContract:(k=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=r.addresses,l=c["metamask/networkConfig"],k=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(W.a)(regeneratorRuntime.mark((function c(l){var f,T,h,E,data,A,_,v,S;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return f=l.retryAttempt,T=void 0===f?1:f,T++,c.prev=2,h=m.metamask.ethAccount,c.next=6,o.tokenQueryInstance();case 6:return E=c.sent,data=E.methods.bulkCheckIfContracts(d).encodeABI(),A={method:"eth_call",params:[{from:h,to:E._address,data:data},"latest"],from:h},c.next=11,n("metamask/sendAsync",A,{root:!0});case 11:if(null==(_=c.sent)){c.next=17;break}v=$.decodeParameters([{name:"contracts",type:"address[]"}],_),S=v.contracts,e(S),c.next=18;break;case 17:throw Error("bulkCheckIfContracts failed");case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(2),T>=k?t(c.t0):r({retryAttempt:T});case 23:case"end":return c.stop()}}),c,null,[[2,20]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return k.apply(this,arguments)}),checkTokenOwners:(l=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,o=t.state,c=t.getters,m=t.rootGetters,d=t.rootState,t.commit,l=r.tokenIds,k=m["metamask/networkConfig"],f=k.rpcCallRetryAttempt,k.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(W.a)(regeneratorRuntime.mark((function m(k){var T,h,E,A,data,_,v,S,x;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return T=k.retryAttempt,h=void 0===T?1:T,h++,m.prev=2,E=d.metamask.ethAccount,m.next=6,c.tokenQueryInstance();case 6:return A=m.sent,data=A.methods.bulkQueryERC721Owers(o.address,l).encodeABI(),_={method:"eth_call",params:[{from:E,to:A._address,data:data},"latest"],from:E},m.next=11,n("metamask/sendAsync",_,{root:!0});case 11:if(null==(v=m.sent)){m.next=17;break}S=$.decodeParameters([{name:"addrOwners",type:"address[]"}],v),x=S.addrOwners,e(x),m.next=18;break;case 17:throw Error("bulkCheckIfContracts failed");case 18:m.next=23;break;case 20:m.prev=20,m.t0=m.catch(2),h>=f?t(m.t0):r({retryAttempt:h});case 23:case"end":return m.stop()}}),m,null,[[2,20]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)}),checkApproval:(d=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f,T,h,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,d=t.commit,l=r.amount,k=n.checkZeroTimes,l=Object(J.a)(l).times(Object(J.a)(10).pow(parseInt(n.tokenSelected.decimals))).toString(10),f=c.bulksender.bulksenderAddress,e.next=7,o.tokenInstance();case 7:return T=e.sent,h=c.metamask.ethAccount,E=0,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(n){var o,c,A,data,_,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.retryAttempt,c=void 0===o?0:o,c++,t.prev=2,(A=c>=Math.ceil(k/2)+1)&&(l="0"),data=T.methods.approve(f,l).encodeABI(),_={method:"eth_estimateGas",params:[{from:h,to:T._address,data:data,value:Object(Y.numberToHex)(0)}],from:h},t.next=9,m("metamask/sendAsync",_,{root:!0});case 9:v=t.sent,v=Object(Y.hexToNumber)(v),d("SET_NEED_TO_RESET_APPROVAL",A),A&&(E=-1),e({usedApproveZero:A,errorType:E}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),c>=k?e({usedApproveZero:!0,errorType:E=-2}):r({retryAttempt:c});case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 11:case"end":return e.stop()}}),e)}))),function(e,t){return d.apply(this,arguments)}),approveOld:(m=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f,T,h,E,A,data,_,v,S,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,l=r.bulksenderAddress,k=r.amount,f=0,T=null,e.prev=4,h=o.metamask.ethAccount,E=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList.includes(h)&&(E=o.metamask.gasPrice.instant),e.next=11,n.tokenInstance();case 11:return A=e.sent,data=A.methods.approve(l,k).encodeABI(),_={method:"eth_estimateGas",params:[{from:h,to:A._address,data:data,value:Object(Y.numberToHex)(0)}],from:h},e.next=16,m("metamask/sendAsync",_,{root:!0});case 16:return v=e.sent,v=Object(Y.hexToNumber)(v),console.log("approve tx",v),S={method:"eth_sendTransaction",params:[{from:h,to:A._address,gas:Object(Y.numberToHex)(v+5e4),gasPrice:Object(Y.toHex)(Object(Y.toWei)(E.toString(),"gwei")),value:Object(Y.numberToHex)(0),data:data}],from:h},e.next=22,m("bulksender/_formatEIP1559Transaction",{callParams:S},{root:!0});case 22:return S=e.sent,e.next=25,m("metamask/sendAsync",S,{root:!0});case 25:return x=e.sent,d("ADD_TX",x),d("SET_TOKEN_APPROVE_TX",x),d("SET_TOKEN_APPROVE_TX_STATUS",0),d("SET_TOKEN_APPROVE_AMOUNT",k),m("checkApproveTransactionStatus"),e.abrupt("return",{txHash:x,errorType:f});case 34:return e.prev=34,e.t0=e.catch(4),console.info(e.t0),e.abrupt("return",{txHash:T,errorType:f});case 38:case"end":return e.stop()}}),e,null,[[4,34]])}))),function(e,t){return m.apply(this,arguments)}),approve:(c=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,l=r.bulksenderAddress,k=r.amount,f=0,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(T){var h,E,A,_,v,data,S,x,O,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=T.retryAttempt,E=void 0===h?0:h,E++,t.prev=2,A=o.metamask.ethAccount,_=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList.includes(A)&&(_=o.metamask.gasPrice.instant),t.next=9,n.tokenInstance();case 9:return v=t.sent,data=v.methods.approve(l,k).encodeABI(),S={method:"eth_estimateGas",params:[{from:A,to:v._address,data:data,value:Object(Y.numberToHex)(0)}],from:A},t.next=14,m("metamask/sendAsync",S,{root:!0});case 14:return x=t.sent,x=Object(Y.hexToNumber)(x),console.log("approve tx",x),O={method:"eth_sendTransaction",params:[{from:A,to:v._address,gas:Object(Y.numberToHex)(x+5e4),gasPrice:Object(Y.toHex)(Object(Y.toWei)(_.toString(),"gwei")),value:Object(Y.numberToHex)(0),data:data}],from:A},t.next=20,m("bulksender/_formatEIP1559Transaction",{callParams:O},{root:!0});case 20:return O=t.sent,t.next=23,m("metamask/sendAsync",O,{root:!0});case 23:y=t.sent,d("ADD_TX",y),d("SET_TOKEN_APPROVE_TX",y),d("SET_TOKEN_APPROVE_TX_STATUS",0),d("SET_TOKEN_APPROVE_AMOUNT",k),m("checkApproveTransactionStatus"),e({txHash:y,errorType:f}),t.next=42;break;case 32:if(t.prev=32,t.t0=t.catch(2),!(E>=2||4001==t.t0.code)){t.next=39;break}"execution reverted"==t.t0.message&&(f=-1),e({txHash:null,errorType:f}),t.next=42;break;case 39:return t.next=41,m("bulksender/checkEIP1559Error",{e:t.t0},{root:!0});case 41:r({retryAttempt:E});case 42:case"end":return t.stop()}}),t,null,[[2,32]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)}),_approveForNFTToken:(o=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,l=r.bulksenderAddress,k=r.setApproveAll,f=r.amount,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(W.a)(regeneratorRuntime.mark((function t(T){var h,E,A,_,v,data,S,x,O,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=T.retryAttempt,E=void 0===h?0:h,E++,t.prev=2,A=o.metamask.ethAccount,_=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList,t.next=8,n.tokenInstance();case 8:return v=t.sent,data=v.methods.setApprovalForAll(l,k).encodeABI(),S={method:"eth_estimateGas",params:[{from:A,to:v._address,data:data,value:Object(Y.numberToHex)(0)}],from:A},t.next=13,m("metamask/sendAsync",S,{root:!0});case 13:return x=t.sent,x=Object(Y.hexToNumber)(x),console.log("approve tx",x),O={method:"eth_sendTransaction",params:[{from:A,to:v._address,gas:Object(Y.numberToHex)(x+5e4),gasPrice:Object(Y.toHex)(Object(Y.toWei)(_.toString(),"gwei")),value:Object(Y.numberToHex)(0),data:data}],from:A},t.next=19,m("bulksender/_formatEIP1559Transaction",{callParams:O},{root:!0});case 19:return O=t.sent,t.next=22,m("metamask/sendAsync",O,{root:!0});case 22:y=t.sent,d("ADD_TX",y),d("SET_TOKEN_APPROVE_TX",y),d("SET_TOKEN_APPROVE_TX_STATUS",0),d("SET_TOKEN_APPROVE_AMOUNT",f),m("checkApproveTransactionStatus"),e({txHash:y,errorType:0}),t.next=40;break;case 31:if(t.prev=31,t.t0=t.catch(2),!(E>=2||4001==t.t0.code)){t.next=37;break}e({txHash:null,errorType:0}),t.next=40;break;case 37:return t.next=39,m("bulksender/checkEIP1559Error",{e:t.t0},{root:!0});case 39:r({retryAttempt:E});case 40:case"end":return t.stop()}}),t,null,[[2,31]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),_approveForNFTTokenOld:(n=Object(W.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,k,f,T,h,E,A,_,data,v,S,x,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,l=r.bulksenderAddress,k=r.setApproveAll,f=r.amount,T=0,h=null,e.prev=4,E=o.metamask.ethAccount,A=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList,e.next=10,n.tokenInstance();case 10:return _=e.sent,data=_.methods.setApprovalForAll(l,k).encodeABI(),v={method:"eth_estimateGas",params:[{from:E,to:_._address,data:data,value:Object(Y.numberToHex)(0)}],from:E},e.next=15,m("metamask/sendAsync",v,{root:!0});case 15:return S=e.sent,S=Object(Y.hexToNumber)(S),console.log("approve tx",S),x={method:"eth_sendTransaction",params:[{from:E,to:_._address,gas:Object(Y.numberToHex)(S+5e4),gasPrice:Object(Y.toHex)(Object(Y.toWei)(A.toString(),"gwei")),value:Object(Y.numberToHex)(0),data:data}],from:E},e.next=21,m("bulksender/_formatEIP1559Transaction",{callParams:x},{root:!0});case 21:return x=e.sent,e.next=24,m("metamask/sendAsync",x,{root:!0});case 24:return O=e.sent,d("ADD_TX",O),d("SET_TOKEN_APPROVE_TX",O),d("SET_TOKEN_APPROVE_TX_STATUS",0),d("SET_TOKEN_APPROVE_AMOUNT",f),m("checkApproveTransactionStatus"),e.abrupt("return",{txHash:O,errorType:T});case 33:return e.prev=33,e.t0=e.catch(4),console.info(e.t0),e.abrupt("return",{txHash:h,errorType:T});case 37:case"end":return e.stop()}}),e,null,[[4,33]])}))),function(e,t){return n.apply(this,arguments)})};t.default={namespaced:!0,state:function(){return{address:null,balance:0,balanceDisplay:"",allowance:0,allowanceNumber:0,balanceNumber:0,allowanceEnough:!1,balanceEnough:!1,approveAmount:0,approveTx:"",approveTxStatus:-1,tokenSelected:null,tokenSelectedDisplayInfo:"",txs:[],tokenSymbolLoaded:!1,tokenAllowanceLoaded:!1,tokenInfoLoaded:!1,checkZeroTimes:4,needToResetApproval:!1,isERC721:!1,isERC1155:!1,tokenType:3,isNFTToken:!1,nftApproveAmount:"100000000000000000000000000000000000000001",unlimitedApproveAmount:"115792089237316195423570985008687907853269984665640564039457584007913129639935",price:0,priceLoaded:!1,gasForProcessing:-1,gasForProcessingChecking:!1,specialTypesChecking:!1,tokenErrorType:0,gasProcessingSureFunctions:["ffb2c479"],gasProcessingPossibleFunctions:["14b6ca96","2d48e896","9d1944f5","9c1b8af5","871c128d","e98030c7"]}},getters:ee,mutations:{SET_TOKEN_ADDRESS:function(e,address){e.address=address},SET_TOKEN_BALANCE:function(e,t){e.balance=t},SET_TOKEN_SELECTED:function(e,t){e.tokenSelected=t},SET_TOKEN_SELECTED_DISPLAY_INFO:function(e,t){e.tokenSelectedDisplayInfo=t},SET_TOKEN_ALLOWANCE:function(e,t){e.allowance=t},SET_TOKEN_ALLOWANCE_ENOUGH:function(e,t){e.allowanceEnough=t},SET_TOKEN_BALANCE_ENOUGH:function(e,t){e.balanceEnough=t},SET_TOKEN_APPROVE_AMOUNT:function(e,t){e.approveAmount=t},SET_TOKEN_APPROVE_TX:function(e,t){e.approveTx=t},SET_TOKEN_APPROVE_TX_STATUS:function(e,t){e.approveTxStatus=t},SET_TOKEN_BALANCE_LOADED:function(e,t){e.tokenBalanceLoaded=t},SET_TOKEN_ALLOWANCE_LOADED:function(e,t){e.tokenAllowanceLoaded=t},SET_TOKEN_INFO_LOADED:function(e,t){e.tokenInfoLoaded=t},SET_NEED_TO_RESET_APPROVAL:function(e,t){e.needToResetApproval=t},SET_IS_ERC_721:function(e,t){e.isERC721=t},SET_TOKEN_TYPE:function(e,t){e.tokenType=t},SET_TOKEN_PRICE:function(e,t){e.price=t},SET_PRICE_LOADED:function(e,t){e.priceLoaded=t},SET_GAS_PROCESSING:function(e,t){e.gasForProcessing=t},SET_GAS_PROCESSING_CHECKING:function(e,t){e.gasForProcessingChecking=t},SET_SPECIAL_TYPES_CHECKING:function(e,t){e.specialTypesChecking=t},SET_TOKEN_ERROR_TYPE:function(e,t){e.tokenErrorType=t},SET_TOKEN_DECIMALS:function(e,t){e.tokenSelected.decimals=t},ADD_TX:function(e,t){e.txs.push(t)},CLEAR:function(e){e.approveTx="",e.approveTxStatus=-1,e.needToResetApproval=!1}},actions:te}}}]);