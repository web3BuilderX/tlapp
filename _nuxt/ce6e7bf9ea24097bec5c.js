(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1044:function(e,t,r){"use strict";r.r(t),function(e){r(210),r(39),r(130),r(218),r(131),r(154);var n,o,c,m,d,f,l,h,k,x,T,v,S,A,w,y,O,j,R,E,_,I,F,P,B,G,L,D,C,H,U,N,K,V,X,M,W,z,Y,$,Q,J,Z,ee,te,re,ne,ae,se,oe,ce,ue,ie,me,de,pe,fe,le,he,ke,be,xe,ge,Te,ve,Se,Ae,we,ye,Oe,je=r(40),Re=(r(92),r(44),r(0)),Ee=(r(113),r(114),r(37),r(4)),_e=r(2),Ie=r(711),Fe=r(51),Pe=r(1),Be=r(265),Ge=r(399),Le=r(138),De={dappFee:function(e){return e.isVIP?0:Object(_e.fromWei)(e.txFee,"ether")},txFee:function(e){if(e.isVIP)return 0;try{return Object(Pe.a)(e.extraFee).gt(Object(Pe.a)(e.txFee))?Object(Pe.a)(e.extraFee).toString(10):e.txFee}catch(t){return e.txFee}},vipFee:function(e){try{return Object(_e.fromWei)(e.vipFee,"ether")}catch(e){return"1"}},referralFee:function(e){try{return Object(_e.fromWei)(e.referralFee,"ether")}catch(e){return"0.01"}},delegatorFee:function(e){try{return Object(_e.fromWei)(e.delegatorFee,"ether")}catch(e){return"1"}},priorityFee:function(e,t,r){try{var n=e.gasPrice,o=r.metamask.networkBaseFee,c=Object(Pe.a)(n).minus(Object(Pe.a)(o)).toNumber();return c<.01&&(c=.01),c}catch(e){return console.info(e),1}},contractInstance:function(e,t,r,n){return Object(Re.a)(regeneratorRuntime.mark((function e(){var t,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.metamask,o=t.ethAccount,c=t.netId,m=Fe.a["netId".concat(c)].lockContract,e.next=4,n["metamask/web3"]();case 4:return d=e.sent,e.abrupt("return",new d.eth.Contract(Ie,m,{from:o}));case 6:case"end":return e.stop()}}),e)})))}},Ce={saveUserLocks:(Oe=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.userLocks,n("SET_USER_LOCKS",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return Oe.apply(this,arguments)}),setUsedBurnerKey:(ye=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.usedBurnerKey,n("SET_USED_BURNER_KEY",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return ye.apply(this,arguments)}),setGasPrice:(we=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.gasPrice,n("SET_GAS_PRICE",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return we.apply(this,arguments)}),setUsedSimple:(Ae=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.simple,n("SET_SIMPLE",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return Ae.apply(this,arguments)}),setExtraFee:(Se=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.extraFee,n("SET_EXTRA_FEE",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return Se.apply(this,arguments)}),createNewAddress:(ve=Object(Re.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,e.abrupt("return",(new Be).create());case 2:case"end":return e.stop()}}),e)}))),function(e){return ve.apply(this,arguments)}),saveReferralAddress:(Te=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,address;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,address=r.address,n("SET_REFERRAL_ADDRESS",address);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return Te.apply(this,arguments)}),saveBurnerKey:(ge=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.burnerKey,n("SET_BURNER_KEY",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return ge.apply(this,arguments)}),createBurnKey:(xe=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.state,t.getters,n=t.commit,e.next=3,r("createNewAddress");case 3:return o=e.sent,n("SET_BURNER_KEY",o),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(e){return xe.apply(this,arguments)}),createNewUniqueId:(be=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,r=Date.parse(new Date),n=parseInt(100*Math.random()),e.abrupt("return",Object(_e.asciiToHex)(r+"_"+n));case 4:case"end":return e.stop()}}),e)}))),function(e){return be.apply(this,arguments)}),createNewUniqueId_V1:(ke=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,r.fromAddress,r.toAddress,n=Date.parse(new Date),o=10*Math.random(),e.abrupt("return",Object(_e.asciiToHex)(n+"_"+o));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return ke.apply(this,arguments)}),createNewUniqueId_V2:(he=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,n=r.fromAddress,e.abrupt("return",Object(_e.padLeft)(Object(_e.hexToBytes)(n,32)));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return he.apply(this,arguments)}),clearUsedParams:(le=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.dispatch,r=t.commit,t.rootState,r("CLEAR");case 2:case"end":return e.stop()}}),e)}))),function(e){return le.apply(this,arguments)}),initBaseParams:(fe=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f,l,h,k,x,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,r=t.getters,n=t.dispatch,o=t.commit,c=t.rootState,e.next=3,r.contractInstance();case 3:m=e.sent,o("SET_CONTRACT_ADDRESS",m._address),d=c.metamask,f=d.netId,l=d.gasPrice,h=Fe.a["netId".concat(f)].explorerUrl,o("SET_TX_URL",h.tx),o("SET_ADDRESS_URL",h.address),o("SET_GAS_PRICE",l.fast);try{k=Fe.a["netId".concat(f)],x=k.useConfigBlockByteSize,T=k.blockConfig,x&&T&&T.maxBytesSize&&o("SET_MAX_BLOCK_BYTES_SIZE",T.maxBytesSize)}catch(e){}n("getFeeInfo"),n("getVIPStatus"),n("getTotalLockedTokens"),n("getMyLockedTokens"),n("getMyLockEvents");case 16:case"end":return e.stop()}}),e)}))),function(e){return fe.apply(this,arguments)}),getChainId:(pe=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,r=t.rootState,n=r.metamask,o=n.netId,"walletLink"!=n.providerName){e.next=4;break}return e.abrupt("return",1);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),function(e){return pe.apply(this,arguments)}),getNFTActionType:(de=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,n=t.rootState,t.rootGetters,o=n.token.tokenType,e.t0=o,e.next=1===e.t0?6:2===e.t0?8:10;break;case 6:return r.simple,e.abrupt("break",10);case 8:return e.abrupt("break",10);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),function(e){return de.apply(this,arguments)}),getFeeInfo:(me=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(Re.a)(regeneratorRuntime.mark((function f(l){var h,k,x,T,data,v,S,A,w,y,O;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,f.prev=2,x=r.metamask.ethAccount,f.next=6,c.contractInstance();case 6:return T=f.sent,data=T.methods.gFees().encodeABI(),v={method:"eth_call",params:[{from:x,to:T._address,data:data},"latest"],from:x},f.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=f.sent,A=Le.decodeParameters([{internalType:"uint256",name:"ethFee",type:"uint256"},{internalType:"uint256",name:"liquidityFee",type:"uint256"},{internalType:"uint256",name:"referralPercent",type:"uint256"},{internalType:"uint256",name:"whitelistFee",type:"uint256"}],S),w=A.ethFee,A.liquidityFee,y=A.referralPercent,O=A.whitelistFee,n("SET_TX_FEE",w),n("SET_REFERRAL_FEE",Object(Pe.a)(w).times(y).div(1e3).toString(10)),n("SET_VIP_FEE",O),console.log("Tx fee",w),e(w),f.next=23;break;case 20:f.prev=20,f.t0=f.catch(2),k>=d?t(f.t0):m({retryAttempt:k});case 23:case"end":return f.stop()}}),f,null,[[2,20]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return me.apply(this,arguments)}),getTotalLockedTokens:(ie=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(Re.a)(regeneratorRuntime.mark((function f(l){var h,k,x,T,data,v,S,A;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,f.prev=2,x=r.metamask.ethAccount,f.next=6,c.contractInstance();case 6:return T=f.sent,data=T.methods.getUserNumLockedTokens(x).encodeABI(),v={method:"eth_call",params:[{from:x,to:T._address,data:data},"latest"],from:x},f.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=f.sent,A=Object(_e.hexToNumber)(S),n("SET_TOTAL_LOCKED_TOKENS",A),e(A),f.next=20;break;case 17:f.prev=17,f.t0=f.catch(2),k>=d?t(f.t0):m({retryAttempt:k});case 20:case"end":return f.stop()}}),f,null,[[2,17]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return ie.apply(this,arguments)}),getMyLockedTokens:(ue=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,d=t.state,f=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var l=function(){var h=Object(Re.a)(regeneratorRuntime.mark((function h(k){var x,T,v,S,A,w,i,data,y,O,j,R,E;return regeneratorRuntime.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return x=k.retryAttempt,T=void 0===x?1:x,T++,h.prev=2,v=r.metamask.ethAccount,h.next=6,c.contractInstance();case 6:for(S=h.sent,A=d.totalLockedTokens,w=[],i=0;i<A;i++)data=S.methods.getUserLockedTokenAtIndex(v,i).encodeABI(),w.push({target:S._address,callData:data});return h.next=12,m["token/multicall3Instance"]();case 12:return y=h.sent,h.next=15,y.methods.tryAggregate(!1,w).call();case 15:return O=h.sent,j=[],O.forEach((function(e,i){if(e.success&&e.returnData){var t=Le.decodeParameters([{name:"token",type:"address"}],e.returnData).token;j.push(t)}})),R={},h.next=21,o("token/bulkQueryTokenBaseInfo",{tokens:j,includedLPInfo:!0,includedSupply:!0,includedDexInfo:!0},{root:!0});case 21:return h.sent.forEach((function(e,i){R[e.tokenAddress.toLowerCase()]=e})),w=[],j.forEach((function(e,i){var data=S.methods.getUserNumLocksForToken(v,e).encodeABI();w.push({target:S._address,callData:data})})),h.next=27,y.methods.tryAggregate(!1,w).call();case 27:O=h.sent,E=[],O.forEach((function(e,i){if(e.success&&e.returnData){var t=j[i].toLowerCase();E.push({tokenAddress:j[i],total:Object(_e.hexToNumber)(e.returnData),tokenInfo:R[t]})}})),console.info(E),n("SET_USER_TOKEN_LOCKS",E),e(E),h.next=38;break;case 35:h.prev=35,h.t0=h.catch(2),T>=f?t(h.t0):l({retryAttempt:T});case 38:case"end":return h.stop()}}),h,null,[[2,35]])})));return function(e){return h.apply(this,arguments)}}();l({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return ue.apply(this,arguments)}),getUserNumLocksForToken:(ce=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,t.commit,t.dispatch,o=t.getters,c=t.rootGetters,t.state,m=r.tokenAddress,d=c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(Re.a)(regeneratorRuntime.mark((function c(f){var l,h,k,x,T;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return l=f.retryAttempt,h=void 0===l?1:l,h++,c.prev=2,k=n.metamask.ethAccount,c.next=6,o.contractInstance();case 6:return x=c.sent,c.next=9,x.methods.getUserNumLocksForToken(k,m).call();case 9:T=c.sent,console.info(T),e(T),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(2),h>=d?t(c.t0):r({retryAttempt:h});case 17:case"end":return c.stop()}}),c,null,[[2,14]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return ce.apply(this,arguments)}),getUserLocksByToken:(oe=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v,S,i,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,t.commit,o=t.dispatch,t.getters,t.rootGetters,t.state,c=r.tokenAddress,e.next=4,o("getUserNumLocksForToken",{tokenAddress:c});case 4:m=e.sent,d=100,f=parseInt(Math.ceil(m/parseFloat(d))),l=n.metamask.ethAccount,h=[],k=0;case 11:if(!(k<f)){e.next=26;break}for((x=d*(k+1))>m&&(x=m),T=[],v=[],S=[],i=k*d;i<x;i++)T.push(i),v.push(l),S.push(c);return e.next=21,o("bulkQueryLockInfo",{users:v,tokens:S,indexes:T});case 21:A=e.sent,h=h.concat(A);case 23:k++,e.next=11;break;case 26:return e.abrupt("return",{total:m,locks:h});case 27:case"end":return e.stop()}}),e)}))),function(e,t){return oe.apply(this,arguments)}),bulkQueryLockInfo:(se=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,t.commit,t.dispatch,n=t.getters,o=t.rootGetters,t.state,c=r.users,m=r.tokens,d=r.indexes,f=o["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var r=function(){var l=Object(Re.a)(regeneratorRuntime.mark((function l(h){var k,x,T,v,S,A,w;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return k=h.retryAttempt,x=void 0===k?1:k,x++,l.prev=2,l.next=5,n.contractInstance();case 5:return T=l.sent,v=[],d.forEach((function(e,i){var data=T.methods.getUserLockForTokenAtIndex(c[i],m[i],e).encodeABI();v.push({target:T._address,callData:data})})),l.next=10,o["token/multicall3Instance"]();case 10:return S=l.sent,l.next=13,S.methods.tryAggregate(!1,v).call();case 13:A=l.sent,w=[],A.forEach((function(e,i){if(e.success&&e.returnData){var t=Le.decodeParameters([{internalType:"uint256",name:"lockDate",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"initialAmount",type:"uint256"},{internalType:"uint256",name:"unlockDate",type:"uint256"},{internalType:"uint256",name:"lockID",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"bool",name:"isLP",type:"bool"}],e.returnData),r=t.lockDate,n=t.amount,o=t.initialAmount,c=t.unlockDate,m=t.lockID,d=t.owner,f=t.isLP;w.push({lockDate:r,amount:n,initialAmount:o,unlockDate:c,lockID:m,owner:d,isLP:f})}else w.push({})})),console.info(w),e(w),l.next=23;break;case 20:l.prev=20,l.t0=l.catch(2),x>=f?t(l.t0):r({retryAttempt:x});case 23:case"end":return l.stop()}}),l,null,[[2,20]])})));return function(e){return l.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return se.apply(this,arguments)}),getMyLockEvents:(ae=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,t.getters,c=t.rootGetters,t.state,m=c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var c=function(){var d=Object(Re.a)(regeneratorRuntime.mark((function d(f){var l,h,k,x,T,v,S,A;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return l=f.retryAttempt,h=void 0===l?0:l,h++,d.prev=2,k=r.metamask.ethAccount,x=r.lock.contractAddress,T="&fromBlock=1&toBlock=99999999&page=1&offset=1000&address=$contractAddress&topic0=0x2b0ee95731e1a61eaea21dd0a5a8c0c98f2a87cfd62e3b3f41bebaf2b877eb23&topic3=0x000000000000000000000000$creator&topic0_3_opr=and&topic2=0x000000000000000000000000$owner&topic0_2_opr=and&topic2_3_opr=or",v=k.replace("0x","").toLowerCase(),T=T.replace("$contractAddress",x.toLowerCase()).replace("$creator",v).replace("$owner",v),d.next=10,o("metamask/fetchEvents",{queryParams:T},{root:!0});case 10:S=d.sent,console.info(S),A=[],S.forEach((function(e,i){var t=Le.decodeParameters([{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"lockDate",type:"uint256"},{indexed:!1,internalType:"uint256",name:"unlockDate",type:"uint256"},{indexed:!1,internalType:"uint256",name:"lockID",type:"uint256"},{indexed:!1,internalType:"bool",name:"isLP",type:"bool"}],e.data),r=t.amount,n=t.lockDate,o=t.unlockDate,c=t.lockID,m=t.isLP,d=e.topics[1],f=e.topics[2],l=e.topics[3],h=Le.decodeParameters([{name:"tokenAddress",type:"address"}],d).tokenAddress,k=Le.decodeParameters([{name:"creator",type:"address"}],f).creator,x=Le.decodeParameters([{name:"owner",type:"address"}],l).owner;A.push({creator:k,owner:x,tokenAddress:h,address:e.address,amount:r,lockDate:n,unlockDate:o,lockID:c,isLP:m,txHash:e.transactionHash,txTime:e.timeStamp})})),n("SET_USER_LOCKS",A),e(A),d.next=21;break;case 18:d.prev=18,d.t0=d.catch(2),h>=m?t(d.t0):c({retryAttempt:h});case 21:case"end":return d.stop()}}),d,null,[[2,18]])})));return function(e){return d.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return ae.apply(this,arguments)}),getTxFee:(ne=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(Re.a)(regeneratorRuntime.mark((function f(l){var h,k,x,T,data,v,S;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,f.prev=2,x=r.metamask.ethAccount,f.next=6,c.bulksenderInstance();case 6:return T=f.sent,data=T.methods.txFee().encodeABI(),v={method:"eth_call",params:[{from:x,to:T._address,data:data},"latest"],from:x},f.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=f.sent,S=Object(_e.hexToNumberString)(S),n("SET_TX_FEE",S),console.log("Tx fee",S),e(S),f.next=21;break;case 18:f.prev=18,f.t0=f.catch(2),k>=d?t(f.t0):m({retryAttempt:k});case 21:case"end":return f.stop()}}),f,null,[[2,18]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return ne.apply(this,arguments)}),getVIPFee:(re=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(Re.a)(regeneratorRuntime.mark((function f(l){var h,k,x,T,data,v,S;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,f.prev=2,x=r.metamask.ethAccount,f.next=6,c.bulksenderInstance();case 6:return T=f.sent,data=T.methods.VIPFee().encodeABI(),v={method:"eth_call",params:[{from:x,to:T._address,data:data},"latest"],from:x},f.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=f.sent,S=Object(_e.hexToNumberString)(S),n("SET_VIP_FEE",S),console.log("VIP fee",S),e(S),f.next=21;break;case 18:f.prev=18,f.t0=f.catch(2),k>=d?t(f.t0):m({retryAttempt:k});case 21:case"end":return f.stop()}}),f,null,[[2,18]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return re.apply(this,arguments)}),getDelegatorFee:(te=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"],f=d.rpcCallRetryAttempt,d.delegatorFeatureEnable){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new Promise((function(e,t){var m=function(){var d=Object(Re.a)(regeneratorRuntime.mark((function d(l){var h,k,x,T,data,v,S;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,d.prev=2,x=r.metamask.ethAccount,d.next=6,c.bulksenderInstance();case 6:return T=d.sent,data=T.methods.delegatorFee(x).encodeABI(),v={method:"eth_call",params:[{from:x,to:T._address,data:data},"latest"],from:x},d.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=d.sent,S=Object(_e.hexToNumberString)(S),n("SET_DELEGATOR_FEE",S),console.log("Delegator fee",S),e(S),d.next=21;break;case 18:d.prev=18,d.t0=d.catch(2),k>=f?t(d.t0):m({retryAttempt:k});case 21:case"end":return d.stop()}}),d,null,[[2,18]])})));return function(e){return d.apply(this,arguments)}}();m({})})));case 5:case"end":return e.stop()}}),e)}))),function(e){return te.apply(this,arguments)}),checkVIPStatus:(ee=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=r.walletAddress,f=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(Re.a)(regeneratorRuntime.mark((function m(l){var h,k,x,T,data,v,S;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,m.prev=2,x=n.metamask.ethAccount,m.next=6,c.bulksenderInstance();case 6:return T=m.sent,data=T.methods.isVIP(d).encodeABI(),v={method:"eth_call",params:[{from:x,to:T._address,data:data},"latest"],from:x},m.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=m.sent,S=Object(_e.hexToNumberString)(S),e(S=1==S||"1"==S),m.next=20;break;case 17:m.prev=17,m.t0=m.catch(2),k>=f?t(m.t0):r({retryAttempt:k});case 20:case"end":return m.stop()}}),m,null,[[2,17]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return ee.apply(this,arguments)}),addToVIPListByDelegator:(Z=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,d=r.walletAddress,f=n.checkSimpleTimes,c.metamask.netId,e.abrupt("return",new Promise((function(e,t){var r=function(){var l=Object(Re.a)(regeneratorRuntime.mark((function l(h){var k,x,T,v,S,A,w,data,y,O,j,R,E,_;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return k=h.retryAttempt,x=void 0===k?1:k,x++,l.prev=2,T=c.metamask.gasPrice.fast,v=c.metamask.ethAccount,l.next=7,o.bulksenderInstance();case 7:return S=l.sent,A=S._address,w=[d],data=S.methods.addToVIPListByDelegator(w).encodeABI(),y=Object(Pe.a)(n.delegatorFee).times(w.length).toString(),O=0,j={method:"eth_estimateGas",params:[{from:v,to:A,data:data,value:Object(_e.toHex)(y)}],from:v},l.next=16,m("metamask/sendAsync",j,{root:!0});case 16:return R=l.sent,O=Object(_e.hexToNumber)(R)+5e3,E={method:"eth_sendTransaction",params:[{from:v,to:A,gas:Object(_e.numberToHex)(O),gasPrice:Object(_e.toHex)(Object(_e.toWei)(T.toString(),"gwei")),value:Object(_e.toHex)(y),data:data}],from:v},l.next=21,m("_formatEIP1559Transaction",{callParams:E});case 21:return E=l.sent,l.next=24,m("metamask/sendAsync",E,{root:!0});case 24:_=l.sent,e(_),l.next=37;break;case 28:if(l.prev=28,l.t0=l.catch(2),!(x>=f||4001==l.t0.code)){l.next=34;break}t(l.t0),l.next=37;break;case 34:return l.next=36,m("checkEIP1559Error",{e:l.t0});case 36:r({retryAttempt:x});case 37:case"end":return l.stop()}}),l,null,[[2,28]])})));return function(e){return l.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return Z.apply(this,arguments)}),getReferralFee:(J=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(Re.a)(regeneratorRuntime.mark((function f(l){var h,k,x,T,data,v,S;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,f.prev=2,x=r.metamask.ethAccount,f.next=6,c.bulksenderInstance();case 6:return T=f.sent,data=T.methods.referrerFee().encodeABI(),v={method:"eth_call",params:[{from:x,to:T._address,data:data},"latest"],from:x},f.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=f.sent,S=Object(_e.hexToNumberString)(S),n("SET_REFERRAL_FEE",S),console.log("Referral reward",S),e(S),f.next=21;break;case 18:f.prev=18,f.t0=f.catch(2),k>=d?t(f.t0):m({retryAttempt:k});case 21:case"end":return f.stop()}}),f,null,[[2,18]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return J.apply(this,arguments)}),getVIPStatus:(Q=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(Re.a)(regeneratorRuntime.mark((function f(l){var h,k,x,T,data,v,S;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,f.prev=2,x=r.metamask.ethAccount,f.next=6,c.contractInstance();case 6:return T=f.sent,data=T.methods.isWhitelisted(x).encodeABI(),v={method:"eth_call",params:[{from:x,to:T._address,data:data},"latest"],from:x},f.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=f.sent,S=Object(_e.hexToNumberString)(S),n("SET_IS_VIP",S=1==S||"1"==S),console.log("VIP Status",S),e(S),f.next=22;break;case 19:f.prev=19,f.t0=f.catch(2),k>=d?t(f.t0):m({retryAttempt:k});case 22:case"end":return f.stop()}}),f,null,[[2,19]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return Q.apply(this,arguments)}),buyVIP:($=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,Object(je.a)(r),e.next=4,n("_buyVIP",{});case 4:return c=e.sent,o("SET_VIP_TX_HASH",c),o("SET_VIP_TX_STATUS",0),n("checkBulksenderVIPBuyingTransactionStatus",{txHash:c}),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),function(e,t){return $.apply(this,arguments)}),_buyVIP:(Y=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,Object(je.a)(r),d=n.checkSimpleTimes,f=c.metamask.netId,e.abrupt("return",new Promise((function(e,t){var r=function(){var l=Object(Re.a)(regeneratorRuntime.mark((function l(h){var k,x,T,v,S,A,data,w,y,O,j,R;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return k=h.retryAttempt,x=void 0===k?1:k,x++,l.prev=2,T=c.metamask.gasPrice.fast,v=c.metamask.ethAccount,l.next=7,o.bulksenderInstance();case 7:if(S=l.sent,A=S._address,data=S.methods.registerVIP().encodeABI(),w=1e5,100!=f){l.next=17;break}return y={method:"eth_estimateGas",params:[{from:v,to:A,data:data,value:Object(_e.toHex)(n.vipFee)}],from:v},l.next=15,m("metamask/sendAsync",y,{root:!0});case 15:O=l.sent,w=Object(_e.hexToNumber)(O)+5e3;case 17:return j={method:"eth_sendTransaction",params:[{from:v,to:A,gas:Object(_e.numberToHex)(w),gasPrice:Object(_e.toHex)(Object(_e.toWei)(T.toString(),"gwei")),value:Object(_e.toHex)(n.vipFee),data:data}],from:v},l.next=20,m("_formatEIP1559Transaction",{callParams:j});case 20:return j=l.sent,l.next=23,m("metamask/sendAsync",j,{root:!0});case 23:R=l.sent,e(R),l.next=36;break;case 27:if(l.prev=27,l.t0=l.catch(2),!(x>=d||4001==l.t0.code)){l.next=33;break}t(l.t0),l.next=36;break;case 33:return l.next=35,m("checkEIP1559Error",{e:l.t0});case 35:r({retryAttempt:x});case 36:case"end":return l.stop()}}),l,null,[[2,27]])})));return function(e){return l.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return Y.apply(this,arguments)}),callTesting:(z=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,n=t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,m=r.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var d=Object(Re.a)(regeneratorRuntime.mark((function d(f){var l,h,k,x,T,v,S,A;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return l=f.retryAttempt,h=void 0===l?1:l,h++,d.prev=2,k=o.metamask.gasPrice.fast,x=o.metamask.ethAccount,d.next=7,n.bulksenderInstance();case 7:return T=d.sent,v=T._address,S={method:"eth_sendTransaction",params:[{from:x,to:v,gas:Object(_e.numberToHex)(3e5),gasPrice:Object(_e.toHex)(Object(_e.toWei)(k.toString(),"gwei")),value:Object(_e.toHex)(0),data:"0xf14d7006000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000001000000000000000000000000f5c8c9e0349cd9544cb3c0a0254dbfd890a3d7af00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000002276193e524000"}],from:x},d.next=13,c("metamask/sendAsync",S,{root:!0});case 13:A=d.sent,e(A),d.next=20;break;case 17:d.prev=17,d.t0=d.catch(2),h>=m||4001==d.t0.code?t(d.t0):r({retryAttempt:h});case 20:case"end":return d.stop()}}),d,null,[[2,17]])})));return function(e){return d.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return z.apply(this,arguments)}),_initBulksender:(W=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,Object(je.a)(r),d=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(Re.a)(regeneratorRuntime.mark((function n(f){var l,h,k,x,T,v,data,S,A;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=f.retryAttempt,h=void 0===l?1:l,h++,n.prev=2,k=c.metamask.gasPrice.fast,x=c.metamask.ethAccount,n.next=7,o.bulksenderInstance();case 7:return T=n.sent,v=T._address,data=T.methods.initialize("0x3de332e44a0bbff025838c187873d77f92caf5e9").encodeABI(),S={method:"eth_sendTransaction",params:[{from:x,to:v,gas:Object(_e.numberToHex)(3e6),gasPrice:Object(_e.toHex)(Object(_e.toWei)(k.toString(),"gwei")),value:Object(_e.toHex)(0),data:data}],from:x},n.next=14,m("metamask/sendAsync",S,{root:!0});case 14:A=n.sent,e(A),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(2),h>=d||4001==n.t0.code?t(n.t0):r({retryAttempt:h});case 21:case"end":return n.stop()}}),n,null,[[2,18]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return W.apply(this,arguments)}),_addVIPs:(M=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,Object(je.a)(r),d=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(Re.a)(regeneratorRuntime.mark((function n(f){var l,h,k,x,T,v,S,data,A,w;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=f.retryAttempt,h=void 0===l?1:l,h++,n.prev=2,k=c.metamask.gasPrice.fast,x=c.metamask.ethAccount,n.next=7,o.bulksenderInstance();case 7:return T=n.sent,v=T._address,S=["0x09D3cdE30Eb6041b059f061bfD4cbf3D1f1333BD"],data=T.methods.removeFromVIPList(S).encodeABI(),A={method:"eth_sendTransaction",params:[{from:x,to:v,gas:Object(_e.numberToHex)(1e5),gasPrice:Object(_e.toHex)(Object(_e.toWei)(k.toString(),"gwei")),value:Object(_e.toHex)(0),data:data}],from:x},n.next=14,m("metamask/sendAsync",A,{root:!0});case 14:w=n.sent,e(w),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(2),h>=d||4001==n.t0.code?t(n.t0):r({retryAttempt:h});case 21:case"end":return n.stop()}}),n,null,[[2,18]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return M.apply(this,arguments)}),_bulksendToken:(X=Object(Re.a)(regeneratorRuntime.mark((function t(r,n){var o,c,m,d,f,l,h,k,x,T,v,S,A,w,y,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.state,c=r.getters,m=r.rootState,r.rootGetters,d=r.dispatch,f=r.commit,l=n.uniqueId,h=n.tokenAddress,k=n.estimateGas,x=void 0===k?0:k,T=n.decimals,v=n.addresses,S=n.amounts,A=n.nonce,w=void 0===A?0:A,y=o.checkSimpleTimes,o.usedBurnerKey&&(y*=1e4),O=function(time){return new Promise((function(e){return setTimeout(e,time)}))},t.abrupt("return",new Promise((function(t,r){var n=function(){var k=Object(Re.a)(regeneratorRuntime.mark((function k(A){var j,R,E,_,I,F,P,address,B,G,L,D,C,data,H,U,N,K,V,s,X,M,W,z,Y,$,Q,J,Z,ee;return regeneratorRuntime.wrap((function(k){for(;;)switch(k.prev=k.next){case 0:return j=A.retryAttempt,R=void 0===j?1:j,R++,k.prev=2,E=m.metamask,_=E.ethAccount,E.networkBaseFee,k.next=6,c.bulksenderInstance();case 6:return I=k.sent,F=I._address,P=Object(_e.asciiToHex)(l),address=o.referralAddress,k.next=12,d("common/checkAddressIsValid",{address:address},{root:!0});case 12:if(B=k.sent,G=Object(Pe.a)("0"),L=[],S.forEach((function(e){var t=Object(Pe.a)(e).times(Object(Pe.a)(10).pow(parseInt(T)));G=G.plus(t),L.push(t.toString(10))})),D=G.toString(10),L.unshift(D),(C=[].concat(v)).unshift(F),data="0x",!o.usedBurnerKey){k.next=44;break}return H=o.burnerKey,U=o.burner,N=o.burnerSignature,K=N.v,V=N.r,s=N.s,o.simple&&(B=!1),data=B?I.methods.bulksendTokenForBurners(h,C,L,P,o.simple,U,K,V,s,o.referralAddress).encodeABI():I.methods.bulksendTokenForBurners(h,C,L,P,o.simple,U,K,V,s).encodeABI(),k.next=30,d("getChainId");case 30:return X=k.sent,M=e.from(H.privateKey.replace("0x",""),"hex"),W={nonce:Object(_e.numberToHex)(w),gasPrice:Object(_e.toHex)(Object(_e.toWei)(o.gasPrice.toString(),"gwei")),gasLimit:Object(_e.numberToHex)(x+o.commonExtraGas+o.delegaterExtraGas),to:F,value:Object(_e.toHex)(c.txFee),data:data,chainId:X},(z=new Ge(W)).sign(M),Y=z.serialize(),$="0x"+Y.toString("hex"),Q={method:"eth_sendRawTransaction",params:[$]},k.next=40,d("metamask/sendAsync",Q,{root:!0});case 40:J=k.sent,t(J),k.next=66;break;case 44:if(!o.simple){k.next=53;break}if(data=(B=!1)?I.methods.bulksendTokenSimple(h,C,L,P,o.referralAddress).encodeABI():I.methods.bulksendTokenSimple(h,C,L,P).encodeABI(),0!=x){k.next=51;break}return k.next=50,I.methods.bulksendTokenSimple(h,C,L,P).estimateGas({from:_,value:Object(_e.toHex)(c.txFee)});case 50:x=k.sent;case 51:k.next=58;break;case 53:if(data=B?I.methods.bulksendToken(h,C,L,P,o.referralAddress).encodeABI():I.methods.bulksendToken(h,C,L,P).encodeABI(),0!=x){k.next=58;break}return k.next=57,I.methods.bulksendToken(h,C,L,P).estimateGas({from:_,value:Object(_e.toHex)(c.txFee)});case 57:x=k.sent;case 58:return Z={method:"eth_sendTransaction",params:[{from:_,to:F,gas:Object(_e.numberToHex)(x+o.commonExtraGas),gasPrice:Object(_e.toHex)(Object(_e.toWei)(o.gasPrice.toString(),"gwei")),value:Object(_e.toHex)(c.txFee),data:data}],from:_},k.next=61,d("_formatEIP1559Transaction",{callParams:Z});case 61:return Z=k.sent,k.next=64,d("metamask/sendAsync",Z,{root:!0});case 64:ee=k.sent,t(ee);case 66:console.log("bulksend tx",x),k.next=83;break;case 69:if(k.prev=69,k.t0=k.catch(2),console.info(k.t0),!(R>=y||4001==k.t0.code)){k.next=77;break}f("ADD_FAILED_TXS",""),4001==k.t0.code?t(o.userDeniedTransactionMessage):r(k.t0),k.next=83;break;case 77:if(!o.usedBurnerKey){k.next=80;break}return k.next=80,O(300);case 80:return k.next=82,d("checkEIP1559Error",{e:k.t0});case 82:n({retryAttempt:R});case 83:case"end":return k.stop()}}),k,null,[[2,69]])})));return function(e){return k.apply(this,arguments)}}();n({})})));case 6:case"end":return t.stop()}}),t)}))),function(e,t){return X.apply(this,arguments)}),_formatEIP1559Transaction:(V=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,t.dispatch,t.commit,c=r.callParams,e.prev=2,m=o.metamask,d=m.supportEIP1559,f=m.networkBaseFee,d&&n.walletSupportEIP1559&&(l=c.params[0],(h=l.gasPrice)&&(h=Object(_e.hexToNumberString)(h),h=Object(_e.fromWei)(h,"gwei")),delete l.gasPrice,k=h,(x=Object(Pe.a)(k).minus(Object(Pe.a)(f)).toNumber())<.01&&(x=.01),l.maxFeePerGas=Object(_e.toHex)(Object(_e.toWei)(k.toString(),"gwei")),l.maxPriorityFeePerGas=Object(_e.toHex)(Object(_e.toWei)(x.toString(),"gwei")),c.params=[l]),e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(2),console.info(e.t0);case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,null,[[2,8]])}))),function(e,t){return V.apply(this,arguments)}),checkEIP1559Error:(K=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,t.rootState,t.rootGetters,t.dispatch,n=t.commit,o=r.e,e.prev=2,!o.message||!o.message.includes("not support EIP-1559")){e.next=6;break}return n("SET_WALLET_SUPPORT_EIP1559",!1),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(2),console.info(e.t0);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e,t){return K.apply(this,arguments)}),_bulksendTokenForNFT:(N=Object(Re.a)(regeneratorRuntime.mark((function t(r,n){var o,c,m,d,f,l,h,k,x,T,v,S,A,w,y,O,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.state,c=r.getters,m=r.rootState,r.rootGetters,d=r.dispatch,f=r.commit,l=n.uniqueId,h=n.tokenAddress,k=n.estimateGas,x=void 0===k?0:k,T=n.decimals,v=n.addresses,S=n.amounts,A=n.tokenIds,w=n.nonce,y=void 0===w?0:w,O=o.checkSimpleTimes,o.usedBurnerKey&&(O*=1e4),j=function(time){return new Promise((function(e){return setTimeout(e,time)}))},t.abrupt("return",new Promise((function(t,r){var n=function(){var k=Object(Re.a)(regeneratorRuntime.mark((function k(w){var R,E,_,I,F,P,B,address,G,L,D,C,H,U,data,N,K,V,X,M,s,W,z,Y,$,Q,J,Z,ee,te,re;return regeneratorRuntime.wrap((function(k){for(;;)switch(k.prev=k.next){case 0:return R=w.retryAttempt,E=void 0===R?1:R,E++,k.prev=2,_=m.metamask.ethAccount,k.next=6,c.bulksenderInstance();case 6:return I=k.sent,F=I._address,P=Object(_e.asciiToHex)(l),k.next=11,d("getNFTActionType");case 11:return B=k.sent,address=o.referralAddress,k.next=15,d("common/checkAddressIsValid",{address:address},{root:!0});case 15:if(k.sent,G=Object(Pe.a)("0"),L=[],D=[],S.forEach((function(e){var t=Object(Pe.a)(e).times(Object(Pe.a)(10).pow(parseInt(T)));G=G.plus(t),L.push(t.toString(10))})),A.forEach((function(e){D.push(Object(Pe.a)(e).toString(10))})),C=G.toString(10),H=Object(Pe.a)(A.length).toString(10),D.unshift(H),L.unshift(C),(U=[].concat(v)).unshift(F),data="0x",!o.usedBurnerKey){k.next=51;break}return N=o.burnerKey,K=o.burner,V=o.burnerSignature,X=V.v,M=V.r,s=V.s,data=I.methods.bulksendNFTTokenForBurners(h,U,D,L,B,P,o.referralAddress,K,X,M,s).encodeABI(),k.next=37,d("getChainId");case 37:return W=k.sent,z=e.from(N.privateKey.replace("0x",""),"hex"),Y={nonce:Object(_e.numberToHex)(y),gasPrice:Object(_e.toHex)(Object(_e.toWei)(o.gasPrice.toString(),"gwei")),gasLimit:Object(_e.numberToHex)(x+o.commonExtraGas+o.delegaterExtraGas),to:F,value:Object(_e.toHex)(c.txFee),data:data,chainId:W},($=new Ge(Y)).sign(z),Q=$.serialize(),J="0x"+Q.toString("hex"),Z={method:"eth_sendRawTransaction",params:[J]},k.next=47,d("metamask/sendAsync",Z,{root:!0});case 47:ee=k.sent,t(ee),k.next=64;break;case 51:if(data=I.methods.bulksendNFTToken(h,U,D,L,B,P,o.referralAddress).encodeABI(),0!=x){k.next=56;break}return k.next=55,I.methods.bulksendNFTToken(h,U,D,L,B,P,o.referralAddress).estimateGas({from:_,value:Object(_e.toHex)(c.txFee)});case 55:x=k.sent;case 56:return te={method:"eth_sendTransaction",params:[{from:_,to:F,gas:Object(_e.numberToHex)(x+o.commonExtraGas),gasPrice:Object(_e.toHex)(Object(_e.toWei)(o.gasPrice.toString(),"gwei")),value:Object(_e.toHex)(c.txFee),data:data}],from:_},k.next=59,d("_formatEIP1559Transaction",{callParams:te});case 59:return te=k.sent,k.next=62,d("metamask/sendAsync",te,{root:!0});case 62:re=k.sent,t(re);case 64:console.log("bulksend tx",x),k.next=81;break;case 67:if(k.prev=67,k.t0=k.catch(2),console.info(k.t0),!(E>=O||4001==k.t0.code)){k.next=75;break}f("ADD_FAILED_TXS",""),4001==k.t0.code?t(o.userDeniedTransactionMessage):r(k.t0),k.next=81;break;case 75:if(!o.usedBurnerKey){k.next=78;break}return k.next=78,j(300);case 78:return k.next=80,d("checkEIP1559Error",{e:k.t0});case 80:n({retryAttempt:E});case 81:case"end":return k.stop()}}),k,null,[[2,67]])})));return function(e){return k.apply(this,arguments)}}();n({})})));case 6:case"end":return t.stop()}}),t)}))),function(e,t){return N.apply(this,arguments)}),lockToken:(U=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,t.commit,o=r.tokenAddress,c=r.isLP,m=r.estimateGas,d=void 0===m?0:m,f=r.lockForm,l=void 0===f?{}:f,h=r.referral,k=void 0===h?null:h,e.next=4,n("_lockToken",{tokenAddress:o,isLP:c,estimateGas:d,lockForm:l,referral:k});case 4:if(null==(x=e.sent)||null==x){e.next=11;break}return console.info("txHash",x),e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)}))),function(e,t){return U.apply(this,arguments)}),_lockToken:(H=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v,S,A,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.isLP,k=r.estimateGas,x=void 0===k?0:k,T=r.lockForm,v=void 0===T?{}:T,S=r.referral,A=void 0===S?null:S,w=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var k=Object(Re.a)(regeneratorRuntime.mark((function k(T){var S,y,O,j,R,E,_,I,data,F,P,B,G;return regeneratorRuntime.wrap((function(k){for(;;)switch(k.prev=k.next){case 0:return S=T.retryAttempt,y=void 0===S?1:S,y++,k.prev=2,O=c.metamask,j=O.ethAccount,O.netId,k.next=6,o.contractInstance();case 6:if(R=k.sent,E=R._address,_=Object(Pe.a)("0"),I=_.plus(Object(Pe.a)(o.txFee)).toString(10),A||(A="0x0000000000000000000000000000000000000000"),h?(F=R.methods.lockLPToken(l,v.lockAmount,v.unlockTimestamp,A,v.unlocker),data=F.encodeABI()):(F=R.methods.lockToken(l,v.lockAmount,v.unlockTimestamp,A,v.unlocker),data=F.encodeABI()),0!=x){k.next=16;break}return k.next=15,F.estimateGas({from:j,value:Object(_e.toHex)(I)});case 15:x=k.sent;case 16:return(P=m["metamask/networkConfig"].ethTransferExtraGasRatio)&&P>0&&(x=parseInt(x*P)),console.log("bulksend tx",x),B={method:"eth_sendTransaction",params:[{from:j,to:E,gas:Object(_e.numberToHex)(x+n.commonExtraGas),gasPrice:Object(_e.toHex)(Object(_e.toWei)(n.gasPrice.toString(),"gwei")),value:Object(_e.toHex)(I),data:data}],from:j},k.next=22,d("_formatEIP1559Transaction",{callParams:B});case 22:return B=k.sent,k.next=25,d("metamask/sendAsync",B,{root:!0});case 25:G=k.sent,e(G),k.next=40;break;case 29:if(k.prev=29,k.t0=k.catch(2),console.info(k.t0),!(y>=w||4001==k.t0.code)){k.next=37;break}f("ADD_FAILED_TXS",""),4001==k.t0.code?e(n.userDeniedTransactionMessage):t(k.t0),k.next=40;break;case 37:return k.next=39,d("checkEIP1559Error",{e:k.t0});case 39:r({retryAttempt:y});case 40:case"end":return k.stop()}}),k,null,[[2,29]])})));return function(e){return k.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return H.apply(this,arguments)}),bulksendToken:(C=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v,S,A,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,t.rootState,n=t.rootGetters,o=t.dispatch,c=t.commit,m=r.uniqueId,d=r.estimateGas,f=void 0===d?0:d,l=r.tokenAddress,h=r.decimals,k=r.addresses,x=r.amounts,T=r.tokenIds,v=r.nonce,S=void 0===v?0:v,A=n["token/isNFTToken"],w=void 0,!A){e.next=10;break}return e.next=7,o("_bulksendTokenForNFT",{uniqueId:m,tokenAddress:l,estimateGas:f,decimals:h,addresses:k,amounts:x,tokenIds:T,nonce:S});case 7:w=e.sent,e.next=13;break;case 10:return e.next=12,o("_bulksendToken",{uniqueId:m,tokenAddress:l,estimateGas:f,decimals:h,addresses:k,amounts:x,nonce:S});case 12:w=e.sent;case 13:if(null==w||null==w){e.next=22;break}return console.info("txHash",w),c("ADD_TX",w),o("common/updateBulkSentStatus",{status:0,txHash:w,uniqueId:m},{root:!0}),o("checkBulksenderTransactionStatus",{uniqueId:m,txHash:w}),e.abrupt("return",!0);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)}))),function(e,t){return C.apply(this,arguments)}),bulksendEther:(D=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,c=r.uniqueId,m=r.estimateGas,d=void 0===m?0:m,f=r.tokenAddress,l=r.decimals,h=r.addresses,k=r.amounts,e.next=4,n("_bulksendEther",{uniqueId:c,tokenAddress:f,estimateGas:d,decimals:l,addresses:h,amounts:k});case 4:if("User denied transaction signature."==(x=e.sent)){e.next=14;break}return console.info("txHash",x),o("ADD_TX",x),n("common/updateBulkSentStatus",{status:0,txHash:x,uniqueId:c},{root:!0}),n("checkBulksenderTransactionStatus",{uniqueId:c,txHash:x}),e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)}))),function(e,t){return D.apply(this,arguments)}),_bulksendEther:(L=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.uniqueId,r.tokenAddress,h=r.estimateGas,k=void 0===h?0:h,x=r.decimals,T=r.addresses,v=r.amounts,S=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var h=Object(Re.a)(regeneratorRuntime.mark((function h(A){var w,y,O,j,R,E,_,I,F,P,B,G,L,data,D,C,H;return regeneratorRuntime.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return w=A.retryAttempt,y=void 0===w?1:w,y++,h.prev=2,O=c.metamask,j=O.ethAccount,R=O.netId,h.next=6,o.bulksenderInstance();case 6:if(E=h.sent,_=E._address,I=Object(_e.asciiToHex)(l),F=Object(Pe.a)("0"),P=[],v.forEach((function(e){var t=Object(Pe.a)(e).times(Object(Pe.a)(10).pow(parseInt(x)));F=F.plus(t),P.push(t.toString(10))})),B=F.toString(10),P.unshift(B),(G=[].concat(T)).unshift(_),L=F.plus(Object(Pe.a)(o.txFee)).toString(10),data=E.methods.bulksendEther(G,P,I).encodeABI(),29!=R&&(k=0),0!=k){h.next=23;break}return h.next=22,E.methods.bulksendEther(G,P,I).estimateGas({from:j,value:Object(_e.toHex)(L)});case 22:k=h.sent;case 23:return(D=m["metamask/networkConfig"].ethTransferExtraGasRatio)&&D>0&&(k=parseInt(k*D)),console.log("bulksend tx",k),C={method:"eth_sendTransaction",params:[{from:j,to:_,gas:Object(_e.numberToHex)(k+n.commonExtraGas),gasPrice:Object(_e.toHex)(Object(_e.toWei)(n.gasPrice.toString(),"gwei")),value:Object(_e.toHex)(L),data:data}],from:j},h.next=29,d("_formatEIP1559Transaction",{callParams:C});case 29:return C=h.sent,h.next=32,d("metamask/sendAsync",C,{root:!0});case 32:H=h.sent,e(H),h.next=47;break;case 36:if(h.prev=36,h.t0=h.catch(2),console.info(h.t0),!(y>=S||4001==h.t0.code)){h.next=44;break}f("ADD_FAILED_TXS",""),4001==h.t0.code?e(n.userDeniedTransactionMessage):t(h.t0),h.next=47;break;case 44:return h.next=46,d("checkEIP1559Error",{e:h.t0});case 46:r({retryAttempt:y});case 47:case"end":return h.stop()}}),h,null,[[2,36]])})));return function(e){return h.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return L.apply(this,arguments)}),estimateGasForPerTransferUsedBulksender:(G=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,t.rootState,o=t.rootGetters,c=t.dispatch,t.commit,m=r.tokenAddress,d=r.testAddresses,f=r.testBalances,l=r.testTokenIds,e.prev=2,h=d,k=f,"0x0000000000000000000000000000000000000000"!=m){e.next=10;break}return e.next=8,c("estimateGasForPerEtherTransfer",{tokenAddress:m,addresses:h,balances:k});case 8:return x=e.sent,e.abrupt("return",x+n.etherDelegateCallExtraGas);case 10:if(!o["token/isNFTToken"]){e.next=17;break}return T=l,e.next=15,c("estimateGasForPerNFTTokenTransfer",{tokenAddress:m,addresses:h,balances:k,tokenIds:T});case 15:return v=e.sent,e.abrupt("return",v);case 17:return e.next=19,c("estimateGasForPerTokenTransfer",{tokenAddress:m,addresses:h,balances:k});case 19:return S=e.sent,e.abrupt("return",S);case 23:if(e.prev=23,e.t0=e.catch(2),console.info("estimateGasForPerTransferUsedBulksender",e.t0),"0x0000000000000000000000000000000000000000"!=m){e.next=28;break}return e.abrupt("return",5e4);case 28:return e.abrupt("return",-1);case 29:case"end":return e.stop()}}),e,null,[[2,23]])}))),function(e,t){return G.apply(this,arguments)}),validateBatchAgain:(B=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,t.rootState,n=t.rootGetters,o=t.dispatch,t.commit,c=r.tokenAddress,m=r.addresses,d=r.amounts,r.tokenIds,e.prev=2,f=n["token/isNFTToken"],"0x0000000000000000000000000000000000000000"==c||f){e.next=8;break}return l=d,e.next=8,o("estimateGasForBatchTokenTransfer",{tokenAddress:c,addresses:m,balances:l});case 8:return e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),function(e,t){return B.apply(this,arguments)}),estimateGasForBatchTransfer:(P=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,t.commit,d=r.tokenAddress,f=r.addresses,l=r.amounts,h=r.tokenIds,e.prev=2,k=l,"0x0000000000000000000000000000000000000000"!=d){e.next=15;break}if(29!=o.metamask.netId){e.next=8;break}return e.abrupt("return",4e7);case 8:return e.next=10,m("estimateGasForBatchEtherTransfer",{tokenAddress:d,addresses:f,balances:k});case 10:if(x=e.sent,!((T=c["metamask/networkConfig"].ethTransferExtraGasRatio)&&T>0)){e.next=14;break}return e.abrupt("return",parseInt((x+n.etherDelegateCallExtraGas)*T));case 14:return e.abrupt("return",x+n.etherDelegateCallExtraGas);case 15:if(!c["token/isNFTToken"]){e.next=21;break}return e.next=19,m("estimateGasForBatchNFTTokenTransfer",{tokenAddress:d,addresses:f,balances:k,tokenIds:h});case 19:return v=e.sent,e.abrupt("return",v);case 21:return e.next=23,m("estimateGasForBatchTokenTransfer",{tokenAddress:d,addresses:f,balances:k});case 23:return S=e.sent,e.abrupt("return",S);case 27:if(e.prev=27,e.t0=e.catch(2),console.info("estimateGasForBatchTransferUsedBulksender",e.t0),"0x0000000000000000000000000000000000000000"!=d){e.next=32;break}return e.abrupt("return",5e4);case 32:return e.abrupt("return",-1);case 33:case"end":return e.stop()}}),e,null,[[2,27]])}))),function(e,t){return P.apply(this,arguments)}),estimateBulksendSize:(F=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,t.rootState,t.rootGetters,o=t.dispatch,t.commit,c=r.tokenAddress,m=r.testAddresses,d=r.testBalances,e.prev=2,"0x0000000000000000000000000000000000000000"!=c){e.next=5;break}return e.abrupt("return",n.etherBatchSize);case 5:return f=m,l=d,e.next=9,o("estimateGasForPerTransfer",{tokenAddress:c,addresses:f,balances:l});case 9:return h=e.sent,k=parseInt(n.maxGasUsed/parseFloat(h)),n.simple,e.abrupt("return",k);case 15:return e.prev=15,e.t0=e.catch(2),console.info(e.t0),e.abrupt("return",0);case 19:case"end":return e.stop()}}),e,null,[[2,15]])}))),function(e,t){return F.apply(this,arguments)}),estimateGasForPerTokenTransferV2:(I=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v,S,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,k=r.balances,(x=m["metamask/networkConfig"]).newEstimatedMethod,null==(T=x.blockConfig)&&(T=n.defaultBlockConfig),v=n.checkSimpleTimes+2,(S=m["metamask/networkConfig"]).specialTokenList,A=S.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(Re.a)(regeneratorRuntime.mark((function m(x){var S,w,y,O,j,R,E,_,I,F,P,B,G,L,D,C,H,U,N,K,V,X,M,W,z,Y,$,Q,J,Z,ee,te,re,ne;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return S=x.retryAttempt,w=void 0===S?0:S,w++,m.prev=2,y=n.simple,O=c.metamask.ethAccount,(j=c.token).allowance,R=j.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return E=m.sent,_=E._address,I=R.decimals,F=Object(Pe.a)("0"),B=[],(P=h).forEach((function(e,t){var r=k[t],n=Object(Pe.a)(r).times(Object(Pe.a)(10).pow(I));B.push(n.toString(10)),F=F.plus(n)})),G=F.toString(10),m.next=18,d("createNewUniqueId");case 18:return L=m.sent,D=[_],C=[G],(A.includes(O)||A.includes(l))&&f("SET_SIMPLE",y=!0),H=0,U="0x",U=y?E.methods.bulksendTokenSimple(l,D,C,L).encodeABI():E.methods.bulksendToken(l,D,C,L).encodeABI(),N={method:"eth_estimateGas",params:[{from:O,to:_,data:U,value:Object(_e.toHex)(Object(Pe.a)(o.txFee).toString(10)),gasLimit:Object(_e.toHex)(T.maxGasUsed)}],from:O},m.next=28,d("metamask/sendAsync",N,{root:!0});case 28:return H=m.sent,H=Object(_e.hexToNumber)(H),K=Object(_e.hexToBytes)(U).length,V=E.methods.estimatedERC20TransferGasCost(l,[],[],G,y).encodeABI(),X={method:"eth_call",params:[{from:O,to:_,data:V,value:Object(_e.toHex)(Object(Pe.a)(o.txFee).toString(10)),gasLimit:Object(_e.toHex)(T.maxGasUsed)}],from:O},m.next=35,d("metamask/sendAsync",X,{root:!0});case 35:return M=m.sent,W=Le.decodeParameters([{name:"gasLeftForBase",type:"uint256"}],M),z=W.gasLeftForBase,console.info("gasLeftForBase",z),M=T.maxGasUsed-z,console.info("gasUsedForBase",M),Y=0,$="0x",D=D.concat(P),C=C.concat(B),$=E.methods.estimatedERC20TransferGasCost(l,P,B,G,y).encodeABI(),Q={method:"eth_call",params:[{from:O,to:_,data:$,value:Object(_e.toHex)(Object(Pe.a)(o.txFee).toString(10)),gas:Object(_e.toHex)(T.maxGasUsed)}],from:O},m.next=48,d("metamask/sendAsync",Q,{root:!0});case 48:if(Y=m.sent,J=Le.decodeParameters([{name:"gasLeft",type:"uint256"}],Y),Z=J.gasLeft,console.info(Z),Y=T.maxGasUsed-Z,console.info(Y),0!=H&&0!=Y){m.next=55;break}throw Error("EstimateGasForPerTransfer failed");case 55:try{h=new Set(h),h=Array.from(h)}catch(e){}ee=Object(_e.hexToBytes)($).length,te=parseInt((ee-K)/parseFloat(h.length)),console.info("baseGas",H),re=parseInt((Y-M)/parseFloat(h.length)),(ne=parseInt(n.maxGasUsed/parseFloat(re)))*te>1024*n.maxBlockByteSizeKB&&(ne=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(te)),re=parseInt(n.maxGasUsed/parseFloat(ne))),f("SET_BASE_CALLING_GAS",H),e(re),m.next=72;break;case 68:m.prev=68,m.t0=m.catch(2),console.info("estimateGasForPerTokenTransfer",m.t0),w>=v?t(m.t0):r({retryAttempt:w});case 72:case"end":return m.stop()}}),m,null,[[2,68]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return I.apply(this,arguments)}),estimateGasForPerTokenTransfer:(_=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,k=r.balances,x=n.checkSimpleTimes+2,(T=m["metamask/networkConfig"]).specialTokenList,v=T.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(Re.a)(regeneratorRuntime.mark((function m(T){var S,A,w,y,O,j,R,E,_,I,F,P,B,G,L,D,C,H,U,N,K,V,X,M,W,z,Y;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return S=T.retryAttempt,A=void 0===S?0:S,A++,m.prev=2,w=n.simple,y=c.metamask.ethAccount,(O=c.token).allowance,j=O.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return R=m.sent,E=R._address,_=j.decimals,I=Object(Pe.a)("0"),P=[],(F=h).forEach((function(e,t){var r=k[t],n=Object(Pe.a)(r).times(Object(Pe.a)(10).pow(_));P.push(n.toString(10)),I=I.plus(n)})),B=I.toString(10),m.next=18,d("createNewUniqueId");case 18:return G=m.sent,L=[E],D=[B],(v.includes(y)||v.includes(l))&&f("SET_SIMPLE",w=!0),C=0,H="0x",H=w?R.methods.bulksendTokenSimple(l,L,D,G).encodeABI():R.methods.bulksendToken(l,L,D,G).encodeABI(),U={method:"eth_estimateGas",params:[{from:y,to:E,data:H,value:Object(_e.toHex)(Object(Pe.a)(o.txFee).toString(10))}],from:y},m.next=28,d("metamask/sendAsync",U,{root:!0});case 28:return C=m.sent,C=Object(_e.hexToNumber)(C),N=Object(_e.hexToBytes)(H).length,K=0,V="0x",L=L.concat(F),D=D.concat(P),V=w?R.methods.bulksendTokenSimple(l,L,D,G).encodeABI():R.methods.bulksendToken(l,L,D,G).encodeABI(),X={method:"eth_estimateGas",params:[{from:y,to:E,data:V,value:Object(_e.toHex)(Object(Pe.a)(o.txFee).toString(10))}],from:y},m.next=39,d("metamask/sendAsync",X,{root:!0});case 39:if(K=m.sent,K=Object(_e.hexToNumber)(K),0!=C&&0!=K){m.next=43;break}throw Error("EstimateGasForPerTransfer failed");case 43:try{h=new Set(h),h=Array.from(h)}catch(e){}M=Object(_e.hexToBytes)(V).length,W=parseInt((M-N)/parseFloat(h.length)),z=parseInt((K-C)/parseFloat(h.length)),(Y=parseInt(n.maxGasUsed/parseFloat(z)))*W>1024*n.maxBlockByteSizeKB&&(Y=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(W)),z=parseInt(n.maxGasUsed/parseFloat(Y))),f("SET_BASE_CALLING_GAS",C),e(z),m.next=59;break;case 55:m.prev=55,m.t0=m.catch(2),console.info("estimateGasForPerTokenTransfer",m.t0),A>=x?t(m.t0):r({retryAttempt:A});case 59:case"end":return m.stop()}}),m,null,[[2,55]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)}),estimateGasForBatchTokenTransfer:(E=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,k=r.balances,x=n.checkSimpleTimes+2,(T=m["metamask/networkConfig"]).specialTokenList,v=T.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(Re.a)(regeneratorRuntime.mark((function m(T){var S,A,w,y,O,j,R,E,_,I,F,P,B,G,L,D,C,H,U;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return S=T.retryAttempt,A=void 0===S?0:S,A++,m.prev=2,w=n.simple,y=c.metamask.ethAccount,(O=c.token).allowance,j=O.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return R=m.sent,E=R._address,_=j.decimals,I=Object(Pe.a)("0"),P=[],(F=h).forEach((function(e,t){var r=k[t],n=Object(Pe.a)(r).times(Object(Pe.a)(10).pow(_));P.push(n.toString(10)),I=I.plus(n)})),B=I.toString(10),m.next=18,d("createNewUniqueId");case 18:return G=m.sent,L=[E],D=[B],(v.includes(y)||v.includes(l))&&f("SET_SIMPLE",w=!0),C=0,H="0x",L=L.concat(F),D=D.concat(P),H=w?R.methods.bulksendTokenSimple(l,L,D,G).encodeABI():R.methods.bulksendToken(l,L,D,G).encodeABI(),U={method:"eth_estimateGas",params:[{from:y,to:E,data:H,value:Object(_e.toHex)(Object(Pe.a)(o.txFee).toString(10))}],from:y},m.next=30,d("metamask/sendAsync",U,{root:!0});case 30:C=m.sent,C=Object(_e.hexToNumber)(C),e(C),m.next=39;break;case 35:m.prev=35,m.t0=m.catch(2),console.info("estimateGasForBatchTokenTransfer",m.t0),A>=x?t(m.t0):r({retryAttempt:A});case 39:case"end":return m.stop()}}),m,null,[[2,35]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return E.apply(this,arguments)}),estimateGasForPerNFTTokenTransfer:(R=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,k=r.balances,x=r.tokenIds,T=n.checkSimpleTimes+2,(v=m["metamask/networkConfig"]).specialTokenList,v.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(Re.a)(regeneratorRuntime.mark((function m(v){var S,A,w,y,O,j,R,E,_,I,F,P,B,G,L,D,C,H,U,N,K,V,X,M,W,z,Y,$,Q,J;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return S=v.retryAttempt,A=void 0===S?0:S,A++,m.prev=2,n.simple,w=c.metamask.ethAccount,(y=c.token).allowance,O=y.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return j=m.sent,R=j._address,E=O.decimals,_=Object(Pe.a)("0"),F=[],P=[],(I=h).forEach((function(e,t){var r=k[t],n=x[t],o=Object(Pe.a)(r).times(Object(Pe.a)(10).pow(E));F.push(o.toString(10)),_=_.plus(o),P.push(Object(Pe.a)(n).toString(10))})),B=_.toString(10),m.next=19,d("createNewUniqueId");case 19:return G=m.sent,m.next=22,d("getNFTActionType");case 22:return L=m.sent,D=Object(Pe.a)(x.length).toString(10),C=[R],H=[B],U=[D],N=0,K=j.methods.bulksendNFTToken(l,C,U,H,L,G,w).encodeABI(),V={method:"eth_estimateGas",params:[{from:w,to:R,data:K,value:Object(_e.toHex)(Object(Pe.a)(o.txFee).toString(10))}],from:w},m.next=32,d("metamask/sendAsync",V,{root:!0});case 32:return N=m.sent,N=Object(_e.hexToNumber)(N),X=Object(_e.hexToBytes)(K).length,M=0,C=C.concat(I),H=H.concat(F),U=U.concat(P),W=j.methods.bulksendNFTToken(l,C,U,H,L,G,w).encodeABI(),z={method:"eth_estimateGas",params:[{from:w,to:R,data:W,value:Object(_e.toHex)(Object(Pe.a)(o.txFee).toString(10))}],from:w},m.next=43,d("metamask/sendAsync",z,{root:!0});case 43:if(M=m.sent,M=Object(_e.hexToNumber)(M),0!=N&&0!=M){m.next=47;break}throw Error("EstimateGasForPerTransfer failed");case 47:Y=Object(_e.hexToBytes)(W).length,$=parseInt((Y-X)/parseFloat(h.length)),Q=parseInt((M-N)/parseFloat(h.length)),(J=parseInt(n.maxGasUsed/parseFloat(Q)))*$>1024*n.maxBlockByteSizeKB&&(J=parseInt(1024*n.maxBlockByteSizeKB/parseFloat($)),Q=parseInt(n.maxGasUsed/parseFloat(J))),f("SET_BASE_CALLING_GAS",N),e(Q),m.next=62;break;case 58:m.prev=58,m.t0=m.catch(2),console.info("estimateGasForPerTokenTransfer",m.t0),A>=T?t(m.t0):r({retryAttempt:A});case 62:case"end":return m.stop()}}),m,null,[[2,58]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return R.apply(this,arguments)}),estimateGasForBatchNFTTokenTransfer:(j=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,t.commit,f=r.tokenAddress,l=r.addresses,h=r.balances,k=r.tokenIds,x=n.checkSimpleTimes+2,(T=m["metamask/networkConfig"]).specialTokenList,T.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(Re.a)(regeneratorRuntime.mark((function m(T){var v,S,A,w,y,O,j,R,E,_,I,F,P,B,G,L,D,C,H,U,N,K;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return v=T.retryAttempt,S=void 0===v?0:v,S++,m.prev=2,n.simple,A=c.metamask.ethAccount,(w=c.token).allowance,y=w.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return O=m.sent,j=O._address,R=y.decimals,E=Object(Pe.a)("0"),I=[],F=[],(_=l).forEach((function(e,t){var r=h[t],n=k[t],o=Object(Pe.a)(r).times(Object(Pe.a)(10).pow(R));I.push(o.toString(10)),E=E.plus(o),F.push(Object(Pe.a)(n).toString(10))})),P=E.toString(10),m.next=19,d("createNewUniqueId");case 19:return B=m.sent,m.next=22,d("getNFTActionType");case 22:return G=m.sent,L=Object(Pe.a)(k.length).toString(10),C=[P],H=[L],U=0,D=(D=[j]).concat(_),C=C.concat(I),H=H.concat(F),N=O.methods.bulksendNFTToken(f,D,H,C,G,B,A).encodeABI(),K={method:"eth_estimateGas",params:[{from:A,to:j,data:N,value:Object(_e.toHex)(Object(Pe.a)(o.txFee).toString(10))}],from:A},m.next=35,d("metamask/sendAsync",K,{root:!0});case 35:U=m.sent,U=Object(_e.hexToNumber)(U),e(U),m.next=44;break;case 40:m.prev=40,m.t0=m.catch(2),console.info("estimateGasForBatchTokenTransfer",m.t0),S>=x?t(m.t0):r({retryAttempt:S});case 44:case"end":return m.stop()}}),m,null,[[2,40]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return j.apply(this,arguments)}),estimateGasForPerEtherTransfer:(O=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,d=t.commit,r.tokenAddress,f=r.addresses,l=r.balances,h=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var k=Object(Re.a)(regeneratorRuntime.mark((function k(x){var T,v,S,A,w,y,O,j,R,E,_,I,F,P,B,G,L,D,C,H,U,N,K,V,X,M,W;return regeneratorRuntime.wrap((function(k){for(;;)switch(k.prev=k.next){case 0:return T=x.retryAttempt,v=void 0===T?0:T,v++,k.prev=2,S=c.metamask.ethAccount,(A=c.token).allowance,w=A.tokenSelected,k.next=7,o.bulksenderInstance();case 7:return y=k.sent,O=y._address,j=w.decimals,R=Object(Pe.a)("0"),_=[],(E=f).forEach((function(e,t){var r=l[t],n=Object(Pe.a)(r).times(Object(Pe.a)(10).pow(j));_.push(n.toString(10)),R=R.plus(n)})),I=R.toString(10),k.next=17,m("createNewUniqueId");case 17:return F=k.sent,P=[O],B=[I],G=R.plus(Object(Pe.a)(o.txFee)).toString(10),k.next=23,y.methods.bulksendEther(P,B,F).encodeABI();case 23:return L=k.sent,D={method:"eth_estimateGas",params:[{from:S,to:O,data:L,value:Object(_e.toHex)(G)}],from:S},k.next=27,m("metamask/sendAsync",D,{root:!0});case 27:return C=k.sent,C=Object(_e.hexToNumber)(C),H=Object(_e.hexToBytes)(L).length,P=P.concat(E),B=B.concat(_),k.next=34,y.methods.bulksendEther(P,B,F).encodeABI();case 34:return U=k.sent,N={method:"eth_estimateGas",params:[{from:S,to:O,data:U,value:Object(_e.toHex)(G)}],from:S},k.next=38,m("metamask/sendAsync",N,{root:!0});case 38:if(K=k.sent,K=Object(_e.hexToNumber)(K),0!=C&&0!=K){k.next=42;break}throw Error("EstimateGasForPerETHTransfer failed");case 42:V=Object(_e.hexToBytes)(U).length,X=parseInt((V-H)/parseFloat(f.length)),M=parseInt((K-C)/parseFloat(f.length)),(W=parseInt(n.maxGasUsed/parseFloat(M)))*X>1024*n.maxBlockByteSizeKB&&(W=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(X)),M=parseInt(n.maxGasUsed/parseFloat(W))),d("SET_BASE_CALLING_GAS",C),e(M),k.next=56;break;case 53:k.prev=53,k.t0=k.catch(2),v>=h?t(k.t0):r({retryAttempt:v});case 56:case"end":return k.stop()}}),k,null,[[2,53]])})));return function(e){return k.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return O.apply(this,arguments)}),estimateGasForBatchEtherTransfer:(y=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,r.tokenAddress,d=r.addresses,f=r.balances,l=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(Re.a)(regeneratorRuntime.mark((function n(h){var k,x,T,v,S,A,w,y,O,j,R,E,_,I,F,P,B,G,L;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return k=h.retryAttempt,x=void 0===k?0:k,x++,n.prev=2,T=c.metamask.ethAccount,(v=c.token).allowance,S=v.tokenSelected,n.next=7,o.bulksenderInstance();case 7:return A=n.sent,w=A._address,y=S.decimals,O=Object(Pe.a)("0"),R=[],(j=d).forEach((function(e,t){var r=f[t],n=Object(Pe.a)(r).times(Object(Pe.a)(10).pow(y));R.push(n.toString(10)),O=O.plus(n)})),E=O.toString(10),n.next=17,m("createNewUniqueId");case 17:return _=n.sent,I=[w],F=[E],P=O.plus(Object(Pe.a)(o.txFee)).toString(10),I=I.concat(j),F=F.concat(R),n.next=25,A.methods.bulksendEther(I,F,_).encodeABI();case 25:return B=n.sent,G={method:"eth_estimateGas",params:[{from:T,to:w,data:B,value:Object(_e.toHex)(P)}],from:T},n.next=29,m("metamask/sendAsync",G,{root:!0});case 29:L=n.sent,L=Object(_e.hexToNumber)(L),e(L),n.next=37;break;case 34:n.prev=34,n.t0=n.catch(2),x>=l?t(n.t0):r({retryAttempt:x});case 37:case"end":return n.stop()}}),n,null,[[2,34]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return y.apply(this,arguments)}),sendBulksenderByPrivateKey:(w=Object(Re.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,t.commit;case 1:case"end":return e.stop()}}),e)}))),function(e){return w.apply(this,arguments)}),_sendTxFeeToDelegater:(A=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,o=t.rootState,c=t.dispatch,t.commit,m=r.checkSimpleTimes,d=o.bulksender.burnerKey,f=n["metamask/networkConfig"].L2Chain,e.abrupt("return",new Promise((function(e,t){var n=function(){var l=Object(Re.a)(regeneratorRuntime.mark((function l(h){var k,x,T,v,S,A,w,y,O;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return k=h.retryAttempt,x=void 0===k?1:k,x++,l.prev=2,T=o.metamask.ethAccount,v=r.gasPrice,l.next=7,c("calDelegaterTotalFee");case 7:if(S=l.sent,A=21e3,!f){l.next=16;break}return w={method:"eth_estimateGas",params:[{from:T,to:d.address,value:Object(_e.toHex)(S)}],from:T},l.next=13,c("metamask/sendAsync",w,{root:!0});case 13:A=l.sent,A=Object(_e.hexToNumber)(A),console.info(A);case 16:return y={method:"eth_sendTransaction",params:[{from:T,to:d.address,gas:Object(_e.numberToHex)(A),gasPrice:Object(_e.toHex)(Object(_e.toWei)(v.toString(),"gwei")),value:Object(_e.toHex)(S)}],from:T},l.next=19,c("metamask/sendAsync",y,{root:!0});case 19:O=l.sent,e(O),l.next=26;break;case 23:l.prev=23,l.t0=l.catch(2),x>=m||4001==l.t0.code?t(l.t0):n({retryAttempt:x});case 26:case"end":return l.stop()}}),l,null,[[2,23]])})));return function(e){return l.apply(this,arguments)}}();n({})})));case 5:case"end":return e.stop()}}),e)}))),function(e){return A.apply(this,arguments)}),calDelegaterTotalFee:(S=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,t.rootGetters,n=t.rootState,t.dispatch,t.commit,r.gasPrice,o=n.common.estimateETHCost,c=n.common.addressInfo,m=Object(Pe.a)(r.delegaterExtraGas).times(Object(Pe.a)(c.batches.length)).times(Object(Pe.a)(r.gasPrice)).times(Object(Pe.a)(10).pow(9)),d=Object(Pe.a)(o).times(Object(Pe.a)(10).pow(18)).plus(m).toString(10),e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)}))),function(e){return S.apply(this,arguments)}),checkDelegaterHasReceivedFee:(v=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,e.prev=1,o=r.burnerKey,c={method:"eth_getBalance",params:[o.address,"latest"]},e.next=6,n("metamask/sendAsync",c,{root:!0});case 6:return m=e.sent,m=Object(_e.hexToNumberString)(m),e.next=10,n("calDelegaterTotalFee");case 10:return d=e.sent,e.abrupt("return",Object(Pe.a)(m).gte(Object(Pe.a)(d)));case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[1,14]])}))),function(e){return v.apply(this,arguments)}),_sendRemainTxFeeBack:(T=Object(Re.a)(regeneratorRuntime.mark((function t(r,n){var o,c,m,d,f,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.state,r.getters,c=r.rootGetters,m=r.rootState,d=r.dispatch,r.commit,f=n.burnerKey,o.checkSimpleTimes,l=m.metamask.ethAccount,h=c["metamask/networkConfig"].L2Chain,t.abrupt("return",new Promise((function(t,r){var n=function(){var r=Object(Re.a)(regeneratorRuntime.mark((function r(c){var m,k,x,T,v,S,A,w,y,O,j,R,E,_,I,F,P,B;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return m=c.retryAttempt,k=void 0===m?1:m,k++,r.prev=2,x=o.gasPrice,T={method:"eth_getBalance",params:[f.address,"latest"]},r.next=7,d("metamask/sendAsync",T,{root:!0});case 7:if(v=r.sent,v=Object(_e.hexToNumberString)(v),console.info(v),S=21e3,!h){r.next=18;break}return A={method:"eth_estimateGas",params:[{from:f.address,to:l,value:Object(_e.toHex)(1)}],from:l},r.next=15,d("metamask/sendAsync",A,{root:!0});case 15:S=r.sent,S=Object(_e.hexToNumber)(S),console.info(S);case 18:return w=Object(Pe.a)(v).minus(Object(Pe.a)(S).times(Object(Pe.a)(x)).times(Object(Pe.a)(10).pow(9))).toString(10),y={method:"eth_getTransactionCount",params:[f.address,"pending"]},r.next=22,d("metamask/sendAsync",y,{root:!0});case 22:return O=r.sent,r.next=25,d("getChainId");case 25:return j=r.sent,R=e.from(f.privateKey.replace("0x",""),"hex"),E={nonce:O,gasPrice:Object(_e.toHex)(Object(_e.toWei)(o.gasPrice.toString(),"gwei")),gasLimit:Object(_e.numberToHex)(S),to:l,value:Object(_e.toHex)(w),chainId:j},(_=new Ge(E)).sign(R),I=_.serialize(),F="0x"+I.toString("hex"),P={method:"eth_sendRawTransaction",params:[F]},r.next=35,d("metamask/sendAsync",P,{root:!0});case 35:B=r.sent,t(B),r.next=42;break;case 39:r.prev=39,r.t0=r.catch(2),n({retryAttempt:k});case 42:case"end":return r.stop()}}),r,null,[[2,39]])})));return function(e){return r.apply(this,arguments)}}();n({})})));case 6:case"end":return t.stop()}}),t)}))),function(e,t){return T.apply(this,arguments)}),sendTxFeeToDelegater:(x=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,r=t.dispatch,n=t.commit,e.next=3,r("_sendTxFeeToDelegater",{});case 3:return o=e.sent,n("SET_DELEGATE_TX_URL",o),n("SET_DELEGATE_TX_STATUS",0),r("checkDelegaterFeeTransactionStatus",{txHash:o}),r("common/saveUsedDelegater",{usedDelegater:!0},{root:!0}),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)}))),function(e){return x.apply(this,arguments)}),sendRemainTxFeeBack:(k=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,o=t.commit,c=r.burnerKey,e.next=4,n("_sendRemainTxFeeBack",{burnerKey:c});case 4:return m=e.sent,o("SET_REMAIN_TX_URL",m),o("SET_REMAIN_TX_STATUS",0),n("checkRemainTransactionStatus",{txHash:m}),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)}),sendRemainTxFeeBackWithBurnerKey:(h=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,o=r.burnerKey,e.next=4,n("_sendRemainTxFeeBack",{burnerKey:o});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return h.apply(this,arguments)}),sendRawTransactionWithCustomRPC:function(e,t){e.state,e.getters;var r=e.rootGetters,n=t.serializedTx;return new Promise(function(){var e=Object(Re.a)(regeneratorRuntime.mark((function e(t,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r["metamask/customRPCWeb3"]();case 2:e.sent.eth.sendSignedTransaction("0x"+n.toString("hex"),(function(e,r){console.info(e),e?o(e):t(r)}));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())},signKey:(l=Object(Re.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f,l,h,k,x,data,T,v,S,A,s,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,r=t.rootState,n=t.dispatch,o=t.commit,c=r.bulksender,m=c.bulksenderAddress,d=c.burnerKey,f=r.metamask,l=f.netId,h=f.ethAccount,k=parseInt((new Date).getTime()/1e3)+604800,x={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Agent:[{name:"delegater",type:"address"},{name:"expiration",type:"uint256"}]},primaryType:"Agent",domain:{name:"Token Bulksender",version:"1",chainId:l,verifyingContract:m},message:{delegater:d.address,expiration:k}},data=JSON.stringify(x),T={method:"eth_signTypedData_v3",params:[h,data],from:h},e.next=9,n("metamask/sendAsync",T,{root:!0});case 9:return v=e.sent,S=v.substring(2),A="0x"+S.substring(0,64),s="0x"+S.substring(64,128),w=parseInt(S.substring(128,130),16),o("SET_BURNER",[d.address,k]),o("SET_BURNER_SSINATURE",{v:w,r:A,s:s}),e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)}),checkBulksenderTransactionStatus:(f=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,o=t.rootGetters,t.rootState,c=t.dispatch,m=t.commit,d=r.uniqueId,f=r.txHash,l=o["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,f!=n.userDeniedTransactionMessage){e.next=10;break}m("ADD_FAILED_TXS",f),c("common/updateBulkSentStatus",{status:-2,txHash:f,uniqueId:d},{root:!0}),e.next=14;break;case 10:return e.next=12,c("metamask/getTransactionReceipt",{txHash:f},{root:!0});case 12:null!=(h=e.sent)?("0x1"==(k=h.status)||1==k?(k=1,m("ADD_SUCCESS_TXS",f)):(k=-2,m("ADD_FAILED_TXS",f)),c("common/updateBulkSentStatus",{status:k,txHash:f,uniqueId:d},{root:!0})):setTimeout((function(){c("checkBulksenderTransactionStatus",{uniqueId:d,txHash:f})}),1e3*l);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){c("checkBulksenderTransactionStatus",{uniqueId:d,txHash:f})}),1e3*l);case 20:case"end":return e.stop()}}),e,null,[[3,16]])}))),function(e,t){return f.apply(this,arguments)}),checkBulksenderVIPBuyingTransactionStatus:(d=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,console.info(m),e.next=7,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 7:null!=(f=e.sent)?("0x1"==(l=f.status)||1==l?(l=1,c("SET_IS_VIP",!0)):(l=-2,c("SET_IS_VIP",!1)),c("SET_VIP_TX_STATUS",l)):setTimeout((function(){o("checkBulksenderVIPBuyingTransactionStatus",{txHash:m})}),1e3*d),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){o("checkBulksenderVIPBuyingTransactionStatus",{txHash:m})}),1e3*d);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e,t){return d.apply(this,arguments)}),checkDelegaterFeeTransactionStatus:(m=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,console.info(m),e.next=7,o("checkDelegaterHasReceivedFee");case 7:if(f=e.sent,console.info("Delegator Fee received",f),!f){e.next=13;break}c("SET_DELEGATE_TX_STATUS",1),e.next=31;break;case 13:return e.next=15,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 15:if(null==(l=e.sent)){e.next=30;break}if(1!=(h="0x1"==(h=l.status)||1==h?1:-2)){e.next=27;break}return e.next=22,o("checkDelegaterHasReceivedFee");case 22:k=e.sent,console.info("Delegator Fee received",k),k?c("SET_DELEGATE_TX_STATUS",h):setTimeout((function(){o("checkDelegaterFeeTransactionStatus",{txHash:m})}),1e3*d),e.next=28;break;case 27:c("SET_DELEGATE_TX_STATUS",h);case 28:e.next=31;break;case 30:setTimeout((function(){o("checkDelegaterFeeTransactionStatus",{txHash:m})}),1e3*d);case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(3),console.info("Checking error",e.t0),setTimeout((function(){o("checkDelegaterFeeTransactionStatus",{txHash:m})}),1e3*d);case 37:case"end":return e.stop()}}),e,null,[[3,33]])}))),function(e,t){return m.apply(this,arguments)}),checkRemainTransactionStatus:(c=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,console.info(m),e.next=7,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 7:null!=(f=e.sent)?(l=f.status,c("SET_REMAIN_TX_STATUS",l="0x1"==l||1==l?1:-2)):setTimeout((function(){o("checkRemainTransactionStatus",{txHash:m})}),1e3*d),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){o("checkRemainTransactionStatus",{txHash:m})}),1e3*d);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e,t){return c.apply(this,arguments)}),getTransactionCount:(o=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,address,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,address=r.address,e.next=4,n("metamask/getTransactionCount",{address:address},{root:!0});case 4:return o=e.sent,o=Object(_e.hexToNumberString)(o),e.abrupt("return",parseInt(o));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),bulkFindBadAddress:(n=Object(Re.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,v,S,A,w,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,k=r.amounts,x=r.tokenIds,T=r.isCheckingBadAddressesSize,v=void 0!==T&&T,S=c["metamask/networkConfig"],A=S.rpcCallRetryAttempt,S.tokenQueryContract,w=n.simple,y=c["metamask/networkConfig"].whiteAccountList,v&&(A=2),e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(Re.a)(regeneratorRuntime.mark((function n(T){var v,S,O,j,R,E,_,I,data,F,P,B,G,L,D,C,H,U,N,K,V,X,M,W,z,Y,$,Q,J,Z,ee;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v=T.retryAttempt,S=void 0===v?1:v,S++,n.prev=2,O=m.metamask.ethAccount,(y.includes(O)||y.includes(l))&&(w=!0),n.next=7,o.bulksenderInstance();case 7:return j=n.sent,R=m.token.tokenSelected,E=c["token/isNFTToken"],_=c["token/isERC1155"],I=c["token/isERC721"],F=Object(Pe.a)("0"),P=Object(Pe.a)("0"),B=[],E||(G=R.decimals,k.forEach((function(e,t){var r=Object(Pe.a)(e).times(Object(Pe.a)(10).pow(G));B.push(r.toString(10)),P=P.plus(r)}))),R.isETH?(data=j.methods.findBadAddressesForEther(h,B).encodeABI(),F=F.plus(P)):E?(I&&(data=j.methods.findBadAddressesForERC721(l,h,x,w).encodeABI()),_&&(data=j.methods.findBadAddressesForERC1155(l,h,k,x).encodeABI())):data=j.methods.findBadAddressesForERC20(l,h,B,P.toString(10),w).encodeABI(),L=F.toString(10),D={method:"eth_call",params:[{from:O,to:j._address,data:data,value:Object(_e.toHex)(L)},"latest"],from:O},n.next=21,d("metamask/sendAsync",D,{root:!0});case 21:C=n.sent,H=[],U=[],N=[],_?(K=Le.decodeParameters([{name:"badAddresses",type:"address[]"},{name:"badBalances",type:"uint256[]"},{name:"badTokenIds",type:"uint256[]"}],C),V=K.badAddresses,X=K.badBalances,M=K.badTokenIds,H=V,U=X,N=M):I?(W=Le.decodeParameters([{name:"badAddresses",type:"address[]"},{name:"badTokenIds",type:"uint256[]"}],C),z=W.badAddresses,Y=W.badTokenIds,H=z,N=Y):($=Le.decodeParameters([{name:"badAddresses",type:"address[]"},{name:"badBalances",type:"uint256[]"}],C),Q=$.badAddresses,J=$.badBalances,H=Q,U=J),R.isETH||_?e({badAddresses:H,badBalances:U,badTokenIds:N}):(Z=[],ee=[],H.forEach((function(address,e){"0x0000000000000000000000000000000000000000"!=address?Z.push(address):ee.push(address)})),(Z.length==H.length||Z>ee)&&!w?(w=!0,r({retryAttempt:S})):(f("SET_SIMPLE",w),e({badAddresses:H,badBalances:U,badTokenIds:N}))),n.next=33;break;case 29:n.prev=29,n.t0=n.catch(2),w=!0,S>=A?t(n.t0):r({retryAttempt:S});case 33:case"end":return n.stop()}}),n,null,[[2,29]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})};t.default={namespaced:!0,state:function(){var e;return e={contractAddress:"",txFee:2e16,isVIP:!1,vipFee:1e18,delegatorFee:1e18,addressUrl:"",txUrl:"",maxGasUsed:72e5,maxBlockByteSizeKB:28,defaultBlockConfig:{maxGasUsed:72e5,maxGasUsedSmaller:24e5,blockGasLimit:72e5,maxBytesSize:28},gasPrice:50,transferTestingCount:5,etherBatchSize:220,simple:!1,checkSimpleTimes:4,transferTestingAmounts:[1,10,100,1e3,1e4,1e5,1e6,1e7]},Object(Ee.a)(e,"etherBatchSize",220),Object(Ee.a)(e,"estimateETHCost",.01),Object(Ee.a)(e,"vipTxHash",""),Object(Ee.a)(e,"vipTxStatus",-1),Object(Ee.a)(e,"txs",[]),Object(Ee.a)(e,"successTxs",[]),Object(Ee.a)(e,"failedTxs",[]),Object(Ee.a)(e,"burnerKey",{}),Object(Ee.a)(e,"usedBurnerKey",!1),Object(Ee.a)(e,"burner",[]),Object(Ee.a)(e,"burnerSignature",Object(Ee.a)({v:27,r:""},"v","")),Object(Ee.a)(e,"delegaterTxUrl",""),Object(Ee.a)(e,"remainTxUrl",""),Object(Ee.a)(e,"delegaterTxStatus",-1),Object(Ee.a)(e,"remainTxStatus",-1),Object(Ee.a)(e,"baseCallingGas",1e5),Object(Ee.a)(e,"delegaterExtraGas",3e4),Object(Ee.a)(e,"commonExtraGas",1e5),Object(Ee.a)(e,"referralFee",1e16),Object(Ee.a)(e,"etherDelegateCallExtraGas",0),Object(Ee.a)(e,"etherSpecialAcountExtraGas",1e4),Object(Ee.a)(e,"referralAddress","0x0000000000000000000000000000000000000000"),Object(Ee.a)(e,"extraFee",0),Object(Ee.a)(e,"walletSupportEIP1559",!0),Object(Ee.a)(e,"userDeniedTransactionMessage","You rejected the transaction."),Object(Ee.a)(e,"totalLockedTokens",30),Object(Ee.a)(e,"userTokenLocks",null),Object(Ee.a)(e,"userLocks",null),e},getters:De,mutations:{SET_CONTRACT_ADDRESS:function(e,address){e.contractAddress=address},SET_TX_FEE:function(e,t){e.txFee=t},SET_MAX_BLOCK_BYTES_SIZE:function(e,t){e.maxBlockByteSizeKB=t},SET_VIP_FEE:function(e,t){e.vipFee=t},SET_IS_VIP:function(e,t){e.isVIP=t},SET_REFERRAL_FEE:function(e,t){e.referralFee=t},SET_DELEGATOR_FEE:function(e,t){e.delegatorFee=t},SET_GAS_PRICE:function(e,t){e.gasPrice=t},SET_ADDRESS_URL:function(e,t){e.addressUrl=t},SET_TX_URL:function(e,t){e.txUrl=t},ADD_TX:function(e,t){e.txs.push(t)},ADD_SUCCESS_TXS:function(e,t){e.successTxs.push(t)},ADD_FAILED_TXS:function(e,t){e.failedTxs.push(t)},SET_SIMPLE:function(e,t){e.simple=t},SET_estimateCostPerTransfer:function(e,t){e.simple=t},SET_VIP_TX_HASH:function(e,t){e.vipTxHash=t},SET_VIP_TX_STATUS:function(e,t){e.vipTxStatus=t},SET_BURNER_KEY:function(e,t){e.burnerKey=t},SET_USED_BURNER_KEY:function(e,t){e.usedBurnerKey=t},SET_BURNER:function(e,t){e.burner=t},SET_BURNER_SSINATURE:function(e,t){e.burnerSignature=t},SET_DELEGATE_TX_URL:function(e,t){e.delegaterTxUrl=t},SET_REMAIN_TX_URL:function(e,t){e.remainTxUrl=t},SET_DELEGATE_TX_STATUS:function(e,t){e.delegaterTxStatus=t},SET_REMAIN_TX_STATUS:function(e,t){e.remainTxStatus=t},SET_REFERRAL_ADDRESS:function(e,address){e.referralAddress=address},SET_BASE_CALLING_GAS:function(e,t){e.baseCallingGas=t},SET_EXTRA_FEE:function(e,t){e.extraFee=t},SET_WALLET_SUPPORT_EIP1559:function(e,t){e.walletSupportEIP1559=t},SET_TOTAL_LOCKED_TOKENS:function(e,t){e.totalLockedTokens=t},SET_USER_TOKEN_LOCKS:function(e,t){e.userTokenLocks=t},SET_USER_LOCKS:function(e,t){e.userLocks=t},CLEAR:function(e){e.walletSupportEIP1559=!0,e.extraFee=0,e.successTxs=[],e.failedTxs=[],e.txs=[],e.remainTxUrl="",e.delegaterTxUrl=""}},actions:Ce}}.call(this,r(11).Buffer)}}]);