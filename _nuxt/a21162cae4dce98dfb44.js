(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1290:function(e,t,r){"use strict";r.r(t);r(129),r(132),r(158),r(39),r(48),r(216),r(92),r(44);var n,o,c,m,d,l,f,k,h,T,A,E,v,_,x,S,O,y,w,R,C,P,N,I,j,G,L,K,D,B,H,F,Q,U,V,X,W,M,Y,J,Z=r(1),z=(r(112),r(113),r(37),r(2)),$=r(727),ee=r(728),te=r(0),re=(r(127),r(47)),ne=r(437),ae=r.n(ne),oe=(r(265),r(137)),se={allowanceNumber:function(e){var t=0;try{t=Object(te.a)(e.allowance).gte(Object(te.a)(Math.pow(10,36)))?-1:Object(te.a)(e.allowance).div(Object(te.a)(10).pow(e.tokenSelected.decimals)).toString(10)}catch(e){console.info(e)}return t},balanceNumber:function(e){var t=0;try{t=Object(te.a)(e.balance).div(Object(te.a)(10).pow(e.tokenSelected.decimals)).toString(10)}catch(e){}return t},isNFTToken:function(e,t){return t.isERC721||t.isERC1155},isOpenseaIssue:function(e,t,r,n){var o=r.metamask.netId,c=137==o&&e.address&&"0x2953399124f0cbb46d2cbacd8a89cf0599974963"==e.address.toLowerCase(),m=1==o&&e.address&&"0x495f947276749ce646f68ac8c248420045cb7b5e"==e.address.toLowerCase();return c||m},isERC721:function(e){return 1==e.tokenType},isERC1155:function(e){return 2==e.tokenType},tokenInstance:function(e,t,r,n){return Object(Z.a)(regeneratorRuntime.mark((function t(){var o,c,m,d,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>0&&void 0!==l[0]?l[0]:void 0,c=r.metamask,m=c.ethAccount,c.netId,t.next=4,n["metamask/web3"]();case 4:return d=t.sent,o||(o=e.address),t.abrupt("return",new d.eth.Contract($,o,{from:m}));case 7:case"end":return t.stop()}}),t)})))},tokenQueryInstance:function(e,t,r,n){return Object(Z.a)(regeneratorRuntime.mark((function e(){var t,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.metamask,o=t.ethAccount,t.netId,e.next=3,n["metamask/web3"]();case 3:return c=e.sent,m=n["metamask/networkConfig"].tokenQueryContract,e.abrupt("return",new c.eth.Contract(ee,m,{from:o}));case 6:case"end":return e.stop()}}),e)})))}},ce={setTokenAddress:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_ADDRESS",t.address)},setAproveTx:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_APPROVE_TX",t.txHash)},setAproveAmount:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_APPROVE_AMOUNT",t.amount)},setAproveTxStatus:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_APPROVE_TX_STATUS",t.status)},setTokenSelectedDisplayInfo:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_SELECTED_DISPLAY_INFO",t.tokenSelectedDisplayInfo)},setTokenSelected:(J=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dispatch,o=t.commit,c=t.state,m=t.rootState,d=r.selected){e.next=4;break}return e.abrupt("return");case 4:if(o("SET_TOKEN_SELECTED",d),o("SET_TOKEN_INFO_LOADED",!0),l=m.metamask.initialized,c.tokenSelected.isETH){e.next=23;break}if(e.prev=8,3!=c.tokenType||!l){e.next=14;break}return e.next=12,n("getTokenDecimals");case 12:f=e.sent,o("SET_TOKEN_DECIMALS",f);case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(8);case 18:n("getTokenAllowce",{}),n("getTokenBalance",{}),n("checkTokenGasProcessing"),e.next=26;break;case 23:o("SET_GAS_PROCESSING",-1),o("SET_TOKEN_TYPE",0),o("SET_TOKEN_DECIMALS",18);case 26:return e.prev=26,e.next=29,n("common/getNetIdStorage",{},{root:!0});case 29:(k=e.sent).lastTokenUsed=c.tokenSelected,n("common/updateNetIdStorage",{netStorage:k},{root:!0}),e.next=36;break;case 34:e.prev=34,e.t1=e.catch(26);case 36:case"end":return e.stop()}}),e,null,[[8,16],[26,34]])}))),function(e,t){return J.apply(this,arguments)}),checkLastTokenSelected:(Y=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.commit,t.state,o=null,e.prev=2,e.next=5,r("common/getNetIdStorage",{},{root:!0});case 5:c=e.sent,o=c.lastTokenUsed,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:return n("SET_TOKEN_SELECTED",o),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e){return Y.apply(this,arguments)}),setTokenBalance:function(e,t){e.dispatch;var r=e.commit,n=(e.state,t.balance);r("SET_TOKEN_BALANCE",n),r("SET_TOKEN_BALANCE_LOADED",!0),console.info("Token Balance",n)},setTokenAllowance:function(e,t){e.dispatch;var r=e.commit,n=(e.state,t.allowance);-1!=n&&(r("SET_TOKEN_ALLOWANCE",n),r("SET_TOKEN_ALLOWANCE_LOADED",!0),console.info("Token Allowance",n))},clearUsedParams:(M=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.dispatch,r=t.commit,t.rootState,r("CLEAR");case 2:case"end":return e.stop()}}),e)}))),function(e){return M.apply(this,arguments)}),initBaseParams:(W=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.rootState,t.rootGetters,r=t.dispatch,t.commit,t.state,r("checkLastTokenSelected");case 2:case"end":return e.stop()}}),e)}))),function(e){return W.apply(this,arguments)}),checkAllowceEnough:(X=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.commit,m=t.rootState,d=r.finalAmount,l=null!=n.tokenSelected&&n.tokenSelected.isETH||null!=n.tokenSelected&&null!=n.tokenSelected.decimals&&n.allowance>0&&Object(te.a)(n.allowance).div(Object(te.a)(10).pow(n.tokenSelected.decimals)).gte(Object(te.a)(d)),o.isERC721&&(f=m.common.addressInfo,null!=n.tokenSelected.decimals&&(l=n.allowance>0&&Object(te.a)(n.allowance).div(Object(te.a)(10).pow(n.tokenSelected.decimals)).gte(Object(te.a)(f.finalData.length)))),c("SET_TOKEN_ALLOWANCE_ENOUGH",l),e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return X.apply(this,arguments)}),checkBalanceEnough:(V=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.commit,m=t.rootState,d=r.finalAmount,l=m.metamask.balance,f=n.tokenSelected,k=!1,null!=f&&(f.isETH?k=Object(te.a)(l).gte(Object(te.a)(d)):(o.isERC721&&(h=m.common.addressInfo,k=Object(te.a)(n.balance).div(Object(te.a)(10).pow(n.tokenSelected.decimals)).gte(Object(te.a)(h.finalData.length))),o.isERC1155?k=!0:null!=f.decimals&&(k=Object(te.a)(n.balance).div(Object(te.a)(10).pow(n.tokenSelected.decimals)).gte(Object(te.a)(d))))),c("SET_TOKEN_BALANCE_ENOUGH",k),e.abrupt("return",k);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return V.apply(this,arguments)}),getTokenAddress:(U=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,r=t.getters,n=t.commit,e.next=3,r.tokenInstance();case 3:o=e.sent,n("SET_TOKEN_ADDRESS",o._address);case 5:case"end":return e.stop()}}),e)}))),function(e){return U.apply(this,arguments)}),getTokenBalance:(Q=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.state,n=t.getters,o=t.rootGetters,c=t.rootState,(0,t.commit)("SET_TOKEN_BALANCE_LOADED",!1),m=o["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var o=function(){var d=Object(Z.a)(regeneratorRuntime.mark((function d(l){var f,k,h,T,A,data,E;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(f=l.retryAttempt,k=void 0===f?1:f,k++,d.prev=2,h=0,n.isERC1155){d.next=16;break}return T=c.metamask.ethAccount,d.next=8,n.tokenInstance();case 8:return A=d.sent,data=A.methods.balanceOf(T).encodeABI(),E={method:"eth_call",params:[{from:T,to:A._address,data:data},"latest"],from:T},d.next=13,r("metamask/sendAsync",E,{root:!0});case 13:h=d.sent,h=Object(z.hexToNumberString)(h),r("setTokenBalance",{balance:h});case 16:e(h),d.next=22;break;case 19:d.prev=19,d.t0=d.catch(2),k>=m||"execution reverted"==d.t0.message?t(d.t0):o({retryAttempt:k});case 22:case"end":return d.stop()}}),d,null,[[2,19]])})));return function(e){return d.apply(this,arguments)}}();o({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return Q.apply(this,arguments)}),getTokenDecimals:(F=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.state,n=t.getters,o=t.rootGetters,c=t.rootState,t.commit,m=o["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var o=function(){var d=Object(Z.a)(regeneratorRuntime.mark((function d(l){var f,k,h,T,data,A,E;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return f=l.retryAttempt,k=void 0===f?1:f,k++,d.prev=2,h=c.metamask.ethAccount,d.next=6,n.tokenInstance();case 6:return T=d.sent,data=T.methods.decimals().encodeABI(),A={method:"eth_call",params:[{from:h,to:T._address,data:data},"latest"],from:h},d.next=11,r("metamask/sendAsync",A,{root:!0});case 11:E=d.sent,E=Object(z.hexToNumber)(E),console.info("Token Decimals",E),e(E),d.next=20;break;case 17:d.prev=17,d.t0=d.catch(2),k>=m||"execution reverted"==d.t0.message?t(d.t0):o({retryAttempt:k});case 20:case"end":return d.stop()}}),d,null,[[2,17]])})));return function(e){return d.apply(this,arguments)}}();o({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return F.apply(this,arguments)}),parseInsertTokenAddress:(H=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.dispatch,t.state,t.getters,t.rootGetters,t.rootState,o=t.commit,c=(c=r.tokenAddress).replace(/^\s+|\s+$/gm,"");try{c.startsWith("xdc")&&(c=c.replace("xdc","0x"))}catch(e){}if(!Object(re.a)(c)){e.next=27;break}try{Object(z.checkAddressChecksum)(c)||(c=c.toLowerCase())}catch(e){}return o("SET_TOKEN_ADDRESS",c),e.next=9,n("getTokenInfo");case 9:if(m=e.sent,0!=Object.keys(m).length){e.next=26;break}return e.next=13,n("checkTokenType");case 13:d=e.sent,console.info("TokenType2",d),e.t0=d,e.next=1===e.t0?18:2===e.t0?22:26;break;case 18:return e.next=20,n("getERC721TokenInfo");case 20:return m=e.sent,e.abrupt("break",26);case 22:return e.next=24,n("getERC1155TokenInfo");case 24:return m=e.sent,e.abrupt("break",26);case 26:return e.abrupt("return",m);case 27:case"end":return e.stop()}}),e)}))),function(e,t){return H.apply(this,arguments)}),fetchTokenPrice:(B=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,f,k,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,o=t.dispatch,c=t.rootGetters,m=t.state,n("SET_PRICE_LOADED",!1),(d=c["metamask/networkConfig"]).smartContractPollTime,d.extraFeeOracle,l=d.supportExtraFee,r.metamask.netId,l){e.next=7;break}return n("SET_PRICE_LOADED",!0),e.abrupt("return");case 7:return e.next=9,o("bulksender/setExtraFee",{extraFee:0},{root:!0});case 9:if(n("SET_TOKEN_PRICE",0),"0x0000000000000000000000000000000000000000"!=(f=m.address)){e.next=14;break}return n("SET_PRICE_LOADED",!0),e.abrupt("return");case 14:if(""!=f.trim()){e.next=16;break}return e.abrupt("return");case 16:if(k=Object(z.toChecksumAddress)(f),!((h=c["metamask/networkConfig"].specialTokenList).includes(f)||h.includes(f.toLowerCase())||h.includes(k))){e.next=23;break}return n("SET_TOKEN_PRICE",1),n("SET_PRICE_LOADED",!0),e.abrupt("return");case 23:return e.abrupt("return");case 26:case"end":return e.stop()}}),e)}))),function(e){return B.apply(this,arguments)}),getTokenInfo:(D=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,l=c["metamask/networkConfig"],f=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(l){var k,h,T,A,E,data,v,_,x,S,symbol,O,y,w,R;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k=l.retryAttempt,h=void 0===k?1:k,h++,t.prev=2,T=m.metamask.ethAccount,A=m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return E=t.sent,data=E.methods.queryTokenInfo(n.address,2,T,A).encodeABI(),v={method:"eth_call",params:[{from:T,to:E._address,data:data},"latest"],from:T},t.next=12,r("metamask/sendAsync",v,{root:!0});case 12:_=t.sent,x=oe.decodeParameters([{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"decimals",type:"uint256"},{name:"totalSupply",type:"uint256"},{name:"balance",type:"uint256"},{name:"allowance",type:"uint256"}],_),S=x.name,symbol=x.symbol,O=x.decimals,x.totalSupply,y=x.balance,w=x.allowance,R={contractAddress:n.address,balance:y,name:S,symbol:symbol,decimals:O},r("setTokenSelected",{selected:R}),r("setTokenBalance",{balance:y}),r("setTokenAllowance",{allowance:w}),d("SET_TOKEN_TYPE",3),e(R),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(2),console.info("get Token Info exception",t.t0),h>=f||"execution reverted"==t.t0.message?e({}):c({retryAttempt:h});case 26:case"end":return t.stop()}}),t,null,[[2,22]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)}),getERC721TokenInfo:(K=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=c["metamask/networkConfig"],l=d.rpcCallRetryAttempt,d.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(d){var f,k,h,T,data,A,E,v,_,symbol,x,S,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=d.retryAttempt,k=void 0===f?1:f,k++,t.prev=2,h=m.metamask.ethAccount,m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return T=t.sent,data=T.methods.queryERC721TokenInfo(n.address,h).encodeABI(),A={method:"eth_call",params:[{from:h,to:T._address,data:data},"latest"],from:h},t.next=12,r("metamask/sendAsync",A,{root:!0});case 12:if(null==(E=t.sent)){t.next=21;break}v=oe.decodeParameters([{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"decimals",type:"uint256"},{name:"totalSupply",type:"uint256"},{name:"balance",type:"uint256"},{name:"allowance",type:"uint256"}],E),_=v.name,symbol=v.symbol,x=v.decimals,v.totalSupply,S=v.balance,v.allowance,O={contractAddress:n.address,balance:S,name:_,symbol:symbol,decimals:x},r("setTokenSelected",{selected:O}),r("setTokenBalance",{balance:S}),e(O),t.next=22;break;case 21:throw Error("Fetch token info failed");case 22:t.next=34;break;case 24:if(t.prev=24,t.t0=t.catch(2),!(k>=l)){t.next=33;break}return t.next=29,r("setERC721DefaultToken");case 29:O=t.sent,e(O),t.next=34;break;case 33:c({retryAttempt:k});case 34:case"end":return t.stop()}}),t,null,[[2,24]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return K.apply(this,arguments)}),setERC721DefaultToken:(L=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,t.getters,t.rootGetters,t.rootState,o=t.commit,c={contractAddress:n.address,balance:0,name:"ERC721",symbol:"ERC721",decimals:0},r("setTokenSelected",{selected:c}),o("SET_TOKEN_BALANCE_LOADED",!1),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)}),getERC1155TokenInfo:(G=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=c["metamask/networkConfig"],l=d.rpcCallRetryAttempt,d.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(d){var f,k,h,T,symbol,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=d.retryAttempt,k=void 0===f?1:f,k++,t.prev=2,m.metamask.ethAccount,m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return t.sent,t.next=10,r("getBaseNFTTokenInfo");case 10:h=t.sent,T=h.name,symbol=h.symbol,console.info(T),A={contractAddress:n.address,balance:0,name:T,symbol:symbol,decimals:0},r("setTokenSelected",{selected:A}),r("setTokenBalance",{balance:0}),e(A),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),k>=l?e({}):c({retryAttempt:k});case 24:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return G.apply(this,arguments)}),getBaseNFTTokenInfo:(j=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=c["metamask/networkConfig"],l=d.rpcCallRetryAttempt,d.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(d){var f,k,h,T,data,A,E,v,_,symbol;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=d.retryAttempt,k=void 0===f?1:f,k++,t.prev=2,h=m.metamask.ethAccount,m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return T=t.sent,data=T.methods.queryERC721TokenBaseInfo(n.address).encodeABI(),A={method:"eth_call",params:[{from:h,to:T._address,data:data},"latest"],from:h},t.next=12,r("metamask/sendAsync",A,{root:!0});case 12:if(null==(E=t.sent)){t.next=18;break}v=oe.decodeParameters([{name:"name",type:"string"},{name:"symbol",type:"string"}],E),_=v.name,symbol=v.symbol,e({name:_,symbol:symbol}),t.next=19;break;case 18:throw Error("Fetch token info failed");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),k>=l||"execution reverted"==t.t0.message?e({name:"NFT-ERC1155",symbol:"ERC1155"}):c({retryAttempt:k});case 24:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)}),checkTokenType:(I=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,f,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,l=c["metamask/networkConfig"],f=l.rpcCallRetryAttempt,l.tokenQueryContract,k=l.supportsNFT,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(l){var h,T,A,E,v,data,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=l.retryAttempt,T=void 0===h?1:h,T++,t.prev=2,A=3,!k){t.next=15;break}return E=m.metamask.ethAccount,t.next=8,o.tokenQueryInstance();case 8:return v=t.sent,data=v.methods.tokenType(n.address).encodeABI(),_={method:"eth_call",params:[{from:E,to:v._address,data:data},"latest"],from:E},t.next=13,r("metamask/sendAsync",_,{root:!0});case 13:A=t.sent,A=Object(z.hexToNumber)(A);case 15:d("SET_TOKEN_TYPE",A),e(A),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),console.info("Check token type e",t.t0),T>=f||"execution reverted"==t.t0.message?(d("SET_TOKEN_TYPE",3),e(3)):c({retryAttempt:T});case 23:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return I.apply(this,arguments)}),checkTokenGasProcessingV1:(N=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,!n.gasForProcessingChecking){e.next=3;break}return e.abrupt("return");case 3:return d("SET_GAS_PROCESSING_CHECKING",!0),d("SET_GAS_PROCESSING",-1),c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){!function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(n){var c,l,data,f,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.retryAttempt,t.prev=2,c=m.metamask.ethAccount,t.next=6,o.tokenInstance();case 6:return l=t.sent,data=l.methods.gasForProcessing().encodeABI(),f={method:"eth_call",params:[{from:c,to:l._address,data:data},"latest"],from:c},t.next=11,r("metamask/sendAsync",f,{root:!0});case 11:k=t.sent,k=Object(z.hexToNumber)(k),d("SET_GAS_PROCESSING",k),d("SET_GAS_PROCESSING_CHECKING",!1),e(k),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(2),d("SET_GAS_PROCESSING",-1),d("SET_GAS_PROCESSING_CHECKING",!1),e(-1);case 23:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(e){return t.apply(this,arguments)}}()({})})));case 7:case"end":return e.stop()}}),e)}))),function(e){return N.apply(this,arguments)}),checkTokenGasProcessing:(P=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,!n.gasForProcessingChecking){e.next=3;break}return e.abrupt("return");case 3:return d("SET_GAS_PROCESSING_CHECKING",!0),d("SET_GAS_PROCESSING",-1),c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){!function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(c){var l,f,data,k,h,T,A,E,v,_,i,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.retryAttempt,t.prev=2,l=m.metamask.ethAccount,t.next=6,o.tokenInstance();case 6:return f=t.sent,data=f.methods.gasForProcessing().encodeABI(),k={method:"eth_call",params:[{from:l,to:f._address,data:data},"latest"],from:l},h=-1,t.prev=10,t.next=13,r("metamask/sendAsync",k,{root:!0});case 13:h=t.sent,h=Object(z.hexToNumber)(h),d("SET_GAS_PROCESSING",h),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(10),d("SET_GAS_PROCESSING",-1);case 21:if(!(h>0)){t.next=25;break}d("SET_GAS_PROCESSING_CHECKING",!1),t.next=53;break;case 25:return T={method:"eth_getCode",params:[f._address,"latest"],from:l},t.next=28,r("metamask/sendAsync",T,{root:!0});case 28:A=t.sent,E=n.gasProcessingSureFunctions,v=n.gasProcessingPossibleFunctions,_=!1,i=0;case 33:if(!(i<E.length)){t.next=40;break}if(!A.includes(E[i])){t.next=37;break}return _=!0,t.abrupt("break",40);case 37:i++,t.next=33;break;case 40:x=!1,i=0;case 42:if(!(i<v.length)){t.next=49;break}if(!A.includes(v[i])){t.next=46;break}return x=!0,t.abrupt("break",49);case 46:i++,t.next=42;break;case 49:_&&x&&(h=1e3),d("SET_GAS_PROCESSING",h),d("SET_GAS_PROCESSING_CHECKING",!1);case 53:e(h),t.next=61;break;case 56:t.prev=56,t.t1=t.catch(2),d("SET_GAS_PROCESSING",-1),d("SET_GAS_PROCESSING_CHECKING",!1),e(-1);case 61:case"end":return t.stop()}}),t,null,[[2,56],[10,18]])})));return function(e){return t.apply(this,arguments)}}()({})})));case 7:case"end":return e.stop()}}),e)}))),function(e){return P.apply(this,arguments)}),checkTokenSpecialTypes:(C=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.commit,!n.specialTypesChecking){e.next=3;break}return e.abrupt("return");case 3:return d("SET_SPECIAL_TYPES_CHECKING",!0),d("SET_GAS_PROCESSING",-1),c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){!function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(c){var l,f,k,h,T,A,E,i,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.retryAttempt,t.prev=2,l=m.metamask.ethAccount,t.next=6,o.tokenInstance();case 6:return f=t.sent,k={method:"eth_getCode",params:[f._address,"latest"],from:l},t.next=10,r("metamask/sendAsync",k,{root:!0});case 10:h=t.sent,T=n.gasProcessingSureFunctions,A=n.gasProcessingPossibleFunctions,E=!1,i=0;case 15:if(!(i<T.length)){t.next=22;break}if(!h.includes(T[i])){t.next=19;break}return E=!0,t.abrupt("break",22);case 19:i++,t.next=15;break;case 22:v=!1,i=0;case 24:if(!(i<A.length)){t.next=31;break}if(!h.includes(A[i])){t.next=28;break}return v=!0,t.abrupt("break",31);case 28:i++,t.next=24;break;case 31:d("SET_GAS_PROCESSING",E&&v?1e3:-1),d("SET_SPECIAL_TYPES_CHECKING",!1),e(1e3),t.next=42;break;case 37:t.prev=37,t.t0=t.catch(2),d("SET_GAS_PROCESSING",-1),d("SET_SPECIAL_TYPES_CHECKING",!1),e(-1);case 42:case"end":return t.stop()}}),t,null,[[2,37]])})));return function(e){return t.apply(this,arguments)}}()({})})));case 7:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)}),checkNFTType:(R=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=r.isERC721,l=c["metamask/networkConfig"],f=l.rpcCallRetryAttempt,l.tokenQueryContract,l.supportsNFT,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(c){var l,k,h,T,A,E,data,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=c.retryAttempt,k=void 0===l?1:l,k++,t.prev=2,h=!1,T=m.metamask.ethAccount,t.next=7,o.tokenInstance();case 7:return A=t.sent,E="0xd9b67a26",d&&(E="0x80ac58cd"),data=A.methods.supportsInterface(E).encodeABI(),v={method:"eth_call",params:[{from:T,to:A._address,data:data},"latest"],from:T},t.next=14,n("metamask/sendAsync",v,{root:!0});case 14:h=t.sent,h=Object(z.hexToNumberString)(h),e(h="1"==h||1==h),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(2),console.info("Check token type again:",t.t0),k>=f||"execution reverted"==t.t0.message?e(!1):r({retryAttempt:k});case 24:case"end":return t.stop()}}),t,null,[[2,20]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return R.apply(this,arguments)}),bulkQueryBalances:(w=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=r.tokenAddress,l=r.addresses,f=r.tokenIds,k=c["metamask/networkConfig"],h=k.rpcCallRetryAttempt,k.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(Z.a)(regeneratorRuntime.mark((function c(k){var T,A,E,v,data,_,x,S,O,y;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return T=k.retryAttempt,A=void 0===T?1:T,A++,c.prev=2,E=m.metamask.ethAccount,c.next=6,o.tokenQueryInstance();case 6:return v=c.sent,o.isERC1155?(_=[],f.forEach((function(e,i){try{_.push(e.toString())}catch(t){_.push(e)}})),data=v.methods.bulkQueryERC1155Balances(d,l,_).encodeABI()):data=v.methods.bulkQueryBalances(d,l).encodeABI(),x={method:"eth_call",params:[{from:E,to:v._address,data:data},"latest"],from:E},c.next=11,n("metamask/sendAsync",x,{root:!0});case 11:if(null==(S=c.sent)){c.next=17;break}O=oe.decodeParameters([{name:"balances",type:"uint256[]"}],S),y=O.balances,e(y),c.next=18;break;case 17:throw Error("BulkQueryBalances failed");case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(2),A>=h?t(c.t0):r({retryAttempt:A});case 23:case"end":return c.stop()}}),c,null,[[2,20]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return w.apply(this,arguments)}),bulkQueryETHBalances:(y=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k,h,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=r.tokenAddress,l=r.addresses,r.tokenIds,f=r.netId,k=void 0===f?1:f,h=c["metamask/networkConfig"],T=h.rpcCallRetryAttempt,h.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(Z.a)(regeneratorRuntime.mark((function c(f){var h,A,E,v,data,_,x,S,O;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return h=f.retryAttempt,A=void 0===h?1:h,A++,c.prev=2,E=m.metamask.ethAccount,c.next=6,o.tokenQueryInstance();case 6:return v=c.sent,data=v.methods.bulkQueryBalances(d,l).encodeABI(),_={method:"eth_call",params:[{from:E,to:v._address,data:data},"latest"],from:E},c.next=11,n("metamask/sendAsync",_,{root:!0});case 11:if(null==(x=c.sent)){c.next=17;break}S=oe.decodeParameters([{name:"balances",type:"uint256[]"}],x),O=S.balances,e({balances:O,netId:k}),c.next=18;break;case 17:throw Error("BulkQueryBalances failed");case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(2),A>=T?t(c.t0):r({retryAttempt:A});case 23:case"end":return c.stop()}}),c,null,[[2,20]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return y.apply(this,arguments)}),getTokenAllowce:(O=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.getters,o=t.commit,c=t.dispatch,m=t.rootGetters,d=t.state,o("SET_TOKEN_ALLOWANCE_LOADED",!1),l=m["metamask/networkConfig"],f=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var o=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(m){var l,k,h,T,A,data,E,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=m.retryAttempt,k=void 0===l?1:l,k++,t.prev=2,h=r.metamask.ethAccount,T=r.bulksender.bulksenderAddress,null!=h&&null!=T&&""!=T){t.next=8;break}return e(-1),t.abrupt("return");case 8:return t.next=10,c("checkTokenType");case 10:return t.next=12,n.tokenInstance();case 12:return A=t.sent,data=n.isNFTToken?A.methods.isApprovedForAll(h,T).encodeABI():A.methods.allowance(h,T).encodeABI(),E={method:"eth_call",params:[{from:h,to:A._address,data:data},"latest"],from:h},t.next=17,c("metamask/sendAsync",E,{root:!0});case 17:v=t.sent,v=Object(z.hexToNumberString)(v),!n.isNFTToken||"1"!=v&&1!=v||(v=d.unlimitedApproveAmount),c("setTokenAllowance",{allowance:v}),e(v),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(2),k>=f||"execution reverted"==t.t0.message?e(0):o({retryAttempt:k});case 27:case"end":return t.stop()}}),t,null,[[2,24]])})));return function(e){return t.apply(this,arguments)}}();o({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return O.apply(this,arguments)}),refreshTokenAllowce:(S=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.getters,o=t.commit,c=t.dispatch,m=t.rootGetters,d=t.state,o("SET_TOKEN_ALLOWANCE_LOADED",!1),l=m["metamask/networkConfig"],f=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var o=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(m){var l,k,h,T,A,data,E,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=m.retryAttempt,k=void 0===l?1:l,k++,t.prev=2,h=r.metamask.ethAccount,T=r.bulksender.bulksenderAddress,t.next=7,n.tokenInstance();case 7:return A=t.sent,data=n.isNFTToken?A.methods.isApprovedForAll(h,T).encodeABI():A.methods.allowance(h,T).encodeABI(),E={method:"eth_call",params:[{from:h,to:A._address,data:data},"latest"],from:h},t.next=12,c("metamask/sendAsync",E,{root:!0});case 12:v=t.sent,v=Object(z.hexToNumberString)(v),!n.isNFTToken||"1"!=v&&1!=v||(v=d.unlimitedApproveAmount),c("setTokenAllowance",{allowance:v}),e(v),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),k>=f||"execution reverted"==t.t0.message?e(0):o({retryAttempt:k});case 22:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e){return t.apply(this,arguments)}}();o({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return S.apply(this,arguments)}),approveForBulksender:(x=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,(m=r.amount)!=n.unlimitedApproveAmount&&(m=Object(te.a)(m).times(Object(te.a)(10).pow(parseInt(n.tokenSelected.decimals))).toString(10)),d=o.bulksender.bulksenderAddress,e.next=6,c("approve",{bulksenderAddress:d,amount:m});case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return x.apply(this,arguments)}),approveForBulksenderForNFTToken:(_=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,r.amount,d=o.bulksender.bulksenderAddress,m=n.unlimitedApproveAmount,e.next=7,c("_approveForNFTToken",{bulksenderAddress:d,setApproveAll:!0,amount:m});case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)}),revokeApproveOfBulksenderForNFTToken:(v=Object(Z.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,r=t.rootState,t.rootGetters,n=t.dispatch,t.commit,o=r.bulksender.bulksenderAddress,e.next=6,n("_approveForNFTToken",{bulksenderAddress:o,setApproveAll:!1,amount:0});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)}),checkAddressIsContract:(E=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,d=r.addresses,l=c["metamask/networkConfig"],f=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(Z.a)(regeneratorRuntime.mark((function c(l){var k,h,T,A,data,E,v,_,x;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return k=l.retryAttempt,h=void 0===k?1:k,h++,c.prev=2,T=m.metamask.ethAccount,c.next=6,o.tokenQueryInstance();case 6:return A=c.sent,data=A.methods.bulkCheckIfContracts(d).encodeABI(),E={method:"eth_call",params:[{from:T,to:A._address,data:data},"latest"],from:T},c.next=11,n("metamask/sendAsync",E,{root:!0});case 11:if(null==(v=c.sent)){c.next=17;break}_=oe.decodeParameters([{name:"contracts",type:"address[]"}],v),x=_.contracts,e(x),c.next=18;break;case 17:throw Error("bulkCheckIfContracts failed");case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(2),h>=f?t(c.t0):r({retryAttempt:h});case 23:case"end":return c.stop()}}),c,null,[[2,20]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return E.apply(this,arguments)}),checkTokenOwners:(A=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,o=t.state,c=t.getters,m=t.rootGetters,d=t.rootState,t.commit,l=r.tokenIds,f=m["metamask/networkConfig"],k=f.rpcCallRetryAttempt,f.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(Z.a)(regeneratorRuntime.mark((function m(f){var h,T,A,E,data,v,_,x,S;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return h=f.retryAttempt,T=void 0===h?1:h,T++,m.prev=2,A=d.metamask.ethAccount,m.next=6,c.tokenQueryInstance();case 6:return E=m.sent,data=E.methods.bulkQueryERC721Owers(o.address,l).encodeABI(),v={method:"eth_call",params:[{from:A,to:E._address,data:data},"latest"],from:A},m.next=11,n("metamask/sendAsync",v,{root:!0});case 11:if(null==(_=m.sent)){m.next=17;break}x=oe.decodeParameters([{name:"addrOwners",type:"address[]"}],_),S=x.addrOwners,e(S),m.next=18;break;case 17:throw Error("bulkCheckIfContracts failed");case 18:m.next=23;break;case 20:m.prev=20,m.t0=m.catch(2),T>=k?t(m.t0):r({retryAttempt:T});case 23:case"end":return m.stop()}}),m,null,[[2,20]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return A.apply(this,arguments)}),checkApproval:(T=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k,h,T,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,d=t.commit,l=r.amount,f=n.checkZeroTimes,l=Object(te.a)(l).times(Object(te.a)(10).pow(parseInt(n.tokenSelected.decimals))).toString(10),k=c.bulksender.bulksenderAddress,e.next=7,o.tokenInstance();case 7:return h=e.sent,T=c.metamask.ethAccount,A=0,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(n){var o,c,E,data,v,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.retryAttempt,c=void 0===o?0:o,c++,t.prev=2,(E=c>=Math.ceil(f/2)+1)&&(l="0"),data=h.methods.approve(k,l).encodeABI(),v={method:"eth_estimateGas",params:[{from:T,to:h._address,data:data,value:Object(z.numberToHex)(0)}],from:T},t.next=9,m("metamask/sendAsync",v,{root:!0});case 9:_=t.sent,_=Object(z.hexToNumber)(_),d("SET_NEED_TO_RESET_APPROVAL",E),E&&(A=-1),e({usedApproveZero:E,errorType:A}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),c>=f?e({usedApproveZero:!0,errorType:A=-2}):r({retryAttempt:c});case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 11:case"end":return e.stop()}}),e)}))),function(e,t){return T.apply(this,arguments)}),approveOld:(h=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k,h,T,A,E,data,v,_,x,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,l=r.bulksenderAddress,f=r.amount,k=0,h=null,e.prev=4,T=o.metamask.ethAccount,A=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList.includes(T)&&(A=o.metamask.gasPrice.instant),e.next=11,n.tokenInstance();case 11:return E=e.sent,data=E.methods.approve(l,f).encodeABI(),v={method:"eth_estimateGas",params:[{from:T,to:E._address,data:data,value:Object(z.numberToHex)(0)}],from:T},e.next=16,m("metamask/sendAsync",v,{root:!0});case 16:return _=e.sent,_=Object(z.hexToNumber)(_),console.log("approve tx",_),x={method:"eth_sendTransaction",params:[{from:T,to:E._address,gas:Object(z.numberToHex)(_+5e4),gasPrice:Object(z.toHex)(Object(z.toWei)(A.toString(),"gwei")),value:Object(z.numberToHex)(0),data:data}],from:T},e.next=22,m("lock/_formatEIP1559Transaction",{callParams:x},{root:!0});case 22:return x=e.sent,e.next=25,m("metamask/sendAsync",x,{root:!0});case 25:return S=e.sent,d("ADD_TX",S),d("SET_TOKEN_APPROVE_TX",S),d("SET_TOKEN_APPROVE_TX_STATUS",0),d("SET_TOKEN_APPROVE_AMOUNT",f),m("checkApproveTransactionStatus"),e.abrupt("return",{txHash:S,errorType:k});case 34:return e.prev=34,e.t0=e.catch(4),console.info(e.t0),e.abrupt("return",{txHash:h,errorType:k});case 38:case"end":return e.stop()}}),e,null,[[4,34]])}))),function(e,t){return h.apply(this,arguments)}),approve:(k=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,l=r.bulksenderAddress,f=r.amount,k=0,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(h){var T,A,E,v,_,data,x,S,O,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T=h.retryAttempt,A=void 0===T?0:T,A++,t.prev=2,E=o.metamask.ethAccount,v=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList.includes(E)&&(v=o.metamask.gasPrice.instant),t.next=9,n.tokenInstance();case 9:return _=t.sent,data=_.methods.approve(l,f).encodeABI(),x={method:"eth_estimateGas",params:[{from:E,to:_._address,data:data,value:Object(z.numberToHex)(0)}],from:E},t.next=14,m("metamask/sendAsync",x,{root:!0});case 14:return S=t.sent,S=Object(z.hexToNumber)(S),console.log("approve tx",S),O={method:"eth_sendTransaction",params:[{from:E,to:_._address,gas:Object(z.numberToHex)(S+5e4),gasPrice:Object(z.toHex)(Object(z.toWei)(v.toString(),"gwei")),value:Object(z.numberToHex)(0),data:data}],from:E},t.next=20,m("lock/_formatEIP1559Transaction",{callParams:O},{root:!0});case 20:return O=t.sent,t.next=23,m("metamask/sendAsync",O,{root:!0});case 23:y=t.sent,d("ADD_TX",y),d("SET_TOKEN_APPROVE_TX",y),d("SET_TOKEN_APPROVE_TX_STATUS",0),d("SET_TOKEN_APPROVE_AMOUNT",f),m("checkApproveTransactionStatus"),e({txHash:y,errorType:k}),t.next=42;break;case 32:if(t.prev=32,t.t0=t.catch(2),!(A>=2||4001==t.t0.code)){t.next=39;break}"execution reverted"==t.t0.message&&(k=-1),e({txHash:null,errorType:k}),t.next=42;break;case 39:return t.next=41,m("lock/checkEIP1559Error",{e:t.t0},{root:!0});case 41:r({retryAttempt:A});case 42:case"end":return t.stop()}}),t,null,[[2,32]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return k.apply(this,arguments)}),_approveForNFTToken:(f=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,l=r.bulksenderAddress,f=r.setApproveAll,k=r.amount,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(h){var T,A,E,v,_,data,x,S,O,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T=h.retryAttempt,A=void 0===T?0:T,A++,t.prev=2,E=o.metamask.ethAccount,v=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList,t.next=8,n.tokenInstance();case 8:return _=t.sent,data=_.methods.setApprovalForAll(l,f).encodeABI(),x={method:"eth_estimateGas",params:[{from:E,to:_._address,data:data,value:Object(z.numberToHex)(0)}],from:E},t.next=13,m("metamask/sendAsync",x,{root:!0});case 13:return S=t.sent,S=Object(z.hexToNumber)(S),console.log("approve tx",S),O={method:"eth_sendTransaction",params:[{from:E,to:_._address,gas:Object(z.numberToHex)(S+5e4),gasPrice:Object(z.toHex)(Object(z.toWei)(v.toString(),"gwei")),value:Object(z.numberToHex)(0),data:data}],from:E},t.next=19,m("bulksender/_formatEIP1559Transaction",{callParams:O},{root:!0});case 19:return O=t.sent,t.next=22,m("metamask/sendAsync",O,{root:!0});case 22:y=t.sent,d("ADD_TX",y),d("SET_TOKEN_APPROVE_TX",y),d("SET_TOKEN_APPROVE_TX_STATUS",0),d("SET_TOKEN_APPROVE_AMOUNT",k),m("checkApproveTransactionStatus"),e({txHash:y,errorType:0}),t.next=40;break;case 31:if(t.prev=31,t.t0=t.catch(2),!(A>=2||4001==t.t0.code)){t.next=37;break}e({txHash:null,errorType:0}),t.next=40;break;case 37:return t.next=39,m("lock/checkEIP1559Error",{e:t.t0},{root:!0});case 39:r({retryAttempt:A});case 40:case"end":return t.stop()}}),t,null,[[2,31]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)}),_approveForNFTTokenOld:(l=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k,h,T,A,E,v,data,_,x,S,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,l=r.bulksenderAddress,f=r.setApproveAll,k=r.amount,h=0,T=null,e.prev=4,A=o.metamask.ethAccount,E=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList,e.next=10,n.tokenInstance();case 10:return v=e.sent,data=v.methods.setApprovalForAll(l,f).encodeABI(),_={method:"eth_estimateGas",params:[{from:A,to:v._address,data:data,value:Object(z.numberToHex)(0)}],from:A},e.next=15,m("metamask/sendAsync",_,{root:!0});case 15:return x=e.sent,x=Object(z.hexToNumber)(x),console.log("approve tx",x),S={method:"eth_sendTransaction",params:[{from:A,to:v._address,gas:Object(z.numberToHex)(x+5e4),gasPrice:Object(z.toHex)(Object(z.toWei)(E.toString(),"gwei")),value:Object(z.numberToHex)(0),data:data}],from:A},e.next=21,m("lock/_formatEIP1559Transaction",{callParams:S},{root:!0});case 21:return S=e.sent,e.next=24,m("metamask/sendAsync",S,{root:!0});case 24:return O=e.sent,d("ADD_TX",O),d("SET_TOKEN_APPROVE_TX",O),d("SET_TOKEN_APPROVE_TX_STATUS",0),d("SET_TOKEN_APPROVE_AMOUNT",k),m("checkApproveTransactionStatus"),e.abrupt("return",{txHash:O,errorType:h});case 33:return e.prev=33,e.t0=e.catch(4),console.info(e.t0),e.abrupt("return",{txHash:T,errorType:h});case 37:case"end":return e.stop()}}),e,null,[[4,33]])}))),function(e,t){return l.apply(this,arguments)}),approveForLocker:(d=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootState,t.rootGetters,o=t.dispatch,c=t.commit,m=r.tokenAddress,d=r.amount,c("SET_TOKEN_APPROVE_TX_STATUS",-1),c("SET_TOKEN_APPROVE_AMOUNT",0),l=n.lock.contractAddress,e.next=7,o("_approve",{tokenAddress:m,contractAddress:l,amount:d});case 7:return f=e.sent,(k=f.txHash)&&(c("SET_TOKEN_APPROVE_TX",k),c("SET_TOKEN_APPROVE_TX_STATUS",0),c("SET_TOKEN_APPROVE_AMOUNT",d),o("checkApproveTransactionStatus",{txHash:k})),e.abrupt("return",f);case 11:case"end":return e.stop()}}),e)}))),function(e,t){return d.apply(this,arguments)}),_approve:(m=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,m=r.tokenAddress,d=r.contractAddress,l=r.amount,f=0,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(Z.a)(regeneratorRuntime.mark((function t(k){var h,T,A,E,v,data,_,x,S,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=k.retryAttempt,T=void 0===h?0:h,T++,t.prev=2,A=o.metamask.ethAccount,E=o.metamask.gasPrice.fast,t.next=7,n.tokenInstance(m);case 7:return v=t.sent,data=v.methods.approve(d,l).encodeABI(),_={method:"eth_estimateGas",params:[{from:A,to:v._address,data:data,value:Object(z.numberToHex)(0)}],from:A},t.next=12,c("metamask/sendAsync",_,{root:!0});case 12:return x=t.sent,x=Object(z.hexToNumber)(x),console.log("approve tx",x),S={method:"eth_sendTransaction",params:[{from:A,to:v._address,gas:Object(z.numberToHex)(x+5e4),gasPrice:Object(z.toHex)(Object(z.toWei)(E.toString(),"gwei")),value:Object(z.numberToHex)(0),data:data}],from:A},t.next=18,c("lock/_formatEIP1559Transaction",{callParams:S},{root:!0});case 18:return S=t.sent,t.next=21,c("metamask/sendAsync",S,{root:!0});case 21:O=t.sent,e({txHash:O,errorType:f}),t.next=35;break;case 25:if(t.prev=25,t.t0=t.catch(2),!(T>=2||4001==t.t0.code)){t.next=32;break}"execution reverted"==t.t0.message&&(f=-1),e({txHash:null,errorType:f}),t.next=35;break;case 32:return t.next=34,c("lock/checkEIP1559Error",{e:t.t0},{root:!0});case 34:r({retryAttempt:T});case 35:case"end":return t.stop()}}),t,null,[[2,25]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)}),checkApproveTransactionStatus:(c=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,e.next=6,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 6:null!=(l=e.sent)&&null!=l.status?(f=l.status,c("SET_TOKEN_APPROVE_TX_STATUS",f="0x1"==f||1==f?1:-2)):setTimeout((function(){o("checkApproveTransactionStatus",{txHash:m})}),1e3*d),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),setTimeout((function(){o("checkApproveTransactionStatus",{txHash:m})}),1e3*d);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(e,t){return c.apply(this,arguments)}),getTokenBaseInfo:(o=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,t.commit,o=t.dispatch,t.getters,c=t.rootGetters,t.state,m=r.tokenAddress,d=c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var r=function(){var l=Object(Z.a)(regeneratorRuntime.mark((function l(f){var k,h,T,A,E,v,_,x;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return k=f.retryAttempt,h=void 0===k?1:k,h++,l.prev=2,T=n.metamask.ethAccount,A=c["metamask/networkConfig"].rpcUrl,(E=[]).push({method:"eth_call",params:[{from:T,to:m,data:"0x06fdde03"},"latest"]},{method:"eth_call",params:[{from:T,to:m,data:"0x95d89b41"},"latest"]},{method:"eth_call",params:[{from:T,to:m,data:"0x313ce567"},"latest"]}),(v={params:E}).rpcUrl=A,l.next=14,o("metamask/sendJSONRPCRequest",v,{root:!0});case 14:_=l.sent,x={},(_=ae()(_,3)).forEach((function(e,i){var t=e[2];if("0x"==t)x={contractAddress:m,name:"Unknown Token",symbol:"UNKNOWN",decimals:-1};else{var r=oe.decodeParameters([{name:"name",type:"string"}],e[0]).name,symbol=oe.decodeParameters([{name:"symbol",type:"string"}],e[1]).symbol;x={contractAddress:m,name:r,symbol:symbol,decimals:Object(z.hexToNumber)(t)}}})),e(x),l.next=24;break;case 21:l.prev=21,l.t0=l.catch(2),h>=d?t(l.t0):r({retryAttempt:h});case 24:case"end":return l.stop()}}),l,null,[[2,21]])})));return function(e){return l.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),getBalanceInfo:(n=Object(Z.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,t.commit,o=t.dispatch,t.getters,c=t.rootGetters,t.state,m=r.tokenAddress,d=c["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var r=function(){var l=Object(Z.a)(regeneratorRuntime.mark((function l(f){var k,h,T,A,E,v,_,x,S,O,y,w;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return k=f.retryAttempt,h=void 0===k?1:k,h++,l.prev=2,T=n.metamask.ethAccount,A=c["metamask/networkConfig"].rpcUrl,E=n.lock.contractAddress,v=[],T||(T="0x0100204060200300000004000500060030800000"),_=E.replace("0x",""),x="0x70a08231000000000000000000000000"+T.replace("0x",""),S="0xdd62ed3e000000000000000000000000"+T.replace("0x","")+"000000000000000000000000"+_,v.push({method:"eth_call",params:[{from:T,to:m,data:x},"latest"]},{method:"eth_call",params:[{from:T,to:m,data:S},"latest"]},{method:"eth_call",params:[{from:T,to:m,data:"0x313ce567"},"latest"]}),(O={params:v}).rpcUrl=A,l.next=17,o("metamask/sendJSONRPCRequest",O,{root:!0});case 17:y=l.sent,w={},(y=ae()(y,3)).forEach((function(e,i){var t=e[0],r=e[1],n=Object(z.hexToNumber)(e[2]);w={contractAddress:m,decimals:n,displayBalance:Object(te.a)(t).div(Object(te.a)(10).pow(n)).toString(10),balance:Object(z.hexToNumberString)(t),allowance:Object(z.hexToNumberString)(r)}})),e(w),l.next=27;break;case 24:l.prev=24,l.t0=l.catch(2),h>=d?t(l.t0):r({retryAttempt:h});case 27:case"end":return l.stop()}}),l,null,[[2,24]])})));return function(e){return l.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})};t.default={namespaced:!0,state:function(){return{address:null,balance:0,balanceDisplay:"",allowance:0,allowanceNumber:0,balanceNumber:0,allowanceEnough:!1,balanceEnough:!1,approveAmount:0,approveTx:"",approveTxStatus:-1,tokenSelected:null,tokenSelectedDisplayInfo:"",txs:[],tokenSymbolLoaded:!1,tokenAllowanceLoaded:!1,tokenInfoLoaded:!1,checkZeroTimes:4,needToResetApproval:!1,isERC721:!1,isERC1155:!1,tokenType:3,isNFTToken:!1,nftApproveAmount:"100000000000000000000000000000000000000001",unlimitedApproveAmount:"115792089237316195423570985008687907853269984665640564039457584007913129639935",price:0,priceLoaded:!1,gasForProcessing:-1,gasForProcessingChecking:!1,specialTypesChecking:!1,tokenErrorType:0,gasProcessingSureFunctions:["ffb2c479"],gasProcessingPossibleFunctions:["14b6ca96","2d48e896","9d1944f5","9c1b8af5","871c128d","e98030c7"]}},getters:se,mutations:{SET_TOKEN_ADDRESS:function(e,address){e.address=address},SET_TOKEN_BALANCE:function(e,t){e.balance=t},SET_TOKEN_SELECTED:function(e,t){e.tokenSelected=t},SET_TOKEN_SELECTED_DISPLAY_INFO:function(e,t){e.tokenSelectedDisplayInfo=t},SET_TOKEN_ALLOWANCE:function(e,t){e.allowance=t},SET_TOKEN_ALLOWANCE_ENOUGH:function(e,t){e.allowanceEnough=t},SET_TOKEN_BALANCE_ENOUGH:function(e,t){e.balanceEnough=t},SET_TOKEN_APPROVE_AMOUNT:function(e,t){e.approveAmount=t},SET_TOKEN_APPROVE_TX:function(e,t){e.approveTx=t},SET_TOKEN_APPROVE_TX_STATUS:function(e,t){e.approveTxStatus=t},SET_TOKEN_BALANCE_LOADED:function(e,t){e.tokenBalanceLoaded=t},SET_TOKEN_ALLOWANCE_LOADED:function(e,t){e.tokenAllowanceLoaded=t},SET_TOKEN_INFO_LOADED:function(e,t){e.tokenInfoLoaded=t},SET_NEED_TO_RESET_APPROVAL:function(e,t){e.needToResetApproval=t},SET_IS_ERC_721:function(e,t){e.isERC721=t},SET_TOKEN_TYPE:function(e,t){e.tokenType=t},SET_TOKEN_PRICE:function(e,t){e.price=t},SET_PRICE_LOADED:function(e,t){e.priceLoaded=t},SET_GAS_PROCESSING:function(e,t){e.gasForProcessing=t},SET_GAS_PROCESSING_CHECKING:function(e,t){e.gasForProcessingChecking=t},SET_SPECIAL_TYPES_CHECKING:function(e,t){e.specialTypesChecking=t},SET_TOKEN_ERROR_TYPE:function(e,t){e.tokenErrorType=t},SET_TOKEN_DECIMALS:function(e,t){e.tokenSelected.decimals=t},ADD_TX:function(e,t){e.txs.push(t)},CLEAR:function(e){e.approveTx="",e.approveTxStatus=-1,e.needToResetApproval=!1}},actions:ce}}}]);