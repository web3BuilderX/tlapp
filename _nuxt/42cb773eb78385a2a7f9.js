/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1049:function(t,e,n){(function(e,n){!function(){"use strict";var r="object"==typeof window?window:{};!r.JS_SHA3_NO_NODE_JS&&"object"==typeof e&&e.versions&&e.versions.node&&(r=n);for(var o=!r.JS_SHA3_NO_COMMON_JS&&"object"==typeof t&&t.exports,c="0123456789abcdef".split(""),l=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],f=[224,256,384,512],d=["hex","buffer","arrayBuffer","array"],m=function(t,e,n){return function(r){return new C(t,e,t).update(r)[n]()}},y=function(t,e,n){return function(r,o){return new C(t,e,o).update(r)[n]()}},k=function(t,e){var n=m(t,e,"hex");n.create=function(){return new C(t,e,t)},n.update=function(t){return n.create().update(t)};for(var i=0;i<d.length;++i){var r=d[i];n[r]=m(t,e,r)}return n},w=[{name:"keccak",padding:[1,256,65536,16777216],bits:f,createMethod:k},{name:"sha3",padding:[6,1536,393216,100663296],bits:f,createMethod:k},{name:"shake",padding:[31,7936,2031616,520093696],bits:[128,256],createMethod:function(t,e){var n=y(t,e,"hex");n.create=function(n){return new C(t,e,n)},n.update=function(t,e){return n.create(e).update(t)};for(var i=0;i<d.length;++i){var r=d[i];n[r]=y(t,e,r)}return n}}],_={},B=[],i=0;i<w.length;++i)for(var v=w[i],x=v.bits,R=0;R<x.length;++R){var L=v.name+"_"+x[R];B.push(L),_[L]=v.createMethod(x[R],v.padding)}function C(t,e,n){this.blocks=[],this.s=[],this.padding=e,this.outputBits=n,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var i=0;i<50;++i)this.s[i]=0}C.prototype.update=function(t){var e="string"!=typeof t;e&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t));for(var i,code,n=t.length,r=this.blocks,o=this.byteCount,c=this.blockCount,h=0,s=this.s;h<n;){if(this.reset)for(this.reset=!1,r[0]=this.block,i=1;i<c+1;++i)r[i]=0;if(e)for(i=this.start;h<n&&i<o;++h)r[i>>2]|=t[h]<<l[3&i++];else for(i=this.start;h<n&&i<o;++h)(code=t.charCodeAt(h))<128?r[i>>2]|=code<<l[3&i++]:code<2048?(r[i>>2]|=(192|code>>6)<<l[3&i++],r[i>>2]|=(128|63&code)<<l[3&i++]):code<55296||code>=57344?(r[i>>2]|=(224|code>>12)<<l[3&i++],r[i>>2]|=(128|code>>6&63)<<l[3&i++],r[i>>2]|=(128|63&code)<<l[3&i++]):(code=65536+((1023&code)<<10|1023&t.charCodeAt(++h)),r[i>>2]|=(240|code>>18)<<l[3&i++],r[i>>2]|=(128|code>>12&63)<<l[3&i++],r[i>>2]|=(128|code>>6&63)<<l[3&i++],r[i>>2]|=(128|63&code)<<l[3&i++]);if(this.lastByteIndex=i,i>=o){for(this.start=i-o,this.block=r[c],i=0;i<c;++i)s[i]^=r[i];A(s),this.reset=!0}else this.start=i}return this},C.prototype.finalize=function(){var t=this.blocks,i=this.lastByteIndex,e=this.blockCount,s=this.s;if(t[i>>2]|=this.padding[3&i],this.lastByteIndex===this.byteCount)for(t[0]=t[e],i=1;i<e+1;++i)t[i]=0;for(t[e-1]|=2147483648,i=0;i<e;++i)s[i]^=t[i];A(s)},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,s=this.s,n=this.outputBlocks,r=this.extraBytes,i=0,o=0,l="";o<n;){for(i=0;i<e&&o<n;++i,++o)t=s[i],l+=c[t>>4&15]+c[15&t]+c[t>>12&15]+c[t>>8&15]+c[t>>20&15]+c[t>>16&15]+c[t>>28&15]+c[t>>24&15];o%e==0&&(A(s),i=0)}return r&&(t=s[i],r>0&&(l+=c[t>>4&15]+c[15&t]),r>1&&(l+=c[t>>12&15]+c[t>>8&15]),r>2&&(l+=c[t>>20&15]+c[t>>16&15])),l},C.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,s=this.s,n=this.outputBlocks,r=this.extraBytes,i=0,o=0,c=this.outputBits>>3;t=r?new ArrayBuffer(n+1<<2):new ArrayBuffer(c);for(var l=new Uint32Array(t);o<n;){for(i=0;i<e&&o<n;++i,++o)l[o]=s[i];o%e==0&&A(s)}return r&&(l[i]=s[i],t=t.slice(0,c)),t},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var t,e,n=this.blockCount,s=this.s,r=this.outputBlocks,o=this.extraBytes,i=0,c=0,l=[];c<r;){for(i=0;i<n&&c<r;++i,++c)t=c<<2,e=s[i],l[t]=255&e,l[t+1]=e>>8&255,l[t+2]=e>>16&255,l[t+3]=e>>24&255;c%n==0&&A(s)}return o&&(t=c<<2,e=s[i],o>0&&(l[t]=255&e),o>1&&(l[t+1]=e>>8&255),o>2&&(l[t+2]=e>>16&255)),l};var A=function(s){var t,e,n,r,o,c,l,f,d,m,y,k,w,_,B,v,x,R,L,C,A,F,T,I,E,S,M,N,H,j,O,P,z,D,$,U,J,W,Q,G,K,V,X,Y,Z,tt,et,nt,st,ot,it,at,ct,ut,lt,ht,pt,ft,mt,yt,kt,gt,wt;for(n=0;n<48;n+=2)r=s[0]^s[10]^s[20]^s[30]^s[40],o=s[1]^s[11]^s[21]^s[31]^s[41],c=s[2]^s[12]^s[22]^s[32]^s[42],l=s[3]^s[13]^s[23]^s[33]^s[43],f=s[4]^s[14]^s[24]^s[34]^s[44],d=s[5]^s[15]^s[25]^s[35]^s[45],m=s[6]^s[16]^s[26]^s[36]^s[46],y=s[7]^s[17]^s[27]^s[37]^s[47],t=(k=s[8]^s[18]^s[28]^s[38]^s[48])^(c<<1|l>>>31),e=(w=s[9]^s[19]^s[29]^s[39]^s[49])^(l<<1|c>>>31),s[0]^=t,s[1]^=e,s[10]^=t,s[11]^=e,s[20]^=t,s[21]^=e,s[30]^=t,s[31]^=e,s[40]^=t,s[41]^=e,t=r^(f<<1|d>>>31),e=o^(d<<1|f>>>31),s[2]^=t,s[3]^=e,s[12]^=t,s[13]^=e,s[22]^=t,s[23]^=e,s[32]^=t,s[33]^=e,s[42]^=t,s[43]^=e,t=c^(m<<1|y>>>31),e=l^(y<<1|m>>>31),s[4]^=t,s[5]^=e,s[14]^=t,s[15]^=e,s[24]^=t,s[25]^=e,s[34]^=t,s[35]^=e,s[44]^=t,s[45]^=e,t=f^(k<<1|w>>>31),e=d^(w<<1|k>>>31),s[6]^=t,s[7]^=e,s[16]^=t,s[17]^=e,s[26]^=t,s[27]^=e,s[36]^=t,s[37]^=e,s[46]^=t,s[47]^=e,t=m^(r<<1|o>>>31),e=y^(o<<1|r>>>31),s[8]^=t,s[9]^=e,s[18]^=t,s[19]^=e,s[28]^=t,s[29]^=e,s[38]^=t,s[39]^=e,s[48]^=t,s[49]^=e,_=s[0],B=s[1],tt=s[11]<<4|s[10]>>>28,et=s[10]<<4|s[11]>>>28,N=s[20]<<3|s[21]>>>29,H=s[21]<<3|s[20]>>>29,yt=s[31]<<9|s[30]>>>23,kt=s[30]<<9|s[31]>>>23,V=s[40]<<18|s[41]>>>14,X=s[41]<<18|s[40]>>>14,D=s[2]<<1|s[3]>>>31,$=s[3]<<1|s[2]>>>31,v=s[13]<<12|s[12]>>>20,x=s[12]<<12|s[13]>>>20,nt=s[22]<<10|s[23]>>>22,st=s[23]<<10|s[22]>>>22,j=s[33]<<13|s[32]>>>19,O=s[32]<<13|s[33]>>>19,gt=s[42]<<2|s[43]>>>30,wt=s[43]<<2|s[42]>>>30,ut=s[5]<<30|s[4]>>>2,lt=s[4]<<30|s[5]>>>2,U=s[14]<<6|s[15]>>>26,J=s[15]<<6|s[14]>>>26,R=s[25]<<11|s[24]>>>21,L=s[24]<<11|s[25]>>>21,ot=s[34]<<15|s[35]>>>17,it=s[35]<<15|s[34]>>>17,P=s[45]<<29|s[44]>>>3,z=s[44]<<29|s[45]>>>3,I=s[6]<<28|s[7]>>>4,E=s[7]<<28|s[6]>>>4,ht=s[17]<<23|s[16]>>>9,pt=s[16]<<23|s[17]>>>9,W=s[26]<<25|s[27]>>>7,Q=s[27]<<25|s[26]>>>7,C=s[36]<<21|s[37]>>>11,A=s[37]<<21|s[36]>>>11,at=s[47]<<24|s[46]>>>8,ct=s[46]<<24|s[47]>>>8,Y=s[8]<<27|s[9]>>>5,Z=s[9]<<27|s[8]>>>5,S=s[18]<<20|s[19]>>>12,M=s[19]<<20|s[18]>>>12,ft=s[29]<<7|s[28]>>>25,mt=s[28]<<7|s[29]>>>25,G=s[38]<<8|s[39]>>>24,K=s[39]<<8|s[38]>>>24,F=s[48]<<14|s[49]>>>18,T=s[49]<<14|s[48]>>>18,s[0]=_^~v&R,s[1]=B^~x&L,s[10]=I^~S&N,s[11]=E^~M&H,s[20]=D^~U&W,s[21]=$^~J&Q,s[30]=Y^~tt&nt,s[31]=Z^~et&st,s[40]=ut^~ht&ft,s[41]=lt^~pt&mt,s[2]=v^~R&C,s[3]=x^~L&A,s[12]=S^~N&j,s[13]=M^~H&O,s[22]=U^~W&G,s[23]=J^~Q&K,s[32]=tt^~nt&ot,s[33]=et^~st&it,s[42]=ht^~ft&yt,s[43]=pt^~mt&kt,s[4]=R^~C&F,s[5]=L^~A&T,s[14]=N^~j&P,s[15]=H^~O&z,s[24]=W^~G&V,s[25]=Q^~K&X,s[34]=nt^~ot&at,s[35]=st^~it&ct,s[44]=ft^~yt&gt,s[45]=mt^~kt&wt,s[6]=C^~F&_,s[7]=A^~T&B,s[16]=j^~P&I,s[17]=O^~z&E,s[26]=G^~V&D,s[27]=K^~X&$,s[36]=ot^~at&Y,s[37]=it^~ct&Z,s[46]=yt^~gt&ut,s[47]=kt^~wt&lt,s[8]=F^~_&v,s[9]=T^~B&x,s[18]=P^~I&S,s[19]=z^~E&M,s[28]=V^~D&U,s[29]=X^~$&J,s[38]=at^~Y&tt,s[39]=ct^~Z&et,s[48]=gt^~ut&ht,s[49]=wt^~lt&pt,s[0]^=h[n],s[1]^=h[n+1]};if(o)t.exports=_;else for(i=0;i<B.length;++i)r[B[i]]=_[B[i]]}()}).call(this,n(31),n(26))},1152:function(t,e,n){n(402),n(570);const r=n(1154),o=(t,e)=>t+e,c=["sync","latest"];function l(t){return Number.parseInt(t,16)}t.exports=class extends r{constructor(t={}){super(),this._blockResetDuration=t.blockResetDuration||2e4,this._blockResetTimeout,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){if(this._currentBlock)return this._currentBlock;return await new Promise(t=>this.once("latest",t))}removeAllListeners(t){t?super.removeAllListeners(t):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener()}_start(){}_end(){}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(t,e){c.includes(t)&&this._maybeStart()}_onRemoveListener(t,e){this._getBlockTrackerEventCount()>0||this._maybeEnd()}_maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),this._start())}_maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),this._end())}_getBlockTrackerEventCount(){return c.map(t=>this.listenerCount(t)).reduce(o)}_newPotentialLatest(t){const e=this._currentBlock;e&&l(t)<=l(e)||this._setCurrentBlock(t)}_setCurrentBlock(t){const e=this._currentBlock;this._currentBlock=t,this.emit("latest",t),this.emit("sync",{oldBlock:e,newBlock:t})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}},1189:function(t,e){t.exports=function(t){return(e,n,r,o)=>{const c=t[e.method];return void 0===c?r():"function"==typeof c?c(e,n,r,o):(n.result=c,o())}}},1190:function(t,e,n){const r=n(402),o=n(1191),c=n(1192),{bnToHex:l,hexToInt:h,incrementHexInt:f,minBlockRef:d,blockRefIsNumber:m}=n(231);t.exports=class extends c{constructor({provider:t,params:e}){super(),this.type="log",this.ethQuery=new r(t),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},e),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(address=>address.toLowerCase()))}async initialize({currentBlock:t}){let e=this.params.fromBlock;["latest","pending"].includes(e)&&(e=t),"earliest"===e&&(e="0x0"),this.params.fromBlock=e;const n=d(this.params.toBlock,t),r=Object.assign({},this.params,{toBlock:n}),o=await this._fetchLogs(r);this.addInitialResults(o)}async update({oldBlock:t,newBlock:e}){const n=e;let r;r=t?f(t):e;const o=Object.assign({},this.params,{fromBlock:r,toBlock:n}),c=(await this._fetchLogs(o)).filter(t=>this.matchLog(t));this.addResults(c)}async _fetchLogs(t){return await o(e=>this.ethQuery.getLogs(t,e))()}matchLog(t){if(h(this.params.fromBlock)>=h(t.blockNumber))return!1;if(m(this.params.toBlock)&&h(this.params.toBlock)<=h(t.blockNumber))return!1;const e=t.address&&t.address.toLowerCase();return!(this.params.address&&e&&!this.params.address.includes(e))&&this.params.topics.every((e,n)=>{let r=t.topics[n];if(!r)return!1;r=r.toLowerCase();let o=Array.isArray(e)?e:[e];return!!o.includes(null)||(o=o.map(t=>t.toLowerCase()),o.includes(r))})}}},1191:function(t,e,n){"use strict";const r=(t,e,n,r)=>function(...o){return new(0,e.promiseModule)((c,l)=>{e.multiArgs?o.push((...t)=>{e.errorFirst?t[0]?l(t):(t.shift(),c(t)):c(t)}):e.errorFirst?o.push((t,e)=>{t?l(t):c(e)}):o.push(c);const h=this===n?r:this;Reflect.apply(t,h,o)})},o=new WeakMap;t.exports=(input,t)=>{t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};const e=typeof input;if(null===input||"object"!==e&&"function"!==e)throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===input?"null":e}\``);const n=new WeakMap,c=new Proxy(input,{apply(e,o,l){const h=n.get(e);if(h)return Reflect.apply(h,o,l);const f=t.excludeMain?e:r(e,t,c,e);return n.set(e,f),Reflect.apply(f,o,l)},get(e,l){const h=e[l];if(!((e,n)=>{let r=o.get(e);if(r||(r={},o.set(e,r)),n in r)return r[n];const c=pattern=>"string"==typeof pattern||"symbol"==typeof n?n===pattern:pattern.test(n),desc=Reflect.getOwnPropertyDescriptor(e,n),l=void 0===desc||desc.writable||desc.configurable,h=(t.include?t.include.some(c):!t.exclude.some(c))&&l;return r[n]=h,h})(e,l)||h===Function.prototype[l])return h;const f=n.get(h);if(f)return f;if("function"==typeof h){const o=r(h,t,c,e);return n.set(h,o),o}return h}});return c}},1192:function(t,e,n){const r=n(410);t.exports=class extends r{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(t){this.allResults=this.allResults.concat(t),super.addResults(t)}addInitialResults(t){this.allResults=this.allResults.concat(t),super.addInitialResults(t)}getAllResults(){return this.allResults}}},1193:function(t,e,n){const r=n(410),o=n(411),{incrementHexInt:c}=n(231);t.exports=class extends r{constructor({provider:t,params:e}){super(),this.type="block",this.provider=t}async update({oldBlock:t,newBlock:e}){const n=e,r=c(t),l=(await o({provider:this.provider,fromBlock:r,toBlock:n})).map(t=>t.hash);this.addResults(l)}}},1194:function(t,e,n){const r=n(410),o=n(411),{incrementHexInt:c}=n(231);t.exports=class extends r{constructor({provider:t}){super(),this.type="tx",this.provider=t}async update({oldBlock:t}){const e=t,n=c(t),r=await o({provider:this.provider,fromBlock:n,toBlock:e}),l=[];for(const t of r)l.push(...t.transactions);this.addResults(l)}}},1208:function(t,e,n){const r=n(191).default,o=n(583),{createAsyncMiddleware:c}=n(281),l=n(578),{unsafeRandomBytes:h,incrementHexInt:f}=n(231),d=n(411);function m(t){return{hash:t.hash,parentHash:t.parentHash,sha3Uncles:t.sha3Uncles,miner:t.miner,stateRoot:t.stateRoot,transactionsRoot:t.transactionsRoot,receiptsRoot:t.receiptsRoot,logsBloom:t.logsBloom,difficulty:t.difficulty,number:t.number,gasLimit:t.gasLimit,gasUsed:t.gasUsed,nonce:t.nonce,mixHash:t.mixHash,timestamp:t.timestamp,extraData:t.extraData}}t.exports=function({blockTracker:t,provider:e}){const n={},y=l({blockTracker:t,provider:e});let k=!1;const w=new r,_=o({eth_subscribe:c((async function(r,o){if(k)throw new Error("SubscriptionManager - attempting to use after destroying");const c=r.params[0],l=h(16);let sub;switch(c){case"newHeads":sub=function({subId:n}){const sub={type:c,destroy:async()=>{t.removeListener("sync",sub.update)},update:async({oldBlock:t,newBlock:r})=>{const o=r,c=f(t);(await d({provider:e,fromBlock:c,toBlock:o})).map(m).forEach(t=>{B(n,t)})}};return t.on("sync",sub.update),sub}({subId:l});break;case"logs":const n=r.params[1],filter=await y.newLogFilter(n);sub=function({subId:t,filter:filter}){return filter.on("update",e=>B(t,e)),{type:c,destroy:async()=>await y.uninstallFilter(filter.idHex)}}({subId:l,filter:filter});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${c}"`)}return n[l]=sub,void(o.result=l)})),eth_unsubscribe:c((async function(t,e){if(k)throw new Error("SubscriptionManager - attempting to use after destroying");const r=t.params[0],o=n[r];if(!o)return void(e.result=!1);delete n[r],await o.destroy(),e.result=!0}))});return _.destroy=function(){w.removeAllListeners();for(const t in n)n[t].destroy(),delete n[t];k=!0},{events:w,middleware:_};function B(t,e){w.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:t,result:e}})}}},231:function(t,e){function n(t){return t.sort((t,e)=>"latest"===t||"earliest"===e?1:"latest"===e||"earliest"===t?-1:r(t)-r(e))}function r(t){return null==t?t:Number.parseInt(t,16)}function o(t){if(null==t)return t;let e=t.toString(16);return e.length%2&&(e="0"+e),"0x"+e}function c(){return Math.floor(16*Math.random()).toString(16)}t.exports={minBlockRef:function(...t){return n(t)[0]},maxBlockRef:function(...t){const e=n(t);return e[e.length-1]},sortBlockRefs:n,bnToHex:function(t){return"0x"+t.toString(16)},blockRefIsNumber:function(t){return t&&!["earliest","latest","pending"].includes(t)},hexToInt:r,incrementHexInt:function(t){if(null==t)return t;return o(r(t)+1)},intToHex:o,unsafeRandomBytes:function(t){let e="0x";for(let i=0;i<t;i++)e+=c(),e+=c();return e}}},397:function(t,e,n){(function(t){var r=n(1049).keccak_256,o=n(1050);function c(t){return t?o.toUnicode(t,{useStd3ASCII:!0,transitional:!1}):t}e.hash=function(e){for(var n="",i=0;i<32;i++)n+="00";if(name=c(e),name){var o=name.split(".");for(i=o.length-1;i>=0;i--){var l=r(o[i]);n=r(new t(n+l,"hex"))}}return"0x"+n},e.normalize=c}).call(this,n(12).Buffer)},410:function(t,e,n){const r=n(191).default;t.exports=class extends r{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(t){this.updates=this.updates.concat(t),t.forEach(t=>this.emit("update",t))}addInitialResults(t){}getChangesAndClear(){const t=this.updates;return this.updates=[],t}}},411:function(t,e){function n(t){return null==t?t:Number.parseInt(t,16)}function r(t){if(null==t)return t;return"0x"+t.toString(16)}t.exports=async function({provider:t,fromBlock:e,toBlock:o}){e||(e=o);const c=n(e),l=n(o),h=Array(l-c+1).fill().map((t,e)=>c+e).map(r);return await Promise.all(h.map(e=>function(t,e,n){return new Promise((r,o)=>{t.sendAsync({id:1,jsonrpc:"2.0",method:e,params:n},(t,e)=>{if(t)return o(t);r(e.result)})})}(t,"eth_getBlockByNumber",[e,!1])))}},569:function(t,e,n){const r=n(570),o=n(1152);function c(t,e){return new Promise(n=>{const r=setTimeout(n,t);r.unref&&e&&r.unref()})}t.exports=class extends o{constructor(t={}){if(!t.provider)throw new Error("PollingBlockTracker - no provider specified.");const e=t.pollingInterval||2e4,n=t.retryTimeout||e/10,r=void 0===t.keepEventLoopActive||t.keepEventLoopActive,o=t.setSkipCacheFlag||!1;super(Object.assign({blockResetDuration:e},t)),this._provider=t.provider,this._pollingInterval=e,this._retryTimeout=n,this._keepEventLoopActive=r,this._setSkipCacheFlag=o}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}_start(){this._performSync().catch(t=>this.emit("error",t))}async _performSync(){for(;this._isRunning;)try{await this._updateLatestBlock(),await c(this._pollingInterval,!this._keepEventLoopActive)}catch(t){const e=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\n${t.stack}`);try{this.emit("error",e)}catch(t){console.error(e)}await c(this._retryTimeout,!this._keepEventLoopActive)}}async _updateLatestBlock(){const t=await this._fetchLatestBlock();this._newPotentialLatest(t)}async _fetchLatestBlock(){const t={jsonrpc:"2.0",id:1,method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(t.skipCache=!0);const e=await r(e=>this._provider.sendAsync(t,e))();if(e.error)throw new Error(`PollingBlockTracker - encountered error fetching block:\n${e.error}`);return e.result}}},570:function(t,e,n){"use strict";const r=(t,e)=>function(){const n=e.promiseModule,r=new Array(arguments.length);for(let i=0;i<arguments.length;i++)r[i]=arguments[i];return new n((n,o)=>{e.errorFirst?r.push((function(t,r){if(e.multiArgs){const e=new Array(arguments.length-1);for(let i=1;i<arguments.length;i++)e[i-1]=arguments[i];t?(e.unshift(t),o(e)):n(e)}else t?o(t):n(r)})):r.push((function(t){if(e.multiArgs){const t=new Array(arguments.length-1);for(let i=0;i<arguments.length;i++)t[i]=arguments[i];n(t)}else n(t)})),t.apply(this,r)})};t.exports=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const filter=t=>{const n=pattern=>"string"==typeof pattern?t===pattern:pattern.test(t);return e.include?e.include.some(n):!e.exclude.some(n)};let n;n="function"==typeof t?function(){return e.excludeMain?t.apply(this,arguments):r(t,e).apply(this,arguments)}:Object.create(Object.getPrototypeOf(t));for(const o in t){const c=t[o];n[o]="function"==typeof c&&filter(o)?r(c,e):c}return n}},578:function(t,e,n){const r=n(699).Mutex,{createAsyncMiddleware:o}=n(281),c=n(583),l=n(1190),h=n(1193),f=n(1194),{intToHex:d,hexToInt:m}=n(231);function y(t){return k(async(...e)=>{const filter=await t(...e);return d(filter.id)})}function k(t){return o(async(e,n)=>{const r=await t.apply(null,e.params);n.result=r})}function w(t,e){const n=[];for(let e in t)n.push(t[e]);return n}t.exports=function({blockTracker:t,provider:e}){let n=0,o={};const _=new r,B=function({mutex:t}){return e=>async(n,r,o,c)=>{(await t.acquire())(),e(n,r,o,c)}}({mutex:_}),v=c({eth_newFilter:B(y(R)),eth_newBlockFilter:B(y(L)),eth_newPendingTransactionFilter:B(y(C)),eth_uninstallFilter:B(k(T)),eth_getFilterChanges:B(k(A)),eth_getFilterLogs:B(k(F))}),x=async({oldBlock:t,newBlock:e})=>{if(0===o.length)return;const n=await _.acquire();try{await Promise.all(w(o).map(async filter=>{try{await filter.update({oldBlock:t,newBlock:e})}catch(t){console.error(t)}}))}catch(t){console.error(t)}n()};return v.newLogFilter=R,v.newBlockFilter=L,v.newPendingTransactionFilter=C,v.uninstallFilter=T,v.getFilterChanges=A,v.getFilterLogs=F,v.destroy=()=>{!async function(){const t=w(o).length;o={},E({prevFilterCount:t,newFilterCount:0})}()},v;async function R(t){const filter=new l({provider:e,params:t});await I(filter);return filter}async function L(){const filter=new h({provider:e});await I(filter);return filter}async function C(){const filter=new f({provider:e});await I(filter);return filter}async function A(t){const e=m(t),filter=o[e];if(!filter)throw new Error(`No filter for index "${e}"`);return filter.getChangesAndClear()}async function F(t){const e=m(t),filter=o[e];if(!filter)throw new Error(`No filter for index "${e}"`);return"log"===filter.type?results=filter.getAllResults():results=[],results}async function T(t){const e=m(t),filter=o[e],n=Boolean(filter);return n&&await async function(t){const e=w(o).length;delete o[t];const n=w(o).length;E({prevFilterCount:e,newFilterCount:n})}(e),n}async function I(filter){const e=w(o).length,r=await t.getLatestBlock();return await filter.initialize({currentBlock:r}),n++,o[n]=filter,filter.id=n,filter.idHex=d(n),E({prevFilterCount:e,newFilterCount:w(o).length}),n}function E({prevFilterCount:e,newFilterCount:n}){0===e&&n>0?t.on("sync",x):e>0&&0===n&&t.removeListener("sync",x)}}},583:function(t,e,n){t.exports=n(1189)},820:function(t,e){t.exports=function(){if(this)return this;Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0});try{return __global__}finally{delete Object.prototype.__global__}}()}}]);